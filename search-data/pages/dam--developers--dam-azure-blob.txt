---
title: "Configure the DAM Azure Blob submodule"
url: https://docs.magnolia-cms.com/dam/developers/dam-azure-blob/
category: Modules
version: modules
breadcrumb: DAM module > Azure Blob submodule
---

# Configure the DAM Azure Blob submodule

To store asset binaries in Azure Blob Storage, configure the DAM Azure Blob module to connect Magnolia to your Azure Blob Storage account. Asset metadata is stored in the [`dam` JCR workspace](../dam-workspace/).

To configure the module, you must:

-   Install the required module versions.

-   Set up Azure Blob Storage account permissions.

-   Provide connection credentials for Azure Blob Storage.


## [](#_prerequisites)Prerequisites

Make sure you have at least the following modules installed:

-   [`dam` `6.0.0`](../install/), including the `dam-azure-blob` submodule

-   [`dam-app` `6.0.0`](#dam-app:ROOT:developers/install.adoc)

-   [`imaging` `5.0.0`](#imaging:ROOT:developers/install.adoc)

-   Optional: [`image-recognition` `4.0.0`](#image-recognition:ROOT:developers/install.adoc)


## [](#_azure_storage_account_permissions)Azure Storage account permissions

### [](#_minimum_required_permissions)Minimum required permissions

To use Magnolia DAM with Azure Blob Storage, the following permissions are required.

-   `Blob Data Contributor` role or equivalent permissions for:

-   Read blob content

-   Write blob content

-   Delete blob content

-   List blob containers


For more details, see [Authorize access to Azure Blob Storage](https://learn.microsoft.com/en-us/azure/storage/blobs/authorize-access-azure-active-directory).

> **Note:** Your Azure Storage account must have blob versioning enabled if you want to maintain version history. For more details, see Blob versioning.

## [](#_configure_the_dam_azure_blob_module)Configure the `dam-azure-blob` module

1.  Stop Magnolia.

2.  Provide the following required properties, either in your `WEB-INF/config/default/magnolia.properties` file or using [MicroProfile Config](../../../product-docs/7.0/Administration/Architecture/configuration-management/microprofile-config/).

    magnolia.properties

    ```properties
    dam.core.binary.strategy=azure-blob (1)
    dam.core.binary.azure-blob.container-name=<container-name> (2)
    ```

    |     |     |
    | --- | --- |
    | **1** | The binary storage strategy `azure-blob`. |
    | **2** | The name of the Azure Blob Storage container where you store your asset binaries. |

3.  Choose one of the following authentication methods:

    -   Connection string

    -   Account name and key


    Provide the connection string that contains the credentials and endpoint information needed to connect to your Azure Storage account.

    magnolia.properties

    ```properties
    dam.core.binary.azure-blob.connection-string=DefaultEndpointsProtocol=https;AccountName=<account-name>;AccountKey=<account-key>;EndpointSuffix=core.windows.net (1)
    ```

    |     |     |
    | --- | --- |
    | **1** | The Azure Blob connection string that provides access to your storage account and blob containers. |

    To obtain your connection string:

    1.  Go to the [Azure Portal](https://portal.azure.com).

    2.  Navigate to your account’s settings.

    3.  Copy the connection string from either the primary or secondary access keys.

        For more details, see [Configure a connection string for an Azure storage account](https://learn.microsoft.com/en-us/azure/storage/common/storage-configure-connection-string#configure-a-connection-string-for-an-azure-storage-account).


    Provide the account name and account key separately.

    magnolia.properties

    ```properties
    dam.core.binary.azure-blob.account-name=<account-name>
    dam.core.binary.azure-blob.account-key=<account-key>
    ```

    To obtain your account name and key:

    1.  Go to the [Azure Portal](https://portal.azure.com).

    2.  Navigate to your account’s settings.

    3.  Copy the account name and either the primary or secondary key.


4.  Restart Magnolia.


## [](#_avoid_editing_assets_on_public_instances_when_using_azure_blob_storage)Avoid editing assets on public instances when using Azure Blob Storage

Editing or replacing assets on a public instance can corrupt Azure Blob Storage binaries. Always make changes on the author instance.

When Azure Blob Storage binary storage is enabled, updating or replacing an asset on a public instance deletes the asset binaries and leaves the asset in a broken state. Subsequent publication from the author instance propagates this corrupted state to public instances.

Ensure all asset changes are made on the author instance and published. Consider restricting access to the Assets app on public instances to prevent accidental edits.
