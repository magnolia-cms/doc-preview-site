---
title: "AI Agent configuration"
url: https://docs.magnolia-cms.com/ai-accelerator/4.0-alpha/developers/ai-agent/
category: Modules
version: modules
breadcrumb: AI Accelerator module > Agents > AI Agent configuration
---

# AI Agent configuration

AI Agents are extensible conversational AI assistants that can be integrated into Magnolia CMS. They enable LLM-powered automation and assistance through a chat interface, with support for tool execution, streaming responses, and context-aware operations.

| Property | Required | Description |
| --- | --- | --- |
| `$type` | Yes | The agent implementation type. Currently only `openAiAgent` is supported. |
| `name` | Yes | A unique identifier for the agent, displayed in the UI. |
| `model` | Yes | The LLM model identifier (such as `gpt-4o` , `gpt-4o-mini` , `o3-mini` ). |
| `systemPrompt` | Yes | Instructions that define the agent’s personality and behavior. Use YAML multiline syntax ( `|` ) for longer prompts. |
| `tools` | No | Map of tool definitions available to the agent. See [Tool definitions](#tool-configuration) . |

| Type | Description |
| --- | --- |
| `aiTaskTool` | Executes a registered AI task on the backend. Results are automatically returned to the LLM for continuation. |
| `frontendEnabledTool` | Executes a backend task and renders results with a custom UI component in the chat. |
| `browserExecutedTool` | Sends execution request to the frontend for JavaScript-based execution (such as navigation). |
| `humanInTheLoopTool` | Requires user approval before execution. User can approve or reject the action. |
| `restClientTool` | Calls an external REST API configured in the `rest-clients` registry. |

## [](#_task_definitions_for_agents)Task definitions for agents

Tasks referenced by tools must be defined in the `aiTasks` folder of your light module: `light-modules/<your-module>/aiTasks/<task-name>.yaml`.

### [](#_task_definition_example)Task definition example

This example shows a custom task definition, including its type, display name, task identifier, and input parameters for LLM integration.

light-modules/<your-module>/aiTasks/<task-name>.yaml

```yaml
$type: myCustomTask (1)
name: My Custom Task (2)
taskType: custom (3)
input: (4)
  query:
    $type: string
    required: true
    description: Search query
  limit:
    $type: integer
    required: false
    description: Maximum results to return
    defaultValue: 10
```

|     |     |
| --- | --- |
| **1** | Task type (must match a registered task implementation) |
| **2** | Display name |
| **3** | Task type identifier |
| **4** | Input parameters that become tool parameters for the LLM |

The `input` parameters are automatically converted to the tool’s JSON schema for the LLM.

| Property | Description |
| --- | --- |
| `appName` | Name of the current app (such as `Pages App` ) |
| `appType` | Type of app (such as `app` , `shell` ) |
| `subAppId` | Identifier of the current subapp |

## [](#_frontend_integration)Frontend integration

### [](#_custom_message_renderers)Custom message renderers

Register custom renderers for tool results:

```typescript
import { MessageRendererRegistry } from 'ai-accelerator-shared';

MessageRendererRegistry.register('MyComponent', {
  component: MyResultComponent,
  parseData: (data) => JSON.parse(data)
});
```

### [](#_browser_tool_executors)Browser tool executors

Register browser-side tool executors:

```typescript
import { BrowserToolExecutorRegistry } from 'ai-accelerator-shared';

BrowserToolExecutorRegistry.register('MyExecutor', async (args, context) => {
  // Execute browser-side logic
  return { success: true, message: 'Action completed' };
});
```

## [](#_session_management)Session management

Agent conversations maintain session state automatically:

-   Sessions expire after 30 minutes of inactivity

-   Multi-turn conversations preserve context between messages


## [](#_example_complete_agent_configuration)Example: Complete agent configuration

The following example shows a complete agent definition, including system prompt, model, and configured tools ready for use in Magnolia.

```yaml
$type: openAiAgent
name: magnolia-smart-chat
model: gpt-4o
systemPrompt: |
  You are Magnolia Smart Chat, a helpful assistant for content management.

  Guidelines:
  - Help users navigate and manage content
  - Ask clarifying questions when needed
  - Use appropriate tools for each task
  - Provide clear, concise responses

  Tool usage:
  - Use `list_apps` to get app information
  - Use `go_to_app` to navigate (requires valid appId)
  - Use `display_data_table` for structured data

tools:
  listApps:
    $type: aiTaskTool
    name: list_apps
    description: Get the list of available Magnolia apps.
    task: ai-accelerator-core:listAppsTask

  displayApps:
    $type: frontendEnabledTool
    name: display_apps
    description: Display available apps with visual representation.
    task: ai-accelerator-core:listAppsTask
    uiConfig:
      componentId: AppList

  openApp:
    $type: browserExecutedTool
    name: go_to_app
    description: Navigate to a specific Magnolia app by appId.
    task: ai-accelerator-core:openAppTask
    executorId: OpenApp
    uiConfig:
      componentId: OpenApp

  generateImage:
    $type: frontendEnabledTool
    name: generate_image
    description: Generate an image from a text prompt.
    task: ai-accelerator-image-io:generateImage
    uiConfig:
      componentId: ImageList
```

## [](#_extending_the_framework)Extending the framework

### [](#_custom_agent_implementation)Custom agent implementation

Implement the `AiAgent` interface:

```java
public class CustomAiAgent implements AiAgent {

    @Override
    public AiAgentResponse execute(AiAgentExecutionContext context) {
        // Synchronous execution
    }

    @Override
    public void stream(AiAgentExecutionContext context,
                       Consumer<String> eventConsumer) {
        // Streaming execution
    }
}
```

Register with a custom `$type` in your module descriptor.

### [](#_custom_task_implementation)Custom task implementation

Extend `AbstractAiTask`:

```java
public class CustomTask extends AbstractAiTask {

    @Override
    public TaskResult execute(TaskExecutionContext context) {
        // Task logic
        return TaskResult.success(result);
    }
}
```

## [](#_security_considerations)Security considerations

-   Agents require appropriate user roles for REST endpoint access

-   Tool execution respects Magnolia’s permission model

-   Sensitive operations should use `humanInTheLoopTool` for approval

-   API keys are managed via the Passwords app or environment variables


## [](#_related_documentation)Related documentation

-   [Task configuration](../task-configuration/)

-   [Parameter configuration](../parameters/)

-   [Module configuration](../configure/)
