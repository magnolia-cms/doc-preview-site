---
title: "Edit a Federation"
url: https://docs.magnolia-cms.com/cockpit/admin-federations/edit/
category: DX Cloud
version: cloud
---

# Edit a Federation

When you add a Federation, you’re connecting DX Cloud to an external identity provider (IdP) to manage authentication for your users. This allows your organization to use Single Sign-On (SSO) through supported protocols like OpenID Connect (OIDC) or SAML.

After creating a Federation, you can add Cockpit, Rancher, Magnolia SSO, and User attribute mappings as required.

1.  In the Cockpit, go to **Admin > Federations**.

2.  Go to the stacked lines ☰ and click **Edit**.

3.  Choose one of the following to edit:

    1.  [Cockpit mappings](#_cockpit_mappings)

    2.  [Rancher mappings](#_rancher_mappings)

    3.  [Magnolia SSO mappings](#_magnolia_sso_mappings)

    4.  [User attribute mappings](#_user_attribute_mappings)



## [](#_cockpit_mappings)Cockpit mappings

Cockpit mapping lets you automatically assign users to specific Cockpit groups based on identity information received from the Identity Provider (IdP) during login.

When a user logs in using a federated IdP (via SAML or OIDC), we inspect the user’s identity token for specific claims (such as `email`, `department`, or `role`) and matches them to defined rules. These mappings determine which Cockpit group the user should belong to.

Use Cockpit mappings to grant conditional access to environments, projects, or roles based on user attributes managed by your organization’s IdP.

![cockpit mapping](../../../paas/cockpit/_images/admin/federations/cockpit-mapping.jpg)

To create a Cockpit mapping:

1.  Go to the **Cockpit mapping** tab.

2.  Go to **Add new mapping**.

3.  Under **Access for**, select one of the following:

    -   *User matching claim*: Only users whose IdP token contains a matching claim will be assigned to the group.

    -   *Everyone*: All federated users will be assigned to the specified group, regardless of claims.

        > **Tip:** Use Everyone for general access groups, and User matching claim for more granular, attribute-based group assignments.


4.  Enter a **Name** for the mapping.

    This is used internally to help identify the mapping. Choose a meaningful name you will remember.

5.  Enter a **Claim**.

    The Claim is name of the claim to inspect in the IdP token.

    Common examples include:

    -   `email`

    -   `groups`

    -   `department`

    -   `roles`


    Get valid claim names from your IdP administrator or associated documentation.

6.  Enter a **Claim value**.

    The expected value of the claim to match.

    **Example**:

    If the token contains:

    ```json
    "department": "marketing"
    ```

    Then the **Claim** would be `department` and the **Claim value** would be `marketing`.

7.  Select if it should be an exact match or a regex with **Is regex**.

    Leave this unchecked to require an exact match. Enable it if you want to match patterns, for example:

    -   `^dev.*` matches `devops`, `developers`, `dev-team`

    -   `.*-team$` matches `frontend-team`, `backend-team`, `qa-team`


8.  Select a **Group**

    The Cockpit group to assign the user to if the claim match is successful.

    Available groups depend on your Magnolia Cockpit configuration (e.g., `Admin`, `Editor`, `Viewer`).


### [](#_example)Example

To assign users from the Marketing department to the `Editor` group:

-   **Access for**: `User matching claim`

-   **Name**: `CockpitMarketing`

-   **Claim**: `department`

-   **Claim value**: `marketing`

-   **Is regex**: *unchecked*

-   **Group**: `Editor`


## [](#_rancher_mappings)Rancher mappings

Rancher mappings let you automatically grant users access to specific Rancher environments based on identity information received from the Identity Provider (IdP) during login.

When a user logs in using a federated IdP (via SAML or OIDC), Magnolia inspects the user’s identity token for specific claims (such as `email`, `department`, or `role`). These mappings determine whether the user should be granted access to Rancher.

Use Rancher mappings to restrict or grant Kubernetes access based on organizational roles, departments, or other IdP-managed user attributes.

![rancher mapping](../../../paas/cockpit/_images/admin/federations/rancher-mapping.jpg)

To create a Rancher mapping:

1.  Go to the **Rancher mapping** tab.

2.  Click **Add new mapping**.

3.  Under **Access for**, select one of the following:

    -   *User matching claim*: Only users whose IdP token contains a matching claim will be granted Rancher access.

    -   *Everyone*: All federated users will be granted Rancher access, regardless of claims.

        > **Tip:** Use Everyone to grant broad Rancher access, and User matching claim to restrict access to specific teams or roles based on IdP attributes.


4.  Enter a **Name** for the mapping.

    This is used internally to help identify the mapping. Choose a clear, descriptive name such as `GrantDevTeamRancherAccess`.

5.  Enter a **Claim**.

    The claim is the name of the attribute from the IdP token that Magnolia will inspect.

    Common examples:

    -   `groups`

    -   `department`

    -   `team`

    -   `roles`


    Check your IdP documentation or consult your administrator for the correct claim names.

6.  Enter a **Claim value**.

    The expected value of the claim that must be matched in order to grant access.

    **Example**:

    If the token includes:

    ```json
    "groups": ["devops", "qa"]
    ```

    Then the **Claim** would be `groups` and the **Claim value** would be `devops`.

7.  Select whether the value should be treated as a regular expression by enabling **Is regex**.

    Leave this unchecked to match the claim value exactly. Enable it if you want to match patterns, for example:

    -   `^dev.*` matches `devops`, `developers`, `dev-team`

    -   `.*-team$` matches `frontend-team`, `backend-team`, `qa-team`



### [](#_example_2)Example

To grant Rancher access to users in the DevOps group:

-   **Access for**: `User matching claim`

-   **Name**: `RancherDevOps`

-   **Claim**: `groups`

-   **Claim value**: `devops`

-   **Is regex**: *unchecked*


## [](#_magnolia_sso_mappings)Magnolia SSO mappings

Magnolia SSO mappings let you grant users access to specific Magnolia SSO clients and roles based on identity information received from the Identity Provider (IdP).

When a user logs in using a federated IdP (via SAML or OIDC), Magnolia inspects the user’s identity token for specific claims (e.g., `email`, `department`, `groups`) and uses these mappings to determine which SSO client and role the user should be assigned to.

Use Magnolia SSO mappings to manage access across Magnolia services and applications through centralized SSO group and role assignments.

![magnolia sso mapping](../../../paas/cockpit/_images/admin/federations/magnolia-sso-mapping.jpg)

To create a Magnolia SSO mapping:

1.  Go to the **Magnolia SSO mapping** tab.

2.  Click **Add new mapping**.

3.  Under **Access for**, select one of the following:

    -   *User matching claim*: Only users whose IdP token contains a matching claim will be granted Magnolia SSO access.

    -   *Everyone*: All federated users will be granted Magnolia SSO access, regardless of claims.

        > **Tip:** Use Everyone to grant broad Magnolia SSO access, and User matching claim to restrict access to specific teams or roles based on IdP attributes.


4.  Enter a **Name** for the mapping.

    This is used internally to identify the mapping. Choose something descriptive, such as `AssignMarketingToEditorRole`.

5.  Enter a **Claim**.

    This is the name of the attribute in the IdP token that Magnolia will inspect to determine role assignment.

    Common examples:

    -   `email`

    -   `groups`

    -   `roles`

    -   `department`


    You can get valid claim names from your IdP administrator or documentation.

6.  Enter a **Claim value**.

    This is the expected value Magnolia should match against the specified claim.

    **Example**:

    If the token includes:

    ```json
    "groups": ["marketing", "design"]
    ```

    Then the **Claim** is `groups` and the **Claim value** is `marketing`.

7.  Enable **Is regex** if the claim value should be interpreted as a regular expression.

    Leave unchecked for exact matches. Use regex for flexible matching, e.g.:

    -   `^editor.*` matches `editor`, `editorial`, `editorial-team`

    -   `.*-group$` matches `qa-group`, `admin-group`


8.  Select the **Client**.

    This is the **Magnolia SSO client** the user should be assigned to if the mapping matches.

    Clients represent applications or services integrated with Magnolia SSO.

9.  Select the **Role**.

    The role to assign to the user within the selected Magnolia SSO client.

    Roles control what the user can do once logged into that client.


### [](#_example_3)Example

To assign the `page-editor` role in the `admincentral` SSO client to users from the `marketing` group:

-   **Access for**: `User matching claim`

-   **Name**: `MarketingEditorRole`

-   **Claim**: `groups`

-   **Claim value**: `marketing`

-   **Is regex**: *unchecked*

-   **Client**: `admincentral`

-   **Role**: `page-editor`


## [](#_user_attribute_mappings)User attribute mappings

User attribute mappings let you populate user profile attributes in Magnolia based on values from the Identity Provider (IdP) token.

User attribute mappings are typically used to enrich Magnolia user profiles with data such as first name, last name, email, department, or any other identity-related field. This information can then be used for personalization, access control, or auditing within Magnolia.

Each mapping defines where the attribute value comes from, either from a claim in the IdP token or a hardcoded value, and maps it to a specific Magnolia user attribute.

![user attribute mapping](../../../paas/cockpit/_images/admin/federations/user-attribute-mapping.jpg)

To create a User attribute mapping:

1.  Go to the **User attribute mapping** tab.

2.  Click **Add new mapping**.

3.  Choose the **Attribute based on** option:

    -   *Existing claim*: The value will come from a claim in the IdP token.

    -   *Hardcoded value*: The value is fixed and set manually.



> **Tip:** Use Existing claim when pulling values like email, first_name, or department from your IdP. Use Hardcoded value to assign a static value for all users (e.g., set "region": "EMEA" for everyone in a federation).

1.  Enter a **Name** for the mapping.

    This name helps you identify what the mapping is doing (e.g., `SetEmailFromClaim` or `SetRegionToEMEA`).

2.  If using *Existing claim*, enter the **Claim** name to extract the value from.

    This should match the name of the claim in the IdP token.

    Examples:

    -   `email`

    -   `given_name`

    -   `family_name`

    -   `custom_department`


    You can get valid claim names from your IdP administrator or documentation.

3.  Enter the **User attribute**.

    This is the Magnolia user attribute you want to populate.

    Examples:

    -   `email`

    -   `firstName`

    -   `lastName`

    -   `department`

    -   `region`


    Make sure the attribute name matches what’s supported or expected in your Magnolia user profile structure.


### [](#_examples)Examples

To map the `email` claim from the IdP to the Magnolia `email` user attribute:

-   **Attribute based on**: `Existing claim`

-   **Name**: `MapEmail`

-   **Claim**: `email`

-   **User attribute**: `email`
