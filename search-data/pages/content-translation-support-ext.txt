---
title: "Content Translation Extended module"
url: https://docs.magnolia-cms.com/content-translation-support-ext/
category: Modules
version: modules
breadcrumb: Content Translation Extended module
---

# Content Translation Extended module

[Content management](../product-docs/7.0/use-cases/content-management/) [Framework](https://gitlab.magnolia-platform.com/pd/extensions/ps-maintained/content-translation-support-ext) [EXCONTRANS](https://magnolia-cms.atlassian.net/browse/EXCONTRANS) Version 5.0.0 [Magnolia 6.4](../product-docs/7.0/) compatible

The **Content Translation Support Extended (CTSX)** module enables you to translate content automatically. This module comes with several apps which are used to manage the translation tasks.

## [](#_what_you_can_translate)What you can translate

With the **Content Translation Extended module**, you can translate text-based content in your pages, components, or custom apps. Here’s what you can work with:

-   **Titles and headings**: Short text fields, like page titles or section headers.

-   **Descriptions and body text**: Longer text areas, including formatted content like articles.

-   **Grouped content**: Sections with multiple text fields (e.g., a banner with a title and subtitle).

-   **Lists of text entries**: Repeated text fields, like a series of quotes or product descriptions.


> **Important:** You must set i18n: true in order for a field to be translatable. See Usage to instructions on how to add content to a translation batch.

### [](#_how_to_spot_translatable_content)How to spot translatable content

You’ll see these fields in the editing dialogs for pages or apps. If a field lets you enter or edit text and is set up for multiple languages (*you might see a language selector*), you can translate it. Non-text content, like images or dates, can’t be translated.

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../product-docs/7.0/Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.translation</groupId>
  <artifactId>magnolia-content-translation-support-ext-core</artifactId>
  <version>5.0.0</version>
</dependency>
```

## [](#_usage)Usage

Content Translation Support Extended (CTSX) enables you to translate content automatically over a translation provider ensuring a more accurate translation. Translation is done from a base language, typically English, to a target language. The base language should exist as content within your website or content app as properties. The target languages should be configured in your site definition. See [Enabling multilanguage content](../product-docs/7.0/Administration/Language/Language-configuration/#_enabling_multilanguage_content) for more information.

### [](#_add_content_to_translation_batch)Add content to translation batch

Visuals in these instructions were made with Magnolia 6.2. Depending on your version of the Content Translation Extended module, the screens may look slightly different.

1.  Select a page, component, or app item.

2.  Use the **Add to Translation Batch** action.

    ![add to translation batch](_images/add-to-translation-batch.jpg)

3.  Name your translation batch and choose your targets language(s).

4.  Click **Save changes**. The text is batched and ready to send to a translation provider (like Google or DeepL) or let you export it for manual translation.

    ![add to translation batch dialog](_images/add-to-translation-batch-dialog.jpg)

5.  Go to your **Content Translation Support Extended (CTSX)** module in Admincentral to see your translation batches.


> **Tip:** If you’re unsure whether a particular field is translatable, your technical team can check or adjust the configuration to support it.

> **Tip:** To send only untranslated fields, select the option "Submit only untranslated fields" in the Add to Translation Batch dialog.

### [](#_configuration)Configuration

In JCR the translation provider configurations have to be located under the `config/translationProviders` node.

```none
modules
├── content-translation-support-ext-<provider-name>
├── config
│   └── translationProviders
│       └── <service-name>TranslationProviderConfigFile.yaml
...
```

> **Note:** Instead of using JCR, translationProviders services can be configured via YAML files.

#### [](#_additional_configurations)Additional configurations

 ParameterDescription

`supportedFieldDefinitions`

**required**; taken from default Module Content Translation

Defines the field types that are going to be translated. Default is text and richText; possible values are composite and multiValue.

![supportedFieldDefinitions](_images/supportedFieldDefinitions.jpg)

```yaml
'supportedFieldDefinitions':
  'blockField': 'info.magnolia.block.BlockFieldDefinition'
  'codeField': 'info.magnolia.ui.field.CodeFieldDefinition'
  'collapsibleCompositeField': 'info.magnolia.editor.app.field.CollapsibleCompositeFieldDefinition'
  'compositeField': 'info.magnolia.ui.field.CompositeFieldDefinition'
  'damRichTextField': 'info.magnolia.dam.app.field.DamRichTextFieldDefinition'
  'expandingLinkField': 'info.magnolia.editor.app.field.ExpandingLinkFieldDefinition'
  'expandingTextField': 'info.magnolia.editor.app.field.ExpandingTextFieldDefinition'
  'jcrMultiField': 'info.magnolia.ui.field.JcrMultiFieldDefinition'
  'jcrMultiValueField': 'info.magnolia.ui.field.JcrMultiValueFieldDefinition'
  'lightRichTextField': 'info.magnolia.editor.field.LightRichTextFieldDefinition'
  'multiJcr': 'info.magnolia.editor.block.jcr.MultiJcrBlockDefinition'
  'refreshableTextField': 'info.magnolia.editor.app.field.RefreshableTextFieldDefinition'
  'richText': 'info.magnolia.ui.form.field.definition.RichTextFieldDefinition'
  'richTextField': 'info.magnolia.ui.field.RichTextFieldDefinition'
  'switchableField': 'info.magnolia.ui.field.ConfiguredSwitchableFieldDefinition'
  'text': 'info.magnolia.ui.form.field.definition.TextFieldDefinition'
  'textField': 'info.magnolia.ui.field.TextFieldDefinition'
```

> **Note:** Content types for multi field need to specify decorator and item provider in the definition

```yaml
entryResolution:
    propertyNameDecorator: info.magnolia.ui.field.NoopNameDecorator
  field:
    itemProvider:
      $type: currentItemProvider
```

`propertiesToTranslateFinder`

**required**

The class that finds the properties to be translated. Default value: `info.magnolia.translation.ext.core.finder.AdaptivePropertiesToTranslateFinder`; finds the properties by processing the fields in the dialogs.

`sourceLanguages`

**optional**

From version 2.9.7, 3.0.3 Defines the source languages. The default is the value in the site definition `fallbackLanguage`; you can define as many languages as your 3rd party translator supports, the dialog will display just the ones supported in the current site definition.

![configuration structure](_images/configuration-structure.jpg)

### [](#_translation_providers)Translation providers

There are several translation providers to choose from: [CTSX Google Translator](google/), [CTSX Microsoft Translator](microsoft/), [CTSX Transperfect](transperfect/), [CTSX AT Language Solutions](atls/), [CTSX DeepL Translator](deepl/), [CTSX ChatGPT Translator](chatgpt/), [CTSX AI Accelerator Translator](aiaccelerator/) and [CTSX Instant Translation](instant/). To make use of the translation functionality, a user account is required for the chosen provider.

A translator module connects Magnolia to translation services. The behavior of the service depends on the translation service selected.

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 70%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Service</th><th class="tableblock halign-left valign-top">Notes</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Synchronous</strong></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>Directly returns the translated result for each translation request.</p></div><div class="ulist"><ul><li><p>Google</p></li><li><p>Microsoft</p></li><li><p>AT Language Solutions (from version <code>3.3</code>)</p></li><li><p>DeepL (from version 3.4)</p></li><li><p>ChatGPT</p></li><li><p>AI Accelerator module</p></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Asynchronous</strong></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>Does not return the translated result for each translation request. A second request is required to get the translated result.</p></div><div class="ulist"><ul><li><p>Translations.com</p></li><li><p>AT Language Solutions (before version <code>3.3</code>)</p></li></ul></div></div></td></tr></tbody></table></div>

#### [](#_common_properties)Common properties

| Property | Description |
| --- | --- |
| `autoTranslationAllowed` | **optional**<br><br>When true the content review process (workflow) is bypassed. |
| `class` | **required**<br><br>Definition class for the translator to be used. |
| `configName` | **required**<br><br>The display name of the configuration in Magnolia. |
| `defaultFlag` | **required**<br><br>Set the translator to be the default. |
| `enabledFlag` | **required**<br><br>Enables or disables the configuration with `true` or `false`. |
| `implementationClass` | **required**<br><br>Implementation class for the translation service. |
| `leaveEmptyXliffTranslationValues` | **optional**<br><br>Exported fields are filled in with the original values by default, to disable this behaviour set this property to `true`. |

### [](#_translation_extend_app)Translation Extend app

The module comes with the Translation Extend app which can be found under the tools menu of the applauncher. This app extends the functionality of Content Translation in the sense that translations can now be automatized. It is still possible to export the automatized translations from the Content Translation app after receiving them.

#### [](#_translation_subapps)Translation subapps

The app is made up of several subapps for managing translation files and submissions.

-   **Batches**: In the Batches subapp users can

    -   Add a new or edit an existing batch.

    -   Submit a batch for translation.

    -   View the history of the batch.

    -   View the translation queue.

    -   Cancel a batch submission.

    -   Reload an existing batch.


-   **Histories**: Allows for viewing and managing the batch histories. (Accessible by clicking the `View activity history` action after selecting a batch in the Batches subapp)

-   **Queues**: Allows for managing the translation submission. (Accessible by clicking the `View translation queue` action which is always available in the Batches subapp)

-   **Comparison**: Allows you to compare original and translated values before importing or rejecting. (Accessible by clicking the `Review` action when viewing a translation task in the Tasks app before importing a finished translation)


#### [](#_translation_status)Translation status

Once a batch is created it has a status. The status is visible from Batches subapp.

| Status | Description |
| --- | --- |
| `NEW` | Created and not yet submitted. |
| `OPEN` | Processing and submitted. |
| `IMPORTED` | The content was imported. |
| `REJECTED` | The translation has been rejected by the reviewer. |
| `CANCELLED` | Cancelled |
| `EXPIRED` | Translation expired. |
| `ERROR` | An error occurred. |

### [](#_workflow)Workflow

This module provides a workflow for users to review and approve translated content. If the setting `autoTranslationAllowed` is `true` then the content is imported directly without a review step. Otherwise the content review workflow process is started.

The workflow is identical in nature to the 4-eye content approval workflow used for the Pages app. In this case the editor is the translation provider and the reviewer can be any person in the group. To configure your desired group, change the property here: `/modules/content-translation-support-ext-core/tasks/reviewTranslation/groups@publishers`.

#### [](#_message_views)Message views

Workflow message views define how messages display in Pulse during translation workflow. See [Message view definition](../product-docs/7.0/Apps/Developing-an-app/Specific-aspects/Messages/Message-view-definition/) for more details.

> **Note:** Message views are configured here: /modules/content-translation-support-ext-core/messageViews.

![message view definition newUI](_images/message-view-definition-newUI.png)

#### [](#_work_item_handlers)Work item handlers

The mapping is based on the work item name which is added to the jBPM process definition. There are two handlers configured for the workflow process.

-   approve: Handles importing translated content after approval

-   reject: Handler for content rejection


> **Note:** Work item handlers are configured here: /modules/content-translation-support-ext-core/workItemHandlers.

### [](#_translation_jobs)Translation jobs

The core module installs three scheduled jobs to automate the translation process. The translation is submitted to the translation provider. In the case of Translations.com or AT Language Solutions, a second request is required to retrieve the translation results. Finally, the translation is either directly imported or the workflow process is initiated.

> **Note:** The jobs are configured under: /modules/scheduler/config/jobs.

> **Note:** The default interval for executing cron jobs is set to every 10 minutes. Depending on the volume of content you need to translate and the nature of your work, this may be too frequent and could overload the system. If necessary, consider adjusting the cron job interval to every 1 hour or another value that better suits your needs.

> **Note:** To generate the correct cron expression, it’s recommended to use an online cron generator tool. For example, the cron expression to execute every 1 hour is: 0 0 * * * ?

#### [](#_submitting)Submitting

The `submitTranslationToExternalServiceJob` sends translation submission requests to the provider.

```yaml
# Configuration shown in YAML but must exist as a JCR Node.
submitTranslationToExternalServiceJob:
  catalog: workflowTranslation
  command: submitTranslationToExternalServiceProcessCommand
  cron: 1/60 * * * * ? # set to execute every minute at 1 second past the minute
  description: Output, Send, Update translation batch
  enabled: true
  concurrent: false
  params:
    maxAttempt: 10 # define the max retry for each item
```

#### [](#_retrieving)Retrieving

The `retrieveTranslationResultFromExternalServiceJob` is for asynchronous translation. For translating services that require a second request to retrieve the translations you will need to use this job as well.

```yaml
# Configuration shown in YAML but must exist as a JCR Node.
retrieveTranslationResultFromExternalServiceJob:
  catalog: workflowTranslation
  command: retrieveTranslationResultFromExternalServiceProcessCommand
  cron: 5/60 * * * * ? # set to execute every minute at 5 seconds past the minute
  description: Get translation from provider
  enabled: true
  concurrent: false
  params:
    maxAttempt: 10 # define the max retry for each item
```

#### [](#_importing)Importing

The `startImportWorkflowOrAutoImportJob` imports the translation immediately or starts the workflow. The behavior is set by `autoTranslationAllowed` property in the translator configuration.

```yaml
# Configuration shown in YAML but must exist as a JCR Node.
startImportWorkflowOrAutoImportJob:
  catalog: workflowTranslation
  command: startImportWorkflowOrAutoImportJob
  cron: 0/30 * * * * ? # set to execute every 30 seconds
  description: Import or create import workflow
  enabled: true
  concurrent: false
  params:
    maxAttempt: 10 # define the max retry for each item
```

### [](#_clean_up_imported_submission_job)Clean up imported submission job

The `cleanUpImportedSubmissionJob` clean up the successful batch, imported translation and all related histories from the workspace.

```yaml
# Configuration shown in YAML but must exist as a JCR Node.
'cleanUpImportedSubmissionJob':
  'command': 'cleanUpImportedSubmission'
  'catalog': 'workflowTranslation'
  'cron': '0 0/10 * 1/1 * ? *'
  'description': 'Clean up imported submission'
  'enabled': true
  'concurrent': false
  'params':
    'minusDays': '14' #get record has lastModified from the pass
    'numOfBatchPerProcess': '10'
```

### [](#_what_is_exported_and_imported)What is exported and imported

By default, text and rich text fields are included in export files. Additional field types may be registered here: `/modules/translation/config/supportedFieldDefinitions`. Add another property with the value set to the definition class of the field that should be included.

![what is exported imported](_images/what-is-exported-imported.jpg)

In addition to registration, the child fields of the composite field should have an `i18n` property set to `true`.

```yaml
compositeFieldI18nChildNodeChildrenI18n:
      label: compositeField
      $type: compositeField
      i18n: true
      itemProvider:
        $type: jcrChildNodeProvider
      propertyNameDecorator: info.magnolia.ui.field.PrefixNameDecorator
      properties:
        - name: textField1
          label: textField1
          $type: textField
          i18n: true
        - name: textField2
          label: textField2
          $type: textField
          i18n: true
```

### [](#_notification_email)Notification Email

Magnolia uses Mail module to send a notification email to submitter in case of errors. The template provided is [here](https://git.magnolia-cms.com/projects/SERVICES/repos/content-translation-support-ext/browse/magnolia-content-translation-support-ext-core/src/main/resources/templates/translationNotificationTemplate.html). The notification email template is configured here: `/modules/mail/config/templatesConfiguration/translationNotificationTemplate`.

![core email notification](_images/core-email-notification.jpg)

The Mail module is used to send notification emails regarding submission status changes to users who are members of the 'submission-status-receivers' group. The notification email template can be found at: /modules/mail/config/templatesConfiguration/submissionStatusChangeNotificationTemplate.

To configure the sender and SMTP server, refer to the Mail module documentation: [https://docs.magnolia-cms.com/product-docs/6.2/modules/list-of-modules/mail-module/mail/#\_configuring\_smtp](https://docs.magnolia-cms.com/product-docs/6.2/modules/list-of-modules/mail-module/mail/#_configuring_smtp)

> **Note:** Users who can receive the email must be members of a group called submission-status-receivers. You can create this group with the exact name and assign users to it in the security app.

To enable the sendMail functionality, add the `submissionStatusEmailJobEnabled` flag and set it to true in the param section, next to maxAttempts, for the following three scheduler jobs:

-   submitTranslationToExternalServiceJob

-   retrieveTranslationResultFromExternalServiceJob

-   startImportWorkflowOrAutoImportJob


These scheduler jobs can be modified at: /modules/scheduler/config/jobs.

## [](#_changelog)Changelog

| Version | Notes |
| --- | --- |
| `5.0.0` | Release for Magnolia 6.4 compatibility.<br><br>[Changelog](https://magnolia-cms.atlassian.net/issues/?jql=project%20%3D%20EXCONTRANS%20AND%20fixVersion%20%3D%205.0.0) |
