---
title: "Content Translation Support module"
url: https://docs.magnolia-cms.com/product-docs/RNs-6-4-3/Modules/List-of-modules/Content-Translation-Support-module/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Modules > Content Translation Support module
---

# Content Translation Support module

| Edition | DX Core |
| --- | --- |
| License | [MLA](https://www.magnolia-cms.com/mla.html) |
| Issues | [MGNLCTS](https://magnolia-cms.atlassian.net/browse/MGNLCTS) |
| Maven site | [Content Translation Support](https://nexus.magnolia-cms.com/#browse/browse:enterprise:info%2Fmagnolia%2Ftranslation%2Fmagnolia-content-translation%2F{magnolia-content-translation-support-64}) |
| Latest | {magnolia-content-translation-support-64} |

## [](#_module_artifacts_have_changed)Module artifacts have changed

Please note that the artifact IDs (Maven `groupId` and `artifactId`) have changed since Magnolia 5.5.

If you have custom Java code relying on this module, you need to install a compatibility module too.

> **Tip:** Check Gitlab repo for the new module structure.

See also the [Content Translation Extended module](../../../../../content-translation-support-ext/) (CTSX) module, which provides automated translation services for your content.

> **Warning:** Note the changes in groupId and artifactId since the 2.2 release.

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../../Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.translation</groupId>
  <artifactId>magnolia-content-translation</artifactId>
  <version>{magnolia-content-translation-support-64}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.translation</groupId>
  <artifactId>magnolia-content-translation-pages-integration-app</artifactId>
  <version>{magnolia-content-translation-support-64}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

## [](#_configuration)Configuration

The module is configured in the following JCR nodes:

-   `/modules/translation`

-   `/modules/translation-pages-integration`


In addition, the following directories in the **Resource Files** app contain configuration by file:

-   `/translation/dialogs`

-   `/translation/fieldTypes`

-   `/translation/i18n`


## [](#_content_translation_app)Content Translation app

The Content Translation app allows you to manage the translation of pages.

-   **Export translation**: Exports i18n content of a page or tree.

-   **Import translation**: Imports translated content of a page or tree.

-   **Preview page**: Opens the page in preview mode in the [Pages app](../../../Apps/List-of-apps/Pages-app/).

-   **Publish** and **Unpublish** are subject to [workflow](../Workflow-module/).


### [](#_exporting_pages_for_translation)Exporting pages for translation

To export pages:

1.  Select a page. Subpages are included in the export file.

2.  Click **Export translation**.

3.  Select a file format

4.  Click **Export file**.


The download filename is created from the file path in the `website` workspace, with dots replacing forward slashes such as `website.travel.about.xls`. The file has the following columns (comma-separated headings in CSV or elements in XLIFF):

-   **Modification date of page**

-   **Key**: Internal identifier that consists of component UUID and field name. This is used by Magnolia to store and render translated content. Do not edit this value.

-   **Link to page**: Page URL for easy access by the translator. Click to see the translatable text in page context.

-   **Title**: A pseudo-title created by combining component type and field name, for example `Text and Image: Subheading`. This tells the translator what kind of page element he is translating.

-   **Default language**: Default language text.

-   **<language\_code>**: Columns for each locale configured for the site. This is where the translator types the language text. Already translated content can be updated and new translations added.


> **Tip:** GoogleSpreadsheetTranslationBundleWriter adds the Google Translate formula to the CSV exporter. When you upload the CSV file to Google Docs, it evaluates the formula and the text is machine-translated into the target i18n languages automatically.

### [](#_importing_translated_page_content)Importing translated page content

Once the file has been translated you can upload it in the app. The translated content is automatically included on the page.

To import translated page content:

1.  Select the page.

2.  Click **Import translation**.

3.  Upload the file.

4.  Optionally check the overwrite and import empty translations options.

5.  Click **Import file**.


In the Pages app, you can now see the translated content in the components and dialogs.

## [](#_locales)Locales

Your site definition needs to have at least one [locale](../../../Administration/Language/Language-configuration/) in addition to the default locale. Locales show up as columns in the export file.

**Example**: `travel` site definition with English and German locales.

```yml
travel:
  i18n:
    locales:
      en:
        country:
        enabled: true
        language: en
      de:
        country:
        enabled: true
        language: de
      class: info.magnolia.cms.i18n.DefaultI18nContentSupport
      enabled: true
      fallbackLocale: en
```

| `class` | **required** Class that performs the import or export ( `readerImplementationClass` and `writerImplementationClass` properties respectively). • `info.magnolia.translation.io.reader.*` • `XlsTranslationItemReader` • `CsvTranslationItemReader` • `UnzippedXliffTranslationItemReader` • `info.magnolia.translation.io.writer.*` • `XlsTranslationItemWriter` • `CsvTranslationItemWriter` • `XliffTranslationItemWriter` • `GoogleSpreadsheetTranslationItemWriter` You can write your own importers and exporters for other file formats, databases, or Web services that translators use. |
| --- | --- |
| `extension` | **optional** File extension without the dot. |
| `label` | **optional** Extension label. |

| Property | Description |
| --- | --- |
| `commands` | **required** [Commands](../../../Developing/Commands/) folder. |
| `translation` | **required** Content translation support [catalog](../../../Developing/Commands/) . |
| `<command name>` | **required** • `downloadTranslationFile` : Name of the command node to download files for translation. • `uploadTranslationFile` : Name of the command node to reupload translation files. |
| `formPath` | **required** The path to the form. |
| `workspace` | **required** Workspace name. |
| `class` | **required** • info.magnolia.translation.commands.TranslationFileDownloadCommand : • Downloads files from a specified path in a specified format, for translation. Operates on the `website` workspace by default. • Calls the relevant [importers and exporters](#_importers_and_exporters) class. • The exported file contains all page content nodes marked as `i18n` in the [template definition](../../../Developing/Templating/Template-definition/) . • The file path in the repository is converted into the file name by replacing forward slashes with dots. • info.magnolia.translation.commands.TranslationFileUploadCommand : • Uploads translated files in a specified format to a specified path. Operates on the `website` workspace by default. • Calls the relevant [importers and exporters](#_importers_and_exporters) class. • Content is uploaded to relevant i18n fields in the dialogs. |

| Property | Description |
| --- | --- |
| `commit` | **required** Commit action configuration. |
| `catalog` | **required** `translation` command [catalog](../../../Developing/Commands/) . |
| `class` | **required** Action definition class. See below. |
| `command` | **required** Name of command configuration node. |
| `label` | **optional** Action labels: Export file and Import file. |

| Property | Description |
| --- | --- |
| `config` | **optional** Module configuration folder. |
| `supportedFieldDefinitions` | **required** Defines the field types to export. |
| `<field name>` | **required** Registers [rich text field](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Rich-text-field/) and [text field](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Text-field/) definition classes. These field types typically contain the textual i18n content. |
| `propertiesToTranslateFinder` | **required** Node data to translate finder node. |
| `class` | **required** info.magnolia.translation.finder.AdaptivePropertiesToTranslateFinder delegates calls to an implementation of `PropertiesToTranslateFinder` based on the modules that are currently installed. |

## [](#_i18n_content_storage)i18n content storage

You can view the translated nodes in the `website` workspace in the [JCR Browser app](../../../Apps/List-of-apps/JCR-Browser-app/). The translated content is suffixed with a locale such as `_de`. Since English is the default locale on this site, no `_en` suffix is used.

## [](#_enabling_content_translation_in_content_apps)Enabling content translation in content apps

You can enable content translation support in any content app.

**Example**: Enabling content translation in the Contacts app.

1.  Add the `i18n` property to any field you want to translate in the `detail` subapp. See [Enabling mulitlanguage content](../../../Administration/Language/Language-configuration/#_Enabling_multi_language_content) for more information.

    **Example**: New [text field](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Text-field/) called `bio` under `/modules/contacts/apps/contacts/subApps/detail/editor/form/fields/bio`.

    ```yml
    editor:
      form:
        fields:
          bio:
            $type: textField
            i18n: true
            rows: 3
    ```

2.  Configure contact translation upload and download [commands](../../../Developing/Commands/) in the `translation` [catalog](../../../Developing/Commands/) in the `translation` module. The commands are called by the dialogs configured in step 3.

    **Example**: `downloadContactTranslation` and `uploadContactTranslation` commands configured in `/modules/translation/commands/translation/commands`.

    ```yml
    commands:
      translation:
        downloadContactTranslation:
          workspace: contacts
          formPath: /modules/contacts/apps/contacts/subApps/detail/editor/form
          class: info.magnolia.translation.commands.TranslationFileDownloadCommand
        uploadContactTranslation:
          class: info.magnolia.translation.commands.TranslationFileUploadCommand
    ```

3.  Configure contact translation dialogs in any module. The easiest way to do this is to copy the `downloadTranslationFile` and `uploadTranslationFile` dialog definition files in **Resource Files** `/translation/dialogs/` and change the value of the `command` properties. These dialogs use the commands configured in step 2.

    **Example**: `downloadContactTranslation` and `uploadContactTranslation` dialogs configured in `/modules/translation/commands/translation/dialogs`.

    downloadContactTranslation.yaml

    ```yml
    form:
      properties:
        ...
    actions:
      commit:
        command: downloadContactTranslation
        catalog: translation
        class: info.magnolia.translation.ui.action.TranslationFileDownloadDialogActionDefinition
      cancel:
        class: info.magnolia.ui.dialog.action.CancelDialogActionDefinition
    ```

    uploadContactTranslation.yaml

    ```yml
    form:
      properties:
        ...
    actions:
      commit:
        command: uploadContactTranslation
        catalog: translation
        class: info.magnolia.translation.ui.action.TranslationFileUploadDialogActionDefinition
        successMessage: translation.uploadTranslationFile.executionSuccess
      cancel:
        class: info.magnolia.ui.dialog.action.CancelDialogActionDefinition
    ```

4.  Add translation download and upload actions in the `browser` subapp.

    **Example**: Adding `downloadTranslation` and `uploadTranslation` actions in the Contacts app in `/modules/contacts/apps/contacts/subApps/browser/actions`.

    ```yml
    apps:
      contacts:
        subApps:
          browser:
            actions:
              downloadTranslation:
                class: info.magnolia.ui.framework.action.OpenCreateDialogActionDefinition
                dialogName: contacts:downloadContactTranslation
                icon: icon-export
                availability:
                  rules:
                    IsNotDeletedRule:
                      implementationClass: info.magnolia.ui.framework.availability.IsNotDeletedRule
                label: Download for translation
              uploadTranslation:
                class: info.magnolia.translation.ui.action.OpenCreateTranslationFileUploadDialogActionDefinition
                dialogName: contacts:uploadContactTranslation
                icon: icon-import
                availability:
                  multiple: true
                  root: true
                  writePermissionRequired: true
                  rules:
                    IsNotDeletedRule:
                      implementationClass: info.magnolia.ui.framework.availability.IsNotDeletedRule
                label: Upload translated content
    ```

5.  Add the actions created in step 4 to `actionbar`.

    **Example**: Adding `downloadTranslation` and `uploadTranslation` actions to the `contact` section of `actionbar` in the Contacts app in `/modules/contacts/apps/contacts/subApps/browser/actionbar/sections/contact/groups/importExportActions`.

    ```yml
    browser:
      actionbar:
        sections:
          item:
            groups:
              importExportActions:
                items:
                  downloadTranslation:
                    name: downloadTranslation
                  uploadTranslation:
                    name: uploadTranslation
    ```
