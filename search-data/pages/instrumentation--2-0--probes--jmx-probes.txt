---
title: "JMX probes"
url: https://docs.magnolia-cms.com/instrumentation/2.0/probes/jmx-probes/
category: Modules
version: modules
breadcrumb: Instrumentation module > JMX probes
---

# JMX probes

The JMX probe can collect metrics from JMX beans inside and outside Magnolia. The JMX probes are configured in the instrumentation module.

You can configure multiple JMX probes to collect metrics from different JMX beans. A configured JMX probes can collect several metrics from a single MX bean.

A MX bean can provide many different properties and values. A JMX probe uses one or more JMX attribute metrics to collect metrics (`info.magnolia.services.instrumentation.probes.jmx.JMXAttributeMetric`) from a MX bean.

So, to summarize:

-   JMX probe: retrieves a MX bean with a JMX query, passes the MX bean to its JMX attribute metrics to collect metrics

-   JMX attribute metric: defines and collects a metric from a property of the MX bean


JMX attribute metrics can handle two types of values returned by MX bean properties: single values and maps.

Metrics collected by a JMX attribute metric have a double value. If the property of the MX bean is not convertible to a double value, you can set a default value in the JMX attribute collector to be used as the value of the metric.

If the MX bean property returns a map, the mapped JMX attribute metric () can select a value from the map and use it as the value of the metric.The mapped JMX attribute metric specifies a map key retrieve the metric value from the property map.

## [](#_jmxprobe)JMXProbe

The JMXProbe can collect one or more metrics from a JMX bean.

Note that the JMX attribute metrics actually define and collect metrics from the JMX bean, the JMX probe itself just retrieves the JMX bean.

### [](#_configuration_properties)Configuration properties

  PropertyDescriptionRequired

`class`

`info.magnolia.services.instrumentation.probes.jmx.JMXProbe`

`name`

The probe name.

> **Note:** The probe name will not be used as the metric name; the metric name(s) are defined by the JMX attribute metric(s).

`description`

A description of the probe.

`enabled`

Flag controlling if the probe is active and can provide measurements (true) or is disabled and not providing measurements (false).

**Default** = `true`

`objectName`

A JMX query for a JMX bean.

`metrics`

A list of one or more JMX attribute metrics, either JMX attribute metrics (`info.magnolia.services.instrumentation.probes.jmx.JMXAttributeMetric`) or mapped JMX attribute metrics (`info.magnolia.services.instrumentation.probes.jmx.MappedJMXAttributeMetric`).

> **Note:** The metrics provided by the JMX probe depend on the JMX attribute metrics defined for the probe.

## [](#_jmxattributemetric)JMXAttributeMetric

A JMXAttributeMetric defines a metric with value from a JMX bean property. The property value should be a single value.

> **Note:** If the JMX bean property is not convertible to a double value, a default value can be used as the value for the metric.

### [](#_configuration_properties_2)Configuration properties

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 60%;"> <col style="width: 10%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Property</th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Required</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>info.magnolia.services.instrumentation.probes.jmx.JMXAttributeMetric</code></p></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The JMX bean property name to be retrieved.</p></div><div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">The value of the bean property will be used as the metric value.</td></tr></tbody></table></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>metricName</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The name of the metric.</p></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>metricDescription</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>A description of the metric.</p></div></div></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>convertible</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>A flag indicating if the MX bean property value can be converted to a double and used as the metric value.</p></div><div class="ulist"><ul><li><p>If <code>true</code>, and the property value is not numeric, the property value is converted to a double and used as the metric value.</p></li><li><p>If <code>false</code>, the the property value is not numeric, the default value is used as the metric value.</p></li></ul></div><div class="paragraph"><p><strong>Default</strong> = <code>true</code></p></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaulValue</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The default value for the metric used when the bean property value is not numeric and convertible is set to false.</p></div><div class="paragraph"><p><strong>Default</strong> = <code>1.0</code></p></div></div></td><td class="tableblock halign-left valign-top"></td></tr></tbody></table></div>

### [](#_metrics)Metrics

| Metric | Description |
| --- | --- |
| `<metric-name>` | The configured metric name. |

## [](#_mappedjmxattributemetric)MappedJMXAttributeMetric

A MappedJMXAttributeMetric defines a metric with value from a JMX bean property that returns a map.

If the value retrieved from the map is not convertible to a double value, a default value can be used as the value for the metric.

### [](#_configuration_properties_3)Configuration properties

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 60%;"> <col style="width: 10%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Property</th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Required</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>info.magnolia.services.instrumentation.probes.jmx.MappedJMXAttributeMetric</code></p></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The JMX bean property name to be retrieved.</p></div><div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">The value of the bean property will be used as the metric value.</td></tr></tbody></table></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>metricName</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The name of the metric.</p></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>metricDescription</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>A description of the metric.</p></div></div></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>convertible</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>A flag indicating if the MX bean property value can be converted to a double and used as the metric value.</p></div><div class="ulist"><ul><li><p>If <code>true</code>, and the property value is not numeric, the property value is converted to a double and used as the metric value.</p></li><li><p>If <code>false</code>, the the property value is not numeric, the default value is used as the metric value.</p></li></ul></div><div class="paragraph"><p><strong>Default</strong> = <code>true</code></p></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaulValue</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The default value for the metric used when the bean property value is not numeric and convertible is set to false.</p></div><div class="paragraph"><p><strong>Default</strong> = <code>1.0</code></p></div></div></td><td class="tableblock halign-left valign-top"></td></tr></tbody></table></div>

### [](#_metrics_2)Metrics

| Metric | Description |
| --- | --- |
| `<metric-name>` | The configured metric name. |

### [](#_example)Example

![MappedJMXAttributeMetric sample config](../../_images/probes/MappedJMXAttributeMetric-sample-config.jpg)
