---
title: "Data source definition"
url: https://docs.magnolia-cms.com/product-docs/6.3/Developing/Content-Types/Content-type-definition/Content-type-Data-source-definition/
category: Magnolia 6.3
version: 6.3
breadcrumb: DX Core > Developing > Content type definition > Data source definition
---

# Data source definition

This page describes *data source definition* of a Magnolia Content type. A data source defines how content type items are persisted.

## [](#_properties)Properties

/content-type-examples/contentTypes/tourGuide.yaml

```yml
datasource:
  $type: jcrContentTypeDatasource
  workspace: tourguides
  namespaces:
    mt: https://www.magnolia-travel.com/jcr/1.0/mt
  autoCreate: true

model:
  nodeType: mt:tourGuide
  properties:
    - name: birthday
      type: Date
    - name: gender
    - name: shortBio
```

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 70%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Property</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>The type of the data source.</p></div><div class="paragraph"><p>If the value is <code>contentTypeDatasource</code>, the definition must implement <span class="inlineBean">info.magnolia.types.datasource.norsu.NorsuDataSourceDefinition</span>. If the value is <code>jcrContentTypeDatasource</code>, the definition must implement <span class="inlineBean">info.magnolia.types.datasource.jcr.JcrDataSourceDefinition</span>.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>workspace</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>The name of the workspace to store the content items.</p></div><div class="paragraph"><p>When the definition item is loaded, and if there is no workspace registered by the given name and the <a href="#_autocreate_property"><code>autoCreate</code> property</a> is set to <code>true</code>, the system will register the workspace.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespaces</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong> (only for JCR definitions)</p></div><div class="paragraph"><p>A list of JCR namespace names.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">&nbsp;&nbsp;&nbsp;&nbsp; <code>&lt;namespace‑name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>A JCR namespace name.</p></div><div class="paragraph"><p>When the definition item is loaded, and if the given JCR namespace hasn’t been registered yet, the system will register the namespace.</p></div><div class="admonitionblock important"><table><tbody><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content">The namespace name must comply with the rules for XML namespaces, see W3C recommendations about <a href="https://www.w3.org/TR/REC-xml-names/#NT-NCName" target="_blank" rel="noopener">Declaring Namespaces</a> and <a href="https://www.w3.org/TR/REC-xml/#sec-common-syn" target="_blank" rel="noopener">Common Syntactic Constructs</a>.</td></tr></tbody></table></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>autoCreate</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>false</code></em></p></div><div class="paragraph"><p>If set to <code>true</code>, the following modifications will take place in the entire content type definition.</p></div><div class="ulist"><ul><li><p>Workspace</p><div class="ulist"><ul><li><p>Register the content workspace defined by the <code>workspace</code> if it hasn’t been registered yet.<br></p></li></ul></div></li><li><p>Namespace (JCR-only content type definitions)</p><div class="ulist"><ul><li><p>Register the JCR namespaces defined by the <code>namespaces</code> property if they haven’t been registered yet.</p></li><li><p>Remap the namespace prefix to the new namespace URI if the namespace URI has been modified.</p></li><li><p>Re-register the namespace if the namespace prefix has been modified.</p></li></ul></div></li><li><p>Node type (JCR-only content type definitions)</p><div class="ulist"><ul><li><p>Register the JCR node types defined by the <a href="../Content-type-Model-definition/#_nodetype_property" class="xref page"><code>model.nodeType</code></a> and <a href="../Content-type-Model-definition/#_submodel_nodetype_property" class="xref page"><code>subModels[i</code></a><code>.nodeType</code>] properties if they haven’t been registered yet.</p></li><li><p>Register JCR node types defined by the <a href="#_nodeTypeDefinition_property"><code>nodeTypeDefinition</code> property</a> if they haven’t been registered yet.</p></li><li><p>Re-register JCR node types defined by the <a href="#_nodeTypeDefinition_property"><code>nodeTypeDefinition</code> property</a> if their definitions have been modified.<br></p></li></ul></div></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>nodeTypeDefinition</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong> (only for JCR definitions)</p></div><div class="paragraph"><p>The path to an CND file which defines a JCR node type definition. The file must be a <a href="../../../Resources/" class="xref page">Magnolia Resource</a>.</p></div><div class="paragraph"><p>When the definition item is loaded, and if the node type defined in the file is not yet registered, the system will register it. (See <a href="#_using_the_nodeTypeDefinition">Using the <code>nodeType</code> definition</a>.)</p></div></div></td></tr></tbody></table></div>

## [](#_jcr_name_spaces_node_types_and_node_type_definitions)JCR name spaces, node types and node type definitions

The `model`, explained in more detail on the [Content type Model definition](../Content-type-Model-definition/) page, defines which `nodeType` is used. The model itself does not define the nature of the node type. In [the example above](#_simple_example) the `nodetype` chosen is `mt:tourGuide`.

Let’s assume that the `mt:tourGuide` nodetype has not been registered yet. How to make sure that the model can utilize it?

There are two approaches.

-   All specifications in the YAML file.

-   Using the the `nodeTypeDefinition` property and a CND file for the node type definition.


### [](#_all_specifications_in_the_yaml_file)All specifications in the YAML file

[The example above](#_simple_example) defines all the JCR parameters in one YAML file. In most cases this is the recommended approach.

-   Namespace

-   Node type


If you intend to use a JCR namespace that hasn’t been defined yet, you can define the new namespace, for example `mt`, with the `namespaces` property.

In the above example, assuming that `mt:tourGuide` has not been registered yet, the system will automatically register a new node type with the given namespace `mt`, and the new node type inherits from the Magnolia `mgnl:content` node type.

### [](#_using_the_nodetypedefinition_and_cnd_node_type_definition_file)Using the `nodeTypeDefinition` and CND node type definition file

With the `nodeTypeDefinition` property you can define a path to a CND file to define a JCR node type definition.

## [](#_what_is_cnd_compact_namespace_and_node_type_definition)What is CND - Compact Namespace and Node Type Definition

> **Note:** Applies to JCR-oriented definitions only.

The *Compact Namespace and Node Type Definition* (CND) notation provides a compact standardized syntax for defining node types and making namespace declarations. The notation is intended both for documentation and for programmatically registering node types. See [http://jackrabbit.apache.org/jcr/node-type-notation.html](http://jackrabbit.apache.org/jcr/node-type-notation.html) for more details.

While XML-based node type definitions are still supported, we recommend using CND.

> **Tip:** Using a CND file allows you to define various JCR namespace and node type definitions. Node type definitions based on a CND file can be more complex than the automatically generated node types, which inherit from mgnl:content automatically.

Example of a CND-based node type definition

./content-type-examples/jcr-node-type-files/travellers-node-types.cnd

```cnd
<mt = 'http://www.magnolia.info/jcr/mt'>

[mt:traveller] > mgnl:content
 orderable

[mt:tourGuide] > mt:traveller
 orderable

[mt:happyCustomer] > mt:traveller
 orderable
```

Example of a content type definition referencing an CND-based node type definition:

/content-type-examples/contentTypes/happyCustomer.yaml

```yml
datasource:
  $type: jcrContentTypeDatasource
  workspace: happycustomers
  autoCreate: true
  nodeTypeDefinition: /content-type-examples/jcr-node-type-files/travellers-node-types.cnd

model:
  nodeType: mt:happyCustomer
  properties:
    - name: country
    - name: age
      type: Double
```

> **Caution:** The CND node type definition resource is loaded only if the CND resource is referenced in the Data source definition of a Content type definition.

### [](#_jcr_security)JCR security

Access to JCR workspaces is controlled by role-based access control lists (ACLs).

When the system detects and registers a new JCR workspace from a data source definition, it also automatically updates the `superuser` role by adding an ACL for the given workspace and granting read/write permissions for the `/` path.

In a production system, if you want to provide anonymous website visitors with (read) access to a specific JCR workspace, you must update the `anonymous` role by adding an ACL for the workspace.

For further information please read:

-   [Roles and access control lists - JCR ACL structure](../../../../Administration/IAM/Roles-and-access-control-lists/#_jcr_acl_structure)

-   [Default roles, groups and users](../../../../Administration/IAM/Roles-groups-and-users/)


## [](#_interfaces_and_classes)Interfaces and classes

The info.magnolia.ui.datasource.DatasourceDefinition interface is agnostic of any data source type.

### [](#_cds_content)CDS content

For *CDS* (ContentDataSources) content, Magnolia provides the info.magnolia.types.datasource.norsu.NorsuDataSourceDefinition interface and the info.magnolia.types.model.norsu.ConfiguredNorsuModelDefinition implementation class to specify the model to be mapped to CDS content.

### [](#_jcr_content)JCR content

For *JCR* content, Magnolia provides the info.magnolia.types.datasource.jcr.JcrDataSourceDefinition\[\] interface and the \[.inlineBean\]#info.magnolia.types.model.jcr.ConfiguredJcrModelDefinition implementation class to specify the model to be mapped to a JCR node.

Related topics

-   [Content Types module](#content-types:ROOT:index.adoc)

-   [Content type definition](../)

-   [Content type Model definition](../Content-type-Model-definition/)

-   [Defining JCR node types and workspaces](../../../Development-how-tos/How-to-define-JCR-node-types-and-workspaces/)
