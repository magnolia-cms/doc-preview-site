---
title: "Magnolia configuration probes"
url: https://docs.magnolia-cms.com/instrumentation/2.0/probes/magnolia-configuration-probes/
category: Modules
version: modules
breadcrumb: Instrumentation module > Magnolia configuration probes
---

# Magnolia configuration probes

Magnolia configuration probes collect information about Magnolia configuration properties. They can be used to discover the settings of import Magnolia configuration properties.

Magnolia configuration probes are configured in the instrumentation module.

There are four Magnolia configuration probes:

-   InstanceProbe

-   MagnoliaConfigurationProbe

-   RepositoryProbe

-   ServerConfigurationProbe


All Magnolia configuration probes are configured in the Instrumentation module. Probes should be added in `/modules/instrumentation/config/probes` and specify the class property (required) and enabled property (*optional*). Magnolia configuration probes defined in the instrumentation module are created or modified when the instrumentation module is restarted or changed.

There are common properties for configuration probes, including:

-   `class` - the full class name of the instrumentation probe to instantiate, for example, `info.magnolia.services.instrumentation.probes.environment`.InstanceProbe.

-   `enabled` - a flag, either true or false, true indicating the probe is active and collecting metrics and false if not.


 PropertyDefaultDescription

`class`

The fully qualified class name of the probe to instantiate.

> **Important:** The class must implement the info.magnolia.services.instrumentation.probes.LaunchableProbe interface.

`enabled`

`true`

Flag controlling if the probe is active and can provide measurements (`true`) or is disabled and not providing measurements (`false`).

## [](#_instanceprobe)InstanceProbe

The InstanceProbe determines if the Magnolia instance is a public or author instance.

The value of the metric will be:

-   `0` if a public instance

-   `1` if an author instance.


### [](#_configuration_properties)Configuration properties

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.environment.InstanceProbe`. |     |
| `name` | The metric name used by Prometheus. Taken as from the node name when configured. |     |
| `description` | A description of the metric. |     |

## [](#_magnoliaconfigurationprobe)MagnoliaConfigurationProbe

The MagnoliaConfigurationProbe collects Magnolia configuration properties and stores them as labels of the metric.

The value of the metric always will be `1`.

### [](#_configuration_properties_2)Configuration properties

  PropertyDescriptionRequired

`class`

Should be `info.magnolia.services.instrumentation.probes.environment.MagnoliaConfigurationProbe`.

`name`

The metric name used by Prometheus. Taken as from the node name when configured.

`description`

A description of the metric.

`properties`

An array of Magnolia properties names, for example `magnolia.repositories.home`.

The Magnolia property name will be used as the label name, however, the property name may be modified to ensure that the label name is valid. Periods in Magnolia property names will be replaced with "\_".

For example, the Magnolia property name `magnolia.repositories.home` will result in a label magnolia\_repositories\_home.

> **Note:** The value of the Magnolia property will be stored as the label value or "n/a" if the property is not defined. The value of the Magnolia property will not modified.

## [](#_repositoryprobe)RepositoryProbe

The RepositoryProbe collects repository configuration properties and stores them as labels of the metric.

The value of the metric always will be `1`.

### [](#_configuration_properties_3)Configuration properties

  PropertyDescriptionRequired

`class`

Should be `info.magnolia.services.instrumentation.probes.environment.RepositoryProbe`.

`name`

The metric name used by Prometheus. Taken as from the node name when configured.

`description`

A description of the metric.

`properties`

An array of repository properties names, for example `jcr.repository.name`.

The repository property name will be used as the label name, however, the property name may be modified to ensure that the label name is valid. Periods in repository property names will be replaced with "\_".

For example, the repository property name `jcr.repository.name` will result in a label jcr\_repository\_name.

> **Note:** The value of the repository property will be stored as the label value or "n/a" if the property is not defined. The value of the repository property will not modified.

## [](#_serverconfigurationprobe)ServerConfigurationProbe

The ServerConfigurationProbe collects basic configuration settings of a Magnolia instance.

The following configuration will be collected:

-   the default page extension

-   the default base URL

-   if the instance is a public or author instance


> **Note:** The value of the metric always will be 1.

### [](#_configuration_properties_4)Configuration properties

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.environment.ServerConfigurationProbe`. |     |
| `name` | The metric name used by Prometheus. Taken as from the node name when configured. |     |
| `description` | A description of the metric. |     |

### [](#_labels)Labels

| Label | Metric | Description |
| --- | --- | --- |
| `defaultExtension` | `<metric-name>` | The default page extension as configured by the `defaultExtension` property of `/server`. |
| `defaultBaseUrl` | `<metric-name>` | The default base URL as configured by the `defaultBaseUrl` property of `/server`. |
| `admin` | `<metric-name>` | If the Magnolia is an author instance (`true`) or a public instance (`false`). |
