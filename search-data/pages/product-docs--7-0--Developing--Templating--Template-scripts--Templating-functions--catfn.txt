---
title: "catfn"
url: https://docs.magnolia-cms.com/product-docs/7.0/Developing/Templating/Template-scripts/Templating-functions/catfn/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Developing > Templating > Template scripts > Templating functions > catfn
---

# catfn

[FreeMarker development only](../../../Renderers/#_renderers_provided_by_magnolia)

`catfn` templating functions get content by category. For example, you can retrieve all pages tagged with `travel`. Categories are typically rendered as links on the website. They help visitors discover related content.

## [](#_access_categorized_content)Access categorized content

### [](#_categories_of_node)Categories of node

Returns all category nodes linked to a given node.

#### [](#_method_signature)Method signature

`List<[Node](../Templating-function-arguments-and-return-types/#_javax_jcr_node)> getCategories([Node](../Templating-function-arguments-and-return-types/#_javax_jcr_node) node)`

`List<[Node](../Templating-function-arguments-and-return-types/#_javax_jcr_node)> getCategories([Node](../Templating-function-arguments-and-return-types/#_javax_jcr_node) node, String propertyName)`

#### [](#_arguments)Arguments

| Argument | Description |
| --- | --- |
| `node` | **required**<br><br>Node whose categories you want to get. |
| `propertyName` | **optional**, *default is `categories`*<br><br>Categories with a specified property name. |

#### [](#_returns)Returns

`List<Node>`

A list of category node items.

#### [](#_usage)Usage

`catfn.getCategories(node, propertyName)`

This page belongs to the categories:
\[#assign allCategories = catfn.getCategories(cmsfn.asJCRNode(content))\]
\[#list cmsfn.asContentMapList(allCategories) as cat \]
  ${cat.name},
\[/#list\]

### [](#_related_categories)Related categories

Gets all pages with categories related to a given category. Related categories are referenced in the [Categories app](../../../../../Apps/List-of-apps/Categories-app/).

#### [](#_method_signature_2)Method signature

`Collection<[Node](../Templating-function-arguments-and-return-types/#_info_magnolia_jcr_util_contentmap)> getRelatedCategories(String name)`

#### [](#_arguments_2)Arguments

| Argument | Description |
| --- | --- |
| `name` | **required**<br><br>Category name. |

#### [](#_returns_2)Returns

`Collection<Node>`

A collection of node items marked with related categories.

#### [](#_usage_2)Usage

`catfn.getRelatedCategories(name)`

\[#assign myCategory = "biochemistry"\]
\[#assign relatedCategories = catfn.getRelatedCategories(myCategory)!\]
\[#if relatedCategories?? && relatedCategories?size>0\]
  ${myCategory} has the following related categories:<br/>
  \[#list relatedCategories as cat \]
     ${cat.name}
     \[#if cat\_has\_next\], \[/#if\]
   \[/#list\]
\[#else\]
  ${myCategory} has no related categories
\[/#if\]

### [](#_content_for_given_category)Content for given category

Gets a collection of content node items for a given category.

This function returns content only from the `website` workspace. It does not work with other workspaces. If you need to get categorized content from another workspace, write a custom [model](../../../Rendering-content/Model/).

> **Tip:** See RelatedToursModel.java for an example.

#### [](#_method_signature_3)Method signature

[Collection<Node>](../Templating-function-arguments-and-return-types/#_node_and_contentmap_collections) getContentByCategory ([Node](../Templating-function-arguments-and-return-types/#_javax_jcr_node) node, String name)\`

#### [](#_arguments_3)Arguments

| Argument | Description |
| --- | --- |
| `node` | **required**<br><br>Root node under which you want to look for content (for example, the root page of a site). |
| `name` | **required**<br><br>Category name. |

#### [](#_returns_3)Returns

`Collection<Node>`

A collection of node items assigned the given category.

#### [](#_usage_3)Usage

`catfn.getContentByCategory(node, name)`

Aggregating content for a certain category which is applied to page nodes (start node is root node)<br/>
The following pages are tagged with category "sports":
\[#assign rootPage = cmsfn.asJCRNode(cmsfn.root(content, "mgnl:page"))!\]
\[#assign sportsContent = catfn.getContentByCategory(rootPage, "sports")\]
\[#if sportsContent??\]
    \[#list sportsContent as catNode \]
        \[#if catNode.isNodeType("mgnl:page")\]
            \[#assign link=cmsfn.link(catNode)\]
            \[#assign title=cmsfn.asContentMap(catNode).title!catNode.getName()\]
            <a href="${link}">${title}</a><br/>
        \[/#if\]
    \[/#list\]
\[/#if\]

### [](#_nodes_by_category_identifier)Nodes by category identifier

Performs a JCR query call in the `website` workspace to get all nodes with a given category identifier under a specified page path. The method does not filter for a certain node type. If required, you have to filter for node types when iterating over the list.

#### [](#_method_signature_4)Method signature

`Collection<[Node](../Templating-function-arguments-and-return-types/#_javax_jcr_node)> getContentByCategoryIdentifier(String sitePath, String identifier)`

#### [](#_arguments_4)Arguments

| Argument | Description |
| --- | --- |
| `sitePath` | **required**<br><br>Page path. |
| `identifier` | **required**<br><br>Category identifier. |

#### [](#_returns_4)Returns

`Collection<Node>`

A collection of node items for the given category identifier and path.

#### [](#_usage_4)Usage

`catfn.getContentByCategoryIdentifier(sitePath, identifier)`

\[#assign frisbeeCatUuid = "32708be2-6c62-4cca-8eb5-d95e9261011f"\]
\[#assign categorizedNodes = catfn.getContentByCategoryIdentifier("/", frisbeeCatUuid)\]
\[#if categorizedNodes?? && categorizedNodes?size>0\]
Our website contains some pages about "frisbee":<br/>
\[#list categorizedNodes as node \]
    \[#if node.isNodeType("mgnl:page")\]
        \[#assign contentMap = cmsfn.asContentMap(node)\]
        ${contentMap.title!node.getName()}<br/>
    \[/#if\]
\[/#list\]
\[#else\]
No pages found related to the category with the uuid "${frisbeeCatUuid}"
\[/#if\]

### [](#_category_workspace)Category workspace

Gets the name of the category workspace. When using a search method where you have to provide the workspace name, use this function instead of a hard-coded literal value.

#### [](#_method_signature_5)Method signature

`String getCategorizationRepository()`

#### [](#_returns_5)Returns

`String`

#### [](#_usage_5)Usage

`catfn.getCategorizationRepository()`

\[#assign myCatNode = cmsfn.nodeByPath("/all/sports/frisbee", catfn.getCategorizationRepository())!\]

### [](#_category_node_by_name)Category node by name

Gets the node representing the category defined by `categoryName`.

#### [](#_method_signature_6)Method signature

`[Node](../Templating-function-arguments-and-return-types/#_info_magnolia_jcr_util_contentmap) getCategoryNodeByName(final String categoryName)`

#### [](#_arguments_5)Arguments

| Argument | Description |
| --- | --- |
| `categoryName` | **required**<br><br>Category name. |

#### [](#_returns_6)Returns

`Node`

#### [](#_usage_6)Usage

`catfn.getCategoryNodeByName(categoryName)`

\[#assign frisbeeNode = catfn.getCategoryNodeByName("frisbee")!\]
\[#if frisbeeNode??\]The node was created by ${cmsfn.metaData(cmsfn.asContentMap(frisbeeNode), "mgnl:createdBy")!"Mr. X"}\[/#if\]

## [](#_get_page_based_on_template_type_and_subtype)Get page based on template `type` and `subtype`

Gets a page based on the defined `type` and `subtype` properties in the [page definition](../../../Template-definition/Page-definition/).

You can provide any values for `type` and `subtype`. Use this function, for example, to find a custom category page that you have defined yourself.

You can limit the search to a specific site or branch by passing the root page node in the `siteRoot` argument.

### [](#_method_signature_7)Method signature

`[Node](../Templating-function-arguments-and-return-types/#_info_magnolia_jcr_util_contentmap) getContentByTemplateCategorySubCategory([Node](../Templating-function-arguments-and-return-types/#_javax_jcr_node) siteRoot, String type, String subtype)`

### [](#_arguments_6)Arguments

| Argument | Description |
| --- | --- |
| `type` | **required**<br><br>Value of the `type` property in the [page definition](../../../Template-definition/Page-definition/). |
| `subtype` | **required**<br><br>Value of the `subtype` property in the [page definition](../../../Template-definition/Page-definition/). |
| `siteRoot` | **required**<br><br>Root node under which you want to search for the page. |

### [](#_returns_7)Returns

`Node`

A node item matching the given `type` and `subtype`.

### [](#_usage_7)Usage

`catfn.getContentByTemplateCategorySubCategory(siteRoot, type, subtype)`

\[#assign rootPage = cmsfn.root(content, "mgnl:page")! \]
\[#assign siteRoot = cmsfn.asJCRNode(rootPage)! \]

${catfn.getContentByTemplateCategorySubCategory(siteRoot, "feature", "tutorial")!}

Related topics

-   [Templating functions](../)

-   [Templating function arguments and return types](../Templating-function-arguments-and-return-types/)

-   info.magnolia.module.categorization.functions.CategorizationTemplatingFunctions
