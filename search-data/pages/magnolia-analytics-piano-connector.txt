---
title: "Piano Analytics Connector module"
url: https://docs.magnolia-cms.com/magnolia-analytics-piano-connector/
category: Modules
version: modules
breadcrumb: Piano Analytics Connector module
---

# Piano Analytics Connector module

[Analytics and optimization](../product-docs/RNs-6-4-3/use-cases/analytics-and-optimization/) [Incubator](https://gitlab.magnolia-platform.com/ps/incubator/magnolia-analytics-piano-connector) Version [2.0.2](https://magnolia-cms.atlassian.net/browse/PIANALYTIC) [Magnolia 6.3](../product-docs/6.3/) compatible\[[1](#_footnotedef_1 "View footnote.")\]

The **Piano Analytics Connector module** lets you connect to the Piano Analytics data supplier.

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../product-docs/RNs-6-4-3/Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.analytics</groupId>
  <artifactId>magnolia-analytics-piano-connector</artifactId>
  <version>2.0.2</version>
</dependency>
```

## [](#_usage)Usage

This sections shows you how to configure and use the module.

Please refer to this Analytics connector pack to know the use and configuration of Analytics app.

### [](#_connecting_to_a_data_supplier)Connecting to a data supplier

You must have an appropriate account and credentials to connect to Piano Analytics. Data suppliers are defined under `/piano-analytics/dataSuppliers/<dataSupplierRegistryFile.yaml>`.

`/piano-analytics/dataSuppliers/pianoDataSupplier.yaml`

```yaml
class: info.magnolia.analytics.piano.datasource.PianoDataSupplier
credentials:
  parameters:
    serverUrl: "https://api.atinternet.io/v3/data/getData"
    accessKey: YOUR_ACCESS_KEY
    secretKey: YOUR_SECRET_KEY
    organisation: YOUR_ORGANIZATION
    siteId: YOUR_SITE_ID
parameters:
  site: YOUR_SITE_ID
  dimension: src
  metric: m_unique_visitors
  max-results: 50
  page-num: 1
  sort: m_unique_visitors
###### get reporting data with relative periods ######
  periodType: R
  granularity: M #Month
  startOffset: -1
  endOffset: -1
###### get reporting data with absolute period (Day format): from start date to end date ######
#  periodType: D #day
#  periodStartDate: "YYYY-MM-DD"
#  periodEndDate: "YYYY-MM-DD"
```

### [](#_reporting_period)Reporting Period

-   granularity accept one of these values: Y(ear), Q(uarter), M(onth), W(eek), D(ay), H(our), MN(minute)

-   startOffset and endOffset are allow number only, must be from zero to negative number. startOffset must be equal to or lower than endOffset


See [How to input granularity in Piano Analytics dashboard filtering](https://developers.atinternet-solutions.com/data-api-en/reporting-api-v3/parameters-en/period/)

### [](#_metrics_and_dimensions_metadata)Metrics and Dimensions metadata

These metadata files are stored under: `/piano-analytics/metadata/<metricsOrDimensionsFile.yaml>`

Those metadata can not be decorated, the correct path to put these files is:

your-light-module/
├── piano-analytics
│   └── metadata
│       └── your-metric-file.csv
│       └── your-dimension-file.csv

The metadata file is named using the siteId and organisation name with hyphens. For each siteId, we will need 2 files, one for metrics and one for dimensions.

-   `<siteId>-datamodel-metrics-<organisation>.csv`: this file use comma delimiter

-   `<siteId>-datamodel-dimensions-<organisation>.csv`: this file use semicolon delimiter


### [](#_decoration)Decoration

You can add one or more data suppliers base on your needs via decoration.

Expected structure

your-light-module/ **(1)**
├── dataSuppliers/ **(2)**
│   └── pianoDataSupplier1.yaml **(3)**
│   └── pianoDataSupplier2.yaml **(4)**

|     |     |
| --- | --- |
| **1** | From within your own light module. |
| **2** | The decoration registry. |
| **3** | This tells Magnolia to add pianoDataSupplier1 for use. |
| **4** | This tells Magnolia to add pianoDataSupplier2 for use. |

### [](#_dashboard_filters)Dashboard filters

When set, each filter is applied to all the charts in the dashboard simultaneously. We support filter Piano Analytics data by these filter parameters

For example, add these configuration into your dashboard file under the Resource Files app: `/analytics-ui/dashboards/<your-dashboard>.yaml`

```yaml
filterFields:
  - name: startDateFilter
    $type: dateField
    label: piano-analytics.startDate
  - name: endDateFilter
    $type: dateField
    label: piano-analytics.endDate
  - name: pageNum # the page number to view the results based on pagination
    $type: textField
    label: piano-analytics.pageNum
  - name: maxResults # max results to show per page
    $type: textField
    label: piano-analytics.maxResults
  - name: dimensionSortOption # Sorting by dimension
    $type: checkBoxField
    label: piano-analytics.dimensionSortOption
  - name: dimensionDesOrderOption # Dimension order by DESC if checked
    $type: checkBoxField
    label: piano-analytics.dimensionDesOrderOption
  - name: metricSortOption # Sorting by metric
    $type: checkBoxField
    label: piano-analytics.metricSortOption
  - name: metricDesOrderOption # Metric order by DESC if checked
    $type: checkBoxField
    label: piano-analytics.metricDesOrderOption
```

This sorting enhancement will enable customers to:

-   Sort by dimension or metric.

-   Order dimensions and metrics separately in ASC (by deselecting the checkbox) or DESC.

-   Sort by both dimension and metric simultaneously, with dimension taking priority.


| Version | Notes |
| --- | --- |
| `2.0.2` | [Changelog](https://magnolia-cms.atlassian.net/issues/?jql=project%20%3D%20PIANALYTIC%20AND%20fixVersion%20%3D%202.0.2) |
| `2.0.1` | [Changelog](https://magnolia-cms.atlassian.net/issues/?jql=project%20%3D%20PIANALYTIC%20AND%20fixVersion%20%3D%202.0.1) |
| `2.0.0` | Release for Magnolia 6.3 compatibility. [Changelog](https://magnolia-cms.atlassian.net/issues/?jql=project%20%3D%20PIANALYTIC%20AND%20fixVersion%20%3D%202.0.0) |

* * *

[1](#_footnoteref_1). This module was last tested on Magnolia 6.3.5. If you are using a previous Magnolia release or version, please take this into consideration.
