---
title: "Imaging module"
url: https://docs.magnolia-cms.com/product-docs/6.3/Modules/List-of-modules/Imaging-module/
category: Magnolia 6.3
version: 6.3
breadcrumb: DX Core > Modules > Imaging module
---

# Imaging module

| Edition | CE |
| --- | --- |
| License | [MLA](https://www.magnolia-cms.com/mla.html) , [GPL](http://www.gnu.org/licenses/gpl-3.0.html) |
| Issues | [MGNLIMG](https://magnolia-cms.atlassian.net/browse/MGNLIMG) |
| Maven site | [Imaging](https://nexus.magnolia-cms.com/#browse/browse:public:info%2Fmagnolia%2Fimaging%2Fmagnolia-imaging%2F{magnolia-imaging-63}) |
| Latest | {magnolia-imaging-63} |

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../../../RNs-6-4-3/Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.imaging</groupId>
  <artifactId>magnolia-imaging</artifactId>
  <version>{magnolia-imaging-63}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

> **Warning:** Note the changes in groupId and artifactId since the 3.4 release.

### [](#_compatibility_module)Compatibility module

With Magnolia 5.6 weâ€™ve begun removing the old Content API from our modules. If you have custom code relying on classes from the old imaging module then you must do one of two things:

-   Update your code for the [new version of the imaging module](https://magnolia-cms.atlassian.net/browse/MGNLIMG-200).

-   Or you can use the `magnolia-imaging-compatibility` module together with the `magnolia-core-compatibility` module.


Add the following snippet to your POM file:

```xml
<dependency>
  <groupId>info.magnolia.imaging</groupId>
  <artifactId>magnolia-imaging-compatibility</artifactId>
  <version>{magnolia-imaging-63}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

## [](#_image_request_processing)Image request processing

The diagram shows the elements of the Imaging module and how they interrelate (credit: Richard Unger).

-   info.magnolia.imaging.ImagingServlet is responsible for the actual generation of the images.

-   The info.magnolia.imaging.ImageGenerator interface is the entry point for generating images.

-   info.magnolia.imaging.operations.ImageOperationChain implements `ImageGenerator` and executes an [operation chain](#_image_operation_chains).

-   Various implementations of the info.magnolia.imaging.ParameterProviderFactory interface are responsible for instantiating [parameter providers](#_parameter_provider_factory) for a given environment.

-   Implementations of the info.magnolia.imaging.ImageStreamer interface are responsible for pushing the generated image, with the given generator and parameters, to an output stream.


![Image request processing](../../../_images/image-request-processing.png)

| Node name | Value |
| --- | --- |
| â¸¬ ImagingServlet |  |
| â¬© enabled | true |
| â¬© servletName | ImagingServlet |
| â¬© class | info.magnolia.cms.filters.ServletDispatchingFilter |
| â¬© servletClass | info.magnolia.imaging.ImagingServlet |
| â¬© comment | Imaging Servlet |
| â¸¬ mappings |  |
| â¸¬ -.imaging-- |  |
| â¬© pattern | /.imaging/* |
| â¸¬ parameters |  |

| Node name | Value |
| --- | --- |
| ðŸ“ generators |  |
| â¸¬ default |  |
| â¬© class | info.magnolia.imaging.DefaultImageGenerator |
| â¸¬ mte |  |
| â¬© class | info.magnolia.templating.imaging.ThemeAwareImageGenerator |
| â¸¬ parameterProviderFactory |  |
| â¬© class | info.magnolia.templating.imaging.parameters.ThemeAwareParameterProviderFactory |
| â¸¬ outputFormat |  |
| â¬© quality | 80 |
| â¸¬ large |  |
| â¬© class | info.magnolia.imaging.operations.ImageOperationChain |
| â¸¬ outputFormat |  |
| â¬© formatName | jpg |
| â¬© quality | 80 |
| â¸¬ operations |  |
| â¸¬ load |  |
| â¬© class | info.magnolia.imaging.operations.load.FromBinaryNode |
| â¸¬ resize |  |
| â¬© maxWidth | 500 |
| â¬© class | info.magnolia.imaging.operations.cropresize.BoundedResize |
| â¬© maxHeight | 500 |
| â¸¬ parameterProviderFactory |  |
| â¬© class | info.magnolia.imaging.parameters.BinaryNodeParameterProviderFactory |
| â¸¬ portrait |  |
| â¬© class | info.magnolia.imaging.operations.ImageOperationChain |
| â¸¬ outputFormat |  |
| â¬© formatName | jpg |
| â¬© quality | 80 |
| â¸¬ operations |  |
| â¸¬ load |  |
| â¬© class | info.magnolia.imaging.operations.load.FromBinaryNode |
| â¸¬ resize |  |
| â¬© maxWidth | 240 |
| â¬© class | info.magnolia.imaging.operations.cropresize.BoundedResize |
| â¬© maxHeight | 160 |
| â¸¬ parameterProviderFactory |  |
| â¬© class | info.magnolia.dam.imaging.parameters.AssetAndBinaryNodeIdentifierParameterProviderFactory |
| â¸¬ thumbnail |  |
| â¬© class | info.magnolia.imaging.operations.ImageOperationChain |
| â¸¬ outputFormat |  |
| â¬© formatName | jpg |
| â¬© quality | 90 |
| â¸¬ operations |  |
| â¸¬ load |  |
| â¬© class | info.magnolia.imaging.operations.load.FromBinaryNode |
| â¸¬ resize |  |
| â¬© maxWidth | 230 |
| â¬© class | info.magnolia.imaging.operations.cropresize.BoundedResize |
| â¬© maxHeight | 230 |
| â¸¬ parameterProviderFactory |  |
| â¬© class | info.magnolia.dam.imaging.parameters.AssetAndBinaryNodeIdentifierParameterProviderFactory |

| Property | Description |
| --- | --- |
| `max-memory` | **optional** , *default is -1* Defines the maximum memory (in bytes) allocated for image processing across all requests. Use `-1` for no limit. If the image to be loaded exceeds the configured `max-memory` , the request is denied with a `413 Content Too Large` HTTP response. This rejection is due to the `max-memory` allocated rather than contention with other concurrent processes. Retrying later doesnâ€™t resolve the issue unless this property is changed or the image size is reduced. |
| `max-requests` | **optional** *default is -1* Specifies the maximum number of concurrent image generation requests. Use `-1` for no limit. Since image processing is primarily CPU-bound with minimal I/O, this value should generally not exceed the number of available CPU cores. |
| `max-wait` | **optional** *default is -1* Sets the maximum time (in milliseconds) a request waits for resources (memory and execution permit). Use `-1` for an indefinite wait. If resources arenâ€™t granted within the `max-wait` time configured, the request is canceled, and a `503 Service Unavailable` HTTP response is returned. |

## [](#_caching)Caching

Magnolia caches image resources to improve performance. Any dynamic images generated by the Imaging module are cached at two levels: in the `imaging` workspace and in the actual cache like any other page or document. This means that once the system generates an image, you keep getting the same cached image on subsequent requests.

During testing, you can disable caching of generated images completely. In `/modules/imaging/config`, create a new property named `storeGeneratedImages` and set the value to `false`.

![Disable caching of generated images](../../../_images/ADVT-imaging-mod-cache.png)

> **Warning:** There is still a small delay between configuration changes and a new image being available. Magnoliaâ€™s observation mechanism intentionally waits a couple of seconds before reading a changed configuration.

| `magnolia-imaging-support` | info.magnolia.imaging.ImagingSupport | The support interface for imaging. |
| --- | --- | --- |
| `magnolia-dam-imaging` | info.magnolia.dam.imaging.ImagingBasedAssetRenderer | Asset renderer that uses `ImagingSupport` to generate [renditions](../../../Developing/API/Java-Server-APIs/DAM-API/) . |
| `magnolia-templating-essentials-imaging` | info.magnolia.templating.imaging.support.ThemeDelegatingImagingSupport | ImagingSupport that delegates to a [Theme](../../../Developing/Templating/Theme/) . |

## [](#_image_variations_in_a_theme)Image variations in a theme

A *variation* is a theme-specific configuration that defines the size of the target image and tells the imaging engine whether cropping is allowed. Variations are configured in a theme which allows you to configure image look and feel in the same place as CSS.

See [Image variations](../../../Developing/Templating/Theme/) and [Displaying resized images](../../../Developing/Templating/Template-scripts/How-to-work-with-images/How-to-work-with-images-using-damfn/) for more.

## [](#_issues)Issues

### [](#_renditions_of_animated_gif_images)Renditions of animated GIF images

In renditions of animated GIF images, only the first frame is resized and kept, turning the originally animated GIF image into a static GIF.

For the development status of this feature, see [MGNLIMG-389 Allow GIFs to be used with Renditions](https://magnolia-cms.atlassian.net/browse/MGNLIMG-389).

Related topics

-   [How to work with images using `imgfn`](../../../Developing/Templating/Template-scripts/How-to-work-with-images/How-to-work-with-images-using-imgfn/)

-   [How to work with images using `damfn`](../../../Developing/Templating/Template-scripts/How-to-work-with-images/How-to-work-with-images-using-damfn/)

-   [`imgfn` templating functions](../../../Developing/Templating/Template-scripts/Templating-functions/imgfn/)
