---
title: "Preparing for DX Cloud"
url: https://docs.magnolia-cms.com/paas/prepare/
category: DX Cloud
version: cloud
breadcrumb: DX Cloud > Introduction > Preparing for DX Cloud
---

# Preparing for DX Cloud

## [](#_introduction)Introduction

Moving to Magnolia’s DX Cloud is an exciting step, but there are key aspects to prepare before onboarding. This guide outlines what you need to have ready, how the onboarding process works, and what to expect at different stages of your DX Cloud journey.

## [](#_before_onboarding)Before onboarding

Before the onboarding meeting, Magnolia’s team ensures that:

-   Your subscription is set up in the Admin Cockpit.

-   You have received your **shortname** (your unique subscription name).

-   The Cockpit URL is functional.

-   Magnolia’s author and public instances are operational.


## [](#_understanding_the_dx_cloud_architecture)Understanding the DX Cloud architecture

![paas architecture premium](../_images/deployment/paas-architecture-premium.jpg)

### [](#_cluster_setup)Cluster setup

-   Initially, you receive a **development (non-prod) cluster**.

-   The **production (prod) cluster** is only provisioned when the project nears maturity.

-   Clusters run on AWS, Azure, Google Cloud Platform, or AliCloud.

-   Magnolia’s SRE team provisions the clusters with the chosen cloud provider.


### [](#_customer_access)Customer access

-   You have access to the customer Cockpit.

-   Customers **do not** have access to Rancher (Kubernetes management tool).

-   We provide an architecture diagram detailing components and configurations to ensure you have a high level understanding of how everything works together.

    See [DX Cloud Architecture](../architecture/) for more on this topic.


## [](#_what_magnolia_provides)What Magnolia provides

### [](#_standard_stack)Standard stack

-   **GitLab** (default for version control and CI/CD pipelines)

    See [GitLab CI/CD](../gitlab/) for more on this topic.

-   Kubernetes orchestrator

    See [Kubernetes fundamentals](../kubernetes/) for more on this topic.

-   **Docker Registry** (default is GitLab-based, but you can bring your own)

-   **Custom GitLab URL**

    -   If using your own registry, you must provide details to Magnolia.

        See the [GitLab & CI/CD configuration](#_gitlab_cicd_configuration) section below for more details.



## [](#_gitlab_cicd_configuration)GitLab & CI/CD configuration

If you choose our [DX Cloud standard](../architecture/#_standard), you receive a dedicated GitLab URL. (e.g., `gitlab.customer.magnolia-platform.com`)

You can opt to use your own GitLab, Azure DevOps, GitHub, or BitBucket pipelines. You are always responsible for maintaining the pipeline. However, in this case, you are also responsible for setting up the pipeline.

### [](#_repository_structure)Repository Structure

Using our stack

If you decide to use our DX Cloud repository setup, a **base-dev** repository is provided as a starting point. You should also create a new environment called **dev** where you use the **base-dev** repository as the template.

Using your own stack

If you want to use your own repository setup, we demonstrate during onboarding how everything works using our templates. However, you must then replicate that in your own GitLab CI/CD setup.

> **Note:** You can rename projects but must retain the shortname assigned at the contract stage.You should called your production repository, prod and your development repository dev (instead of base-<environment>.)Regional Magnolia repositories (regional-<region>) exist but are not customer-accessible.

### [](#_deployment_pipeline)Deployment Pipeline

The GitLab CI/CD pipeline includes:

1.  **Build Stage**: Triggers at every commit to build Magnolia.

2.  **Push Stage**: Pushes the Docker image to the registry.

3.  **Deploy Stage**: Uses Helm charts to deploy to the environment.

    -   Deployment to the UAT, dev, and prod [environments](../environments/) is **manual** (controlled via GitLab UI).

    -   The `values.yml` file defines deployment variables and must match the registry secret (`gitlab` by default).



| Variable Name | Value | Description |
| --- | --- | --- |
| `MAVEN_USER` | Your user token **name code** | The username portion of your Nexus SSO token |
| `MAVEN_USER_PWD` | Your user token **pass code** | The password portion of your Nexus SSO token |

| Variable | Description |
| --- | --- |
| `KUBE_CONFIG` | Kubernetes configuration file for cluster access. Provided by Magnolia’s SRE team upon request. |
| `MAVEN_USER` | Your Nexus SSO user token name code. Required for downloading Magnolia modules during the build stage. See [Maven and Nexus authentication](#_maven_and_nexus_authentication) for how to obtain this. |
| `MAVEN_USER_PWD` | Your Nexus SSO user token pass code. Required for downloading Magnolia modules during the build stage. See [Maven and Nexus authentication](#_maven_and_nexus_authentication) for how to obtain this. |

| Cause | Solution |
| --- | --- |
| Using legacy LDAP credentials | Migrate to SSO user tokens. See [Maven and Nexus authentication](#_maven_and_nexus_authentication) . |
| `MAVEN_USER` or `MAVEN_USER_PWD` variables not set | Configure these variables in GitLab CI/CD settings. See [Update pipeline credentials](#_update_pipeline_credentials) . |
| Variables set at project level instead of group level | Move variables to group level to ensure they apply to all repositories. |
| Tokens expired after password change | Regenerate your Nexus user tokens and update the GitLab variables. See [Regenerate Nexus SSO user tokens](#_regenerate_nexus_sso_user_tokens) . |
| Using wrong Nexus regional URL | Verify your `pom.xml` references the correct regional Nexus URL: • EU: `https://nexus.magnolia-cms.com` • US: `https://nexus.us.magnolia-cms.com` • APAC: `https://nexus.ap.magnolia-cms.com` |

* * *

[1](#_footnoteref_1). Maven is a build and dependency management tool that defines how applications are built and which libraries they depend on. For DX Cloud, Maven uses authentication to securely access artifact repositories (such as Nexus) to download dependencies and publish build outputs.
