---
title: "Item providers"
url: https://docs.magnolia-cms.com/product-docs/7.0/Developing/Templating/Dialog-definition/Field-definition/Item-providers/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Developing > Templating > Field definition > Item providers
---

# Item providers

Item providers are a means for accessing items from data sources. On this page, we provide more details about their characteristics and main advantages, and we show a few examples of using them.

## [](#_overview)Overview

The concept of Item providers is an abstraction aiming to give developers a flexible way to specify which item a form field (simple or complex) should bind to and how an item should be accessed.

Item providers allow you to bind form views to complex nested data structures and to fine tune such bindings. For example, if a form binds a contact address as a separate sub-form (a composite field in the Magnolia 5 UI context), a Magnolia user might want to:

-   Use a contact’s child node to store the data, in which case an item provider that resolves a sub-node can be used.

-   Store the properties directly on the contact node and keep it flat. This would represent a self-reference item provider use case.


Item providers get reference items as context. Applied to the contact address example, an address editor will get the root contact node so that it would be trivial to resolve the corresponding sub-node, if needed.

Typically, item providers are executed only:

-   When fetching data from the back-end (to populate a form).

-   When some updated data needs to be flushed from the Vaadin components back to the back-end (on a form commit).


Last but not least, item providers yield items wrapped into the [Optional](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html) container, so it is fine not to return anything from the item provider implementation. In this case, however, the form data may not be populated or saved back to the back-end.

## [](#_main_advantages)Main advantages

Item providers represent a much simpler solution than the field transformers in Magnolia 5 UI.

-   An item provider only needs to know how to access the data. In contrast, the transformers in the 5 UI framework were responsible for both types of data operations – reading and writing. In Magnolia 6 UI, data updates should be piped into back-end items via simple fields by means of Vaadin 8 data binding (Binder objects).

-   Unlike transformers, item providers do not have to deal with the deprecated Vaadin 7 Item API and do not require manual verifications that child properties are populated within an item.

-   Item providers have a clearer concept of chaining. They get a reference of an item from a previous level in the hierarchy, making the whole complex data binding process recursive.

-   The number of provider types is much lower in Magnolia 6 UI, compared to a relatively high number of field transformers in the 5 UI.

-   There’s also provider implementations that can handle JSON structures, task and notifications items, assets or specific product content items.


## [](#_where_they_can_be_used)Where they can be used

Item providers can be used in:

-   Item provider definition in a [detail subapp](../../../../../Apps/App-configuration/Subapp-descriptor/#_detail_subapp_descriptor).

-   Item provider definition In a form containing composite and complex fields. In this use, the provider replaces the former field transformer functionality that is part of the UI framework 5, but no longer part of the Magnolia 6 UI.


## [](#_provider_types)Provider types

### [](#_for_any_data_source)For any data source

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 70%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">$type</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>currentItemProvider</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>info.magnolia.ui.editor.CurrentItemProviderDefinition</code></p></div><div class="paragraph"><p>Returns the parent node. Suitable for sub-forms only since it relies on a parent.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class="icon"><i class="fa icon-warning" title="Warning"></i></td><td class="content"><div class="paragraph"><p>Do not use <code>currentItemProvider</code> with <a href="../List-of-fields/Multi-field/" class="xref page">multi fields</a>. The same nodes could be resolved by multiple fields that use <code>currentItemProvider</code>, which means their content would be overwritten. Additionally, if a multi field is not configured to resolve nodes strictly (the <code>strict</code> property is set to <code>false</code> by default), it will resolve irrelevant nodes from the parent and likely result in errors.</p></div></td></tr></tbody></table></div><div class="admonitionblock important"><table><tbody><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>If you use <code>currentItemProvider</code> with <a href="../List-of-fields/Composite-field/" class="xref page">composite</a> or <a href="../List-of-fields/Switchable-field/" class="xref page">switchable</a> fields, make sure that none of the inner field names clash with:</p></div><div class="ulist"><ul><li><p>Other inner field names at the level where <code>currentItemProvider</code> is used</p></li><li><p>Other field names one level up where the composite or switchable field is defined</p></li></ul></div><div class="paragraph"><p>That is, every field at every level must have a unique name. Otherwise, nodes sharing the same name could be resolved by multiple fields that use <code>currentItemProvider</code>, which means their content would be overwritten.</p></div><div class="listingblock"><div class="title">Example name conflict</div><div class="content"><pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">form:
  properties:
    first_compositeField:
      $type: compositeField
      itemProvider:
        $type: currentItemProvider
      properties:
        inner_simple: # duplicate name
          $type: textField # first text
        inner_simple2:
          $type: textField # second text
    second_compositeField:
      $type: compositeField
      itemProvider:
        $type: currentItemProvider
      properties:
        inner_simple3:
          $type: textField # third text
        inner_simple: # duplicate name
          $type: textField # fourth text

# Problem with using currentItemProvider
edited_node:
  inner_simple: fourth text # first text is overwritten by second inner_simple
  inner_simple2: second text
  inner_simple3: third text

# Using nestedContentProvider with both composite fields would fix the problem
edited_node:
  first_compositeField:
    inner_simple: first text
    inner_simple2: second text
  second_compositeField:
    inner_simple3: third text
    inner_simple: fourth text # no name conflict</code></pre></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>nestedContentProvider</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>info.magnolia.ui.editor.NestedContentProvider$Definition</code></p></div><div class="paragraph"><p>Default provider for most of complex fields. Creates a child content node of the parent using the name of the field definition.</p></div></div></td></tr></tbody></table></div>

### [](#_for_jcr_data_source)For JCR data source

 $typeDescription

`jcrChildNodeProvider`

`info.magnolia.ui.editor.JcrChildNodeProviderDefinition`

Resolves a JCR child node from the parent. Suitable for sub-forms only since it relies on a parent.

> **Note:** jcrChildNodeProvider is used by default in info.magnolia.ui.field.JcrMultiFieldDefinition.

> **Caution:** jcrChildNodeProvider always creates subnodes for content underneath, but these nodes are cleaned up on the first commit of a form if it remains empty (when no content is added). If you need to persist those empty nodes for any reason, please use removeIfEmpty: false in the configuration of the provider.

`jcrBlockGetIndexedChildNode`

Implementation class of `info.magnolia.editor.block.jcr.JcrBlockChildNodeProviderStrategy` that extends the `JcrChildNodeProvider`.

Resolves indexes of the child nodes in a block of a content editor app.

When `info.magnolia.editor.block.jcr.MultiJcrBlockDefinition` is used, `info.magnolia.editor.block.MultiBlockView` has multiple child blocks and needs the `JcrBlockChildNodeProviderStrategy` to resolve child block indexes.

> **Caution:** This provider can only be used in block definitions of content editor apps based on the migrated Content Editor (version 2.0 and higher).

`jcrGetProperty`

`info.magnolia.ui.editor.JcrPropertyProvider`

Proposes a JCR node property as an item datasource. Typically used in complex fields with sub-editors where a single field entry needs to be exposed as an editor.

> **Note:** jcrGetProperty is used by default in info.magnolia.ui.field.JcrMultiValueFieldDefinition.

`jcrNodeFromLocationProvider`

`info.magnolia.ui.editor.JcrNodeFromLocationResolutionDefinition`

Resolves JCR node content from the current location.

### [](#_for_json_data_source)For JSON data source

| $type | Description |
| --- | --- |
| `jsonFieldPropertyProvider` | `info.magnolia.rest.ui.field.JsonFieldPropertyProviderDefinition`<br><br>Proposes a JSON node property as an item data source. Typically used in complex fields with sub-editors where a single field entry needs to be exposed as an editor. |
| `jsonMultiFieldPropertyProvider` | `info.magnolia.rest.ui.field.JsonMultiFieldPropertyProviderDefinition`<br><br>Proposes a JSON node property as an item data source in a multi field context. Typically used in complex fields with sub-editors where a single field entry needs to be exposed as an editor. |
| `jsonMultiFieldProvider` | `info.magnolia.rest.ui.field.JsonMultiFieldProviderDefinition`<br><br>Resolves a JSON child node from the parent in a multi field context. Suitable for sub-forms only since it relies on a parent. |
| `jsonProvider` | `info.magnolia.rest.ui.JsonItemProviderStrategyDefinition`<br><br>Replaces the `{id}` path parameter with the one passed in the location and then fetches the result using a configured REST call. |

### [](#_in_subapp_definition)In subapp definition

`jcrNodeFromLocationProvider` is used, for example, in the Pages app. This provider resolves a JCR node from its location context.

```yml
detail:
  class: info.magnolia.pages.app.detail.PageDetailDescriptor
  datasource:
    $type: jcrDatasource
    workspace: website
  itemProvider:
    $type: jcrNodeFromLocationProvider
```

For the full definition, see [pages-app.yaml](https://gitlab.magnolia-platform.com/pd/modules/pages/-/blob/master/magnolia-pages-app/src/main/resources/pages-app/apps/pages-app.yaml).

Using item providers is not limited only to operations related to JCR content. See the following definition where content items are provided from a JSON structure through `jsonProvider`.

```yml
view:
  label: View Commit
  class: info.magnolia.ui.contentapp.detail.DetailDescriptor
  datasource:
    $type: jsonDatasource
    restClient: bitbucket
    restCall: commit
    jsonPathExpressions:
      properties:
        author: '$.author.raw'
  actions:
    cancel:
      label: Cancel
      $type: closeAction
  itemProvider:
    $type: jsonProvider
```

### [](#_in_form_definition)In form definition

A provider strategy can be applied to handle data-read operations in forms with complex fields. For example, see `jcrChildNodeProvider` in the following definition of a complex field called `address`, composed of two simple fields (`city` and `country`).

![Defining provider types in form definition](../../../../../_images/6.2-compositeField-jcrChildNodeProvider_v2.png)

```yml
address:
  label: address
  i18n: true
  $type: compositeField
  itemProvider:
    $type: jcrChildNodeProvider
  properties:
    city:
      label: city
      $type: textField
    country:
      label: country
      i18n: true
      $type: textField
```

For the full definition, see [contacts-v8.yaml](https://gitlab.magnolia-platform.com/pd/modules/contacts-app/-/blob/master/src/main/resources/contacts/apps/contacts-v8.yaml#320-336).

Using `jcrChildNodeProvider` resolves the content of the child items `city` and `country` from the parent `address`.

![JCR child and parent nodes](../../../../../_images/vvangogh_JCR.png)

Related topics

-   [Data source definition](../../../../../Apps/App-configuration/Data-source-definition/)
