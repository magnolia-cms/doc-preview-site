---
title: "Site definition"
url: https://docs.magnolia-cms.com/product-docs/7.0/Developing/Templating/Site-definition/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Developing > Templating > Site definition
---

# Site definition

Site definitions enable you to individually control multiple websites, each with distinct domains and languages, within a single Magnolia installation. Each website corresponds to a website’s root page and its subpages in the Pages app.

The definition needs to be mapped to the website content. Specifically, you have to [map your site definition](../../../../RNs-6-4-3/Developing/Templating/Site-definition/#_mapping_a_site_definition_to_your_website) to your website’s root page. The site definition and website must have the same name.

Additionally, every site definition can have its own site-wide [theme](../../../../RNs-6-4-3/Developing/Templating/Theme/) and [template prototype](../../../../RNs-6-4-3/Developing/Templating/Site-definition/Template-prototype/) configurations. Template prototypes are used to define master page templates. Anything configured in them (for example, navigation, common page areas, or JavaScript) is applied to all page templates. Themes allow you to [define different image renditions](../../../../RNs-6-4-3/Developing/Templating/Template-scripts/How-to-work-with-images/How-to-work-with-images-using-damfn/#_defining_image_variations).

Go to the [How to use Multisite](../../../../RNs-6-4-3/Developing/Templating/Site-definition/How-to-use-Multisite/) page to configure multiple sites from one Magnolia installation.

## [](#_do_i_need_a_site_definition)Do I need a site definition?

No, it’s not necessary to use a site definition. A site based on concrete [template definitions](../../../../RNs-6-4-3/Developing/Templating/Template-definition/) works perfectly well. A site definition is an advanced option. It’s useful when you have a large site and want to avoid repeating a similar configuration.

Without a site definition you can still:

-   Choose which templates are available to editors.

-   Add CSS and JavaScript at the page level instead of site level.

-   Configure variations for each page template.


But without a site definition, you **cannot** use:

-   [imaging variations](../../../../RNs-6-4-3/Developing/Templating/Template-scripts/How-to-work-with-images/How-to-work-with-images-using-damfn/)

-   [`sitefn`](../../../../RNs-6-4-3/Developing/Templating/Template-scripts/Templating-functions/sitefn/) templating functions

-   [template prototypes](../../../../RNs-6-4-3/Developing/Templating/Site-definition/Template-prototype/)

-   [themes](../../../../RNs-6-4-3/Developing/Templating/Theme/)


## [](#_prerequisites)Prerequisites

You need the [Site module](../../../) to create a site definition. The module may not always be included, for example when you [create your own webapp](../../../../RNs-6-4-3/Developing/Bundles-and-webapps/Creating-a-custom-webapp-with-Maven/Creating-a-minimal-webapp-with-Maven/) based on the [empty webapp](../../../../RNs-6-4-3/Administration/Architecture/Webapp/). Add a dependency to the Site module in your webapp POM file.

> **Tip:** DX Core provides the multisite feature. It allows you to configure a different site definition for each website in a single Magnolia instance. Each site can be mapped to a different domain and you can serve content from different workspaces. These features are in the Multisite module.

### [](#_site_definitions_in_ce_and_dx_core)Site definitions in CE and DX Core

The steps to create a site definition can vary depending on which modules you have installed.

-   In the Magnolia Community Edition, you are only allowed a single site definition.

-   For Magnolia DX Core, multiple site definitions are allowed.


#### [](#_community_edition)Community Edition

When using the Community Edition, only the Site module is installed. Because of this, you only have the option for a single site definition in your project. If you need to work with multiple sites, you must upgrade to Magnolia DX Core.

#### [](#_dx_core)DX Core

When using Magnolie DX Core, only the Multisite module is installed. With this module, you can have as many sites as required. However, there are physical limits as each new site that’s added creates additional complexity.

It can sometimes be helpful to break the installations into multiple author instances. Especially in cases where you have multiple different teams spanning different regions.

> **Tip:** You can have as many author instances as you need as long as the content stays independent.

> **Note:** Site limitationIn DX Core, the number of sites that can be used is defined by the number of sites purchased.In the Community Edition, you can only create and use one site.

| Property | Description |
| --- | --- |
| `templates` | **optional** |
| `prototype` | **optional** The [template prototype](../../../../RNs-6-4-3/Developing/Templating/Site-definition/Template-prototype/) is a master template definition which applies to the whole site. Anything you configure in the prototype is applied to all page templates. |
| `availability` | **optional** Template availability defines which [page templates](../../../../RNs-6-4-3/Developing/Templating/Template-definition/Page-definition/) are available to the editors using the [Pages app](../../../../RNs-6-4-3/Apps/List-of-apps/Pages-app/) . There are more ways to control [page template availability](../../../../RNs-6-4-3/Developing/Templating/Template-availability/#_page_template_availability) . |
| `enabled` | **optional,** *default is true* Enables and disables the site definition. |
| `domains` | **optional** Maps domain names to the site. Requires the [Multisite module](../../../../../multisite/3.0.0/) . |
| `theme` | **optional** Reference to a [theme](../../../../RNs-6-4-3/Developing/Templating/Theme/) that defines the look and feel of the site. |
| `i18n` | **optional** Node containing a [locale](../../../../RNs-6-4-3/Administration/Language/Language-configuration/) configuration, with which you can add support for entering and serving content in multiple languages in your project. ** For the properties configurable under the `i18n` node, see the separate page [Defining locales for a site](../../../../RNs-6-4-3/Developing/Templating/Site-definition/Defining-locales-for-a-site/) . | ** | For the properties configurable under the `i18n` node, see the separate page [Defining locales for a site](../../../../RNs-6-4-3/Developing/Templating/Site-definition/Defining-locales-for-a-site/) . |
| ** | For the properties configurable under the `i18n` node, see the separate page [Defining locales for a site](../../../../RNs-6-4-3/Developing/Templating/Site-definition/Defining-locales-for-a-site/) . |
| `mappings` | **optional** [URI mappings](../../../../RNs-6-4-3/Administration/URI-mapping/) that define which node in a workspace should be served when a particular URI is requested. |
| `trustedProxyConfig` | **optional** Configuration of a [trusted proxy headers filter](../../../../RNs-6-4-3/Administration/Architecture/Request-processing-and-filters/Filters/#_trusted_proxy_headers) for the given site. `travel ... trustedProxyConfig: forwardingEnabled: true headers: xForwardedFor: name: x_forwarded_for values: 0: example.com ...` ** Incorrect filter configuration may block all user traffic. If access to Magnolia is blocked by an incorrect filter configuration, you can fix this by decorating the site config and overriding the incorrect values. Filter configuration parameters determine which headers are allowed or checked by this filter. • If `forwardingEnabled` is set to `false` (default), the filter blocks requests containing specific headers. This is to ensure security when proxy headers aren’t expected. The default setting prevents undesired traffic blocking. • If `forwardingEnabled` is set to `true` , the filter checks the values of specific headers in incoming requests. Requests with unexpected header values are blocked for security reasons. Available header names: • `x_forwarded_for` for `X-Forwarded-For` • `x_forwarded_host` for `X-Forwarded-Host` • `x_forwarded_proto` for `X-Forwarded-Proto` • `x_forwarded_port` for `X-Forwarded-Port` ** When using a proxy in front of Magnolia, it’s highly recommended to apply IP filtering in Tomcat so that only requests from the trusted proxy would be processed. For more details about setting IP filtering, see [Remote Address Valve](https://tomcat.apache.org/tomcat-9.0-doc/config/valve.html#Remote_Address_Valve) . | ** | Incorrect filter configuration may block all user traffic. If access to Magnolia is blocked by an incorrect filter configuration, you can fix this by decorating the site config and overriding the incorrect values. | ** | When using a proxy in front of Magnolia, it’s highly recommended to apply IP filtering in Tomcat so that only requests from the trusted proxy would be processed. For more details about setting IP filtering, see [Remote Address Valve](https://tomcat.apache.org/tomcat-9.0-doc/config/valve.html#Remote_Address_Valve) . |
| ** | Incorrect filter configuration may block all user traffic. If access to Magnolia is blocked by an incorrect filter configuration, you can fix this by decorating the site config and overriding the incorrect values. |
| ** | When using a proxy in front of Magnolia, it’s highly recommended to apply IP filtering in Tomcat so that only requests from the trusted proxy would be processed. For more details about setting IP filtering, see [Remote Address Valve](https://tomcat.apache.org/tomcat-9.0-doc/config/valve.html#Remote_Address_Valve) . |
| `parameters` | **optional** [Custom template properties](../../../../RNs-6-4-3/Developing/Templating/Template-definition/#_custom_template_properties) that you can access from a script without having to write a class. |
| `variations` | **optional** Variations adapt the site for different devices or geographical locations. |
| `cors` | **optional** A CORS configuration for the site definition. For configuration details, see [Request processing and filters: Properties](../../../../RNs-6-4-3/Administration/Architecture/Request-processing-and-filters/CORS/#_properties) . |

## [](#_example_configurations)Example configurations

### [](#_travel_site_definition_example)Travel site definition example

For an example site definition, see the Magnolia [`travel.yaml`](https://bitbucket.org/magnolia-cms/travel-demo/src/master/travel-demo-module/src/main/resources/travel-demo/sites/travel.yaml) definition file.

### [](#_site_definition_decoration_example)Site definition decoration example

To customize an existing site definition, such as the `travel-demo` site, you can use a [decoration file](../../../../RNs-6-4-3/Developing/Definition-decoration/). This lets you override specific configurations without modifying the original site definition. For example, to decorate the `travel-demo` site, create a decoration file at: `${magnolia.resources.dir}/my-light-module/decorations/travel-demo/sites/travel.yaml`

Below is an example of a `travel.yaml` decoration file that configures internationalization (`i18n`), domains, and mappings for the `travel-demo` site:

```yaml
i18n: !override
  class: info.magnolia.cms.i18n.IetfI18nContentSupport
  enabled: true
  fallbackLocale: en
  locales:
    en:
      enabled: true
      languageTag: en
    de:
      enabled: true
      languageTag: de
    fr:
      enabled: true
      languageTag: fr
domains: !override
  travel-demo:
    name: travel-demo.magnolia-cms.com
mappings: !override
  website:
    URIPrefix: ''
    handlePrefix: /travel
    repository: website
```

Related topics

-   [Multisite module](../../../../../multisite/3.0.0/)

-   [How to use Multisite](../../../../RNs-6-4-3/Developing/Templating/Site-definition/How-to-use-Multisite/)
