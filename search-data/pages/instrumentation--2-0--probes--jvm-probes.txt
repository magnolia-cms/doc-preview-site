---
title: "JVM probes"
url: https://docs.magnolia-cms.com/instrumentation/2.0/probes/jvm-probes/
category: Modules
version: modules
breadcrumb: Instrumentation module > JVM probes
---

# JVM probes

JVM probes are defined in the instrumentation module.

Available JVM probes

-   [JVMProbe](#_jvmprobe)

-   [ClassLoadingProbe](#_classloadingprobe)

-   [GarbageCollectionProbe](#_garbagecollectionprobe)

-   [MemoryProbe](#_memoryprobe)

-   [ThreadsProbe](#_threadsprobe)

-   [VersionInfoProbe](#_versioninfoprobe)


There are common properties for configuring all JVM probes, including:

-   `class` - the full class name of the instrumentation probe to instantiate, for example, info.magnolia.services.instrumentation.probes.jvm.ClassLoadingProbe.

-   `enabled` - a flag, either true or false, true indicating the probe is active and collecting metrics and false if not.


> **Note:** All JVM probes are configured in the Instrumentation module. Probes should be added in /modules/instrumentation/config/probes and specify the class property (required) and enabled property (optional). JVM probes defined in the instrumentation module are created or modified when the instrumentation module is restarted or changed.

 PropertyDefaultDescription

`class`

The fully qualified class name of the probe to instantiate.

> **Important:** The class must implement the info.magnolia.services.instrumentation.probes.LaunchableProbe interface.

`enabled`

**true**

Flag controlling if the probe is active and can provide measurements (`true`) or is disabled and not providing measurements (`false`).

## [](#_jvmprobe)JVMProbe

The JVMProbe will provide details on the running JVM, including version, vendor and runtime description.

### [](#_configuration_properties)Configuration properties

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.jvm.JVMProbe`. |     |

### [](#_metrics)Metrics

| Metric | Description |
| --- | --- |
| `jvm_info` | JVM details. |

### [](#_labels)Labels

| Label | Metrics | Description |
| --- | --- | --- |
| `version` | `jvm_info` | Something like "11.0.8+10", actual value depends on the JVM in use. |
| `vendor` | `jvm_info` | Something like "Yoyodyne Propulsion Systems Corporation", actual value depends on the JVM in use. |
| `runtime` | `jvm_info` | Something like "OpenJDK Runtime Environment", actual value depends on the JVM in use. |

## [](#_classloadingprobe)ClassLoadingProbe

The ClassLoadingProbe probe will provide measurements of the number of classes loaded and unloaded in the JVM running Magnolia. The metric will change when the JVM loads and unloads classes.

### [](#_configuration_properties_2)Configuration properties

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.jvm.ClassLoadingProbe`. |     |

### [](#_metrics_2)Metrics

> **Note:** The jvm_classes_loaded, jvm_classes_loaded_total and jvm_classes_unloaded_total metrics are labelled with the default Prometheus (job and instance).

| Metric | Description |
| --- | --- |
| `jvm_classes_loaded` | A count of the number of Java classes loaded in the JVM running Magnolia. |
| `jvm_classes_loaded_total` | The total number of Java classes loaded in the JVM since it was started. |
| `jvm_classes_unloaded_total` | A count of the number of Java classes unloaded by the JVM. |

## [](#_garbagecollectionprobe)GarbageCollectionProbe

The GarbageCollectionProbe measures the number of times the JVM collected garbage and cumulative time spent garbage collecting.

### [](#_configuration_properties_3)Configuration properties

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.jvm.GarbageCollectionProbe`. |     |

### [](#_metrics_3)Metrics

> **Note:** The jvm_classes_loaded, jvm_classes_loaded_total and jvm_classes_unloaded_total metrics are labelled with the default Prometheus (job and instance).

| Metric | Description |
| --- | --- |
| `jvm_gc_collection_seconds_count` | The count of number times the garbage collection method was executed by the JVM. |
| `jvm_gc_collection_seconds_sum` | The total time in seconds spent collecting garbage by method by the JVM. |

### [](#_labels_2)Labels

  LabelMetricsDescription

`gc`

`jvm_gc_collection_seconds_count jvm_gc_collection_seconds_sum`

The garbage collection method, like PS Scavenge or PS MarkSweep, that was executed.

> **Note:** The garbage collection methods used by the JVM depend on the settings the JVM was started with.

## [](#_memoryprobe)MemoryProbe

The MemoryProbe records the sizes of the various memory areas and pools in the JVM over time. Memory areas covered are heap and non-heap memory.

The naming and usage of the memory pools depends on what JVM and version you are using.

### [](#_configuration_properties_4)Configuration properties

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.jvm.MemoryProbe`. |     |

### [](#_metrics_4)Metrics

> **Note:** The jvm_classes_loaded, jvm_classes_loaded_total and jvm_classes_unloaded_total metrics are labelled with the default Prometheus (job and instance).

| Metric | Description |
| --- | --- |
| `jvm_memory_bytes_used` | The number of bytes currently used by the memory area. The "area" label identifies the memory area ("heap" or "non-heap"). |
| `jvm_memory_bytes_committed` | The number of bytes currently committed in the memory area. The "area" label identifies the memory area ("heap" or "non-heap"). |
| `jvm_memory_bytes_max` | The maximum number of bytes used by the memory area. The "area" label identifies the memory area ( "heap" or "non-heap"). |
| `jvm_memory_bytes_init` | The initial size in bytes of the memory area. The "area" label identifies the memory area ( "heap" or "non-heap"). |
| `jvm_memory_pool_bytes_used` | The number of bytes currently used by the labeled memory pool. The "pool" label identifies the memory pool. |
| `jvm_memory_pool_bytes_committed` | The number of bytes committed by the labeled memory pool. The "pool" label identifies the memory pool. |
| `jvm_memory_pool_bytes_max` | The maximum number of bytes used by the labeled memory pool. The "pool" label identifies the memory pool. |
| `jvm_memory_pool_bytes_init` | The initial size in bytes of the labeled memory pool. The "pool" label identifies the memory pool. |

### [](#_labels_3)Labels

| Label | Metrics | Description |
| --- | --- | --- |
| `area` | `` - `jvm_memory_bytes_used` - `jvm_memory_bytes_committed` - `jvm_memory_bytes_max` - `jvm_memory_bytes_init` `` | The memory area, "heap" or "non-heap". |
| `pool` | `` - `jvm_memory_pool_bytes_used` - `jvm_memory_pool_bytes_committed` - `jvm_memory_pool_bytes_max` - `jvm_memory_pool_bytes_init` `` | The memory pool. |

## [](#_threadsprobe)ThreadsProbe

The ThreadsProbe records the number of threads being used in the JVM over time broken down by type.

### [](#_configuration_properties_5)Configuration properties

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.jvm.ThreadsProbe`. |     |

### [](#_metrics_5)Metrics

> **Note:** Only the common labels (job and instance) are available for the threads metrics.

| Metric | Description |
| --- | --- |
| `jvm_threads_current` | The total number of threads currently in use of all types. |
| `jvm_threads_daemon` | The total number of daemon threads currently in use. |
| `jvm_threads_peak` | The maximum number of threads in use since the JVM was started. |
| `jvm_threads_started_total` | The total number of threads created in the JVM. |
| `jvm_threads_deadlocked` | The number of currently deadlocked threads. |
| `jvm_threads_deadlocked_monitor` | The number of currently deadlocked threads waiting for an object monitor. |

## [](#_versioninfoprobe)VersionInfoProbe

The VersionInfoProbe records the maker and version of the JVM running Magnolia.

### [](#_configuration_properties_6)Configuration properties

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.jvm.VersionInfoProbe`. |     |

### [](#_metrics_6)Metrics

> **Note:** Only the common labels (job and instance) are available for the threads metrics.

 MetricDescription

`jvm_info`

The version information about the JVM.

> **Note:** The value of this metric will always be 1. The JVM vendor and version are saved as label values.

> **Tip:** See below for the Labels used.

### [](#_labels_4)Labels

  LabelMetricsDescription

`vendor`

`jvm_info`

A string describing the JVM maker.

> **Note:** The JVM vendor can also be retrieved with the SystemProbe (info.magnolia.services.instrumentation.probes.environment.SystemProbe).

`version`

`jvm_info`

A string describing the version of the JVM.

> **Note:** The JVM version can also be retrieved with the SystemProbe (info.magnolia.services.instrumentation.probes.environment.SystemProbe).
