---
title: "Configuring search in Magnolia"
url: https://docs.magnolia-cms.com/product-docs/7.0/Administration/Configuring-search/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Administration > Configuring search in Magnolia
---

# Configuring search in Magnolia

By default, Magnolia’s search functionality is provided by the Jackrabbit repository which uses the default Lucene algorithm to calculate the score for ranking results.

> **Tip:** For more advanced search options and especially if you need to manage high volumes of assets, you can set up Magnolia to use Solr search.

Jackrabbit allows you to control which properties of a node are indexed and how much they will affect the `jcr:score` value which represents the full-search score of the node serving as a measure of that node’s relevance to the full-text search expression result. Once those properties are defined in the index configuration file, Lucene calculates how to index the content of a workspace.

## [](#_lucene)Lucene

Magnolia’s search works using the [Lucene algorithm](https://lucene.apache.org/core/3_5_0/scoring.html#Algorithm) where by default all properties mentioned in the index-rule receive a boost value of `1.0`.

For example

`//*[jcr:contains(.,'apache')] order by @jcr:score descending`

| `jcr:score` | Text property |
| --- | --- |
| 1000 | "Apache Jackrabbit" |
| 848 | "some test jackrabbit apache, apache is great" |
| 350 | "this is a text that is much larger than the first one and only contains the word apache once." |

While all workspaces have the `mgnl:tags` property indexed, not all of them have the same configuration:

-   [Pages](https://git.magnolia-cms.com/projects/PLATFORM/repos/main/browse/magnolia-core/src/main/resources/info/magnolia/jackrabbit/indexing_configuration_website.xml) : the title properties receive a boost of 3.0. The components and areas node contents are also included in the `mgnl:page` when the search index is evaluated.

-   [DAM](https://gitlab.magnolia-platform.com/pd/modules/dam/-/blob/master/magnolia-dam-jcr/src/main/resources/info/magnolia/jackrabbit/indexing_configuration_dam.xml): the `mgnl:resource` node content is included in the `mgnl:asset` when the search index is evaluated.

-   [Tasks](https://gitlab.magnolia-platform.com/pd/modules/task-management/-/blob/master/src/main/resources/info/magnolia/jackrabbit/indexing_configuration_tasks.xml): the `mgnl:contentNode` content is included in the `mgnl:task` when the search index is evaluated.


## [](#_search_results)Search results

You can modify the existing search results configuration by the [definition decoration](../../Developing/Definition-decoration/) mechanism.

For example, the following light module configuration updates the `defaultCountPerSupplier` to `3`, allowing you to see only up to three search results.

<my-module>/decorations/periscope-core/config.yaml

```yaml
globalSearchConfiguration:
  defaultCountPerSupplier: 3
```

### [](#_configurable_properties)Configurable properties

The table below lists properties that affect how search results appear.

| Property | Description |
| --- | --- |
| `suppliers` | **optional**<br><br>List of search result suppliers.<br><br>See also [Search result suppliers](#_search_result_suppliers). |
| `supplierOrder` | **optional**<br><br>List defining the ordering of search result groups. |
| `editorRoles` | **optional**<br><br>List of user roles available in the **Author** search filter.<br><br>All users are available unless specified otherwise. |
| `defaultCountPerSupplier` | **optional**, *default is `50`*<br><br>Integer defining the maximum number of search results shown from any single search supplier. |

## [](#inapp-filters-anchor)Configuring in-app search filters

You can create, update, and delete search filters using the [definition decoration](../../Developing/Definition-decoration/) mechanism.

> **Important:** Filters can’t be configured for Asset Chooser dialogs. Use a full-text search field instead.

1.  Find the filter configuration. For example:

    1.  `pages-app.yaml` for the author, status, and template filters in the Pages app.

    2.  `pages-content-tags-integration/decorations/pages-app/apps/pages-app.subApps.browser.yaml` for the tag filter in the Pages app.

    3.  `dam.subApps.yaml` for the asset type, author, size, and status filters in the Assets app.

    4.  `content-tags-integration/decorations/dam-assets-app/apps/dam.subApps.yaml` for the tag filter in the Assets app.


2.  Look for `workbench` and decorate the configuration of the existing filters or add a new filter.

    All the filters are configured in a similar way. The example below shows the default properties used in the configuration of the Assets app **Type** filter.

    `dam-app-jcr/decorations/dam-assets-app/apps/dam.subApps.yaml`

    ```yaml
      workbench:
        sortFilterOptions: true
        filters:
          - name: mimeType
            icon: icon-file
            filterOperator: STARTS_WITH
            $type: dropdownMultiselect
            propertyName: jcr:content@jcr:mimeType
            datasource:
              $type: optionListDatasource
              options:
                - name: audio
                  value: audio/
                  label: Audio
                - name: documents
                  value: application/,text/
                  label: Documents
                - name: images
                  value: image/
                  label: Images
                - name: videos
                  value: video/
                  label: Videos
    ```


Other properties are available depending on the filter. See some [examples](#_default_filter_examples) below.

### [](#_configurable_properties_for_in_app_search)Configurable properties for in-app search

The tables below list workbench and filter properties that affect how in-app search and filters appear.

| Property | Description |
| --- | --- |
| `sortFilterOptions` | **optional**, *default is `true`*<br><br>Sorts the filters by their labels from A-Z. It gets the order from the definition mapping. |
| `searchEnabled` | **optional** *default is `true`*<br><br>Enables the full-text search field. |
| `searchPlaceholder` | **optional**, *default is `Type to search…​`*<br><br>Placeholder text for the full-text-search field. |
| `filters` | **optional**<br><br>Map of filter configurations.<br><br>If no filters are defined, only the search field appears.<br><br>See the following table for filter properties. |

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><caption class="title">Table 2. Subset of in-app filter search properties</caption> <colgroup><col style="width: 30%;"> <col style="width: 70%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Property</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>The name for the filter.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>icon</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>CSS class that identifies an icon used for the filter. See <a href="../../Apps/Developing-an-app/Specific-aspects/How-to-add-SVG-icons-for-apps/" class="xref page">How to add SVG icons for apps</a>.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>$type</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>Use a valid field alias name to reference a supported field type.</p></div><div class="paragraph"><p>The field types supported are:</p></div><div class="ulist"><ul><li><p>For filters:</p><div class="ulist"><ul><li><p><code>dropdown</code> - <span class="inlineBean">info.magnolia.ui.filteringapp.filter.field.FilterDropdownViewDefinition</span></p></li><li><p><code>dropdownMultiSelect</code> - <span class="inlineBean">info.magnolia.ui.filteringapp.filter.field.FilterDropdownMultiselectViewDefinition</span></p></li></ul></div></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>filterOperator</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>Choose an <span class="inlineBean">info.magnolia.ui.filter.FilterOperator</span> for comparing values. Possible values are:</p></div><div class="ulist"><ul><li><p><code>EQUALS</code></p></li><li><p><code>STARTS_WITH</code></p></li><li><p><code>CONTAINS</code></p></li><li><p><code>BETWEEN</code></p></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>textInputAllowed</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>false</code></em></p></div><div class="paragraph"><p>When <code>true</code>, the user can type into the field to filter available items.</p></div><div class="paragraph"><p>If there are more than 8 items in the filter, <code>textInputAllowed</code> is automatically set to <code>true</code> so that users can search in the filter heading.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>propertyName</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>The property name.</p></div><div class="paragraph"><p>If no <code>propertyName</code> is set, <code>name</code> is used instead. This is useful if the property name is complex, like <code>mgnl:resource/foo:bar</code>, and not yaml-compliant.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>datasource</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>Use a valid datasource name to <a href="../../Apps/App-configuration/Data-source-definition/#_data_source_types" class="xref page">reference a data source type</a>.</p></div></div></td></tr></tbody></table></div>

### [](#_configuring_the_number_of_filter_results_displayed)Configuring the number of filter results displayed

You can configure how many results are displayed when a user applies a filter in an app. By default, the results displayed are capped at `200`. You can increase this value to suit your users' needs or decrease it to improve performance.

To do so:

1.  Go to the [Resource Files app](../../Apps/List-of-apps/Resource-Files-app/).

2.  Find the configuration of the app (for example, `pages-app.yaml` for Pages or `dam.subApps.yaml` for Assets).

3.  Under `datasource`, add the property `filterResultsLimit`.

4.  Set a value that suits your requirements.

    pages-app/apps/pages-app.yaml

    ```yml
    datasource:
      $type: jcrDatasource
      workspace: website
      filterResultsLimit: 42 (1)
      allowedNodeTypes:
        - mgnl:page
    ```

    |     |     |
    | --- | --- |
    | **1** | Only `42` results are displayed in the Pages app when a filter is applied. |

5.  Save your changes.

    Authors can see the number of results returned by the filter at the bottom of the app page. If more results are available, the text displayed indicates that.

    ![Text says ](../../_images/pages-app-filter-result-count.png)


> **Note:** Search results are shown in a list view in all apps except the Definitions app, which uses a tree view for context.

### [](#disable-search-anchor)Disabling in-app search filters and the search field

To disable search filters:

1.  Go to the [Resource Files app](../../Apps/List-of-apps/Resource-Files-app/).

2.  Find the filter configuration. For example:

    1.  `pages-app.yaml` for the author, status, and template filters in the Pages app.

    2.  `pages-content-tags-integration/decorations/pages-app/apps/pages-app.subApps.browser.yaml` for the tag filter in the Pages app.

    3.  `dam.subApps.yaml` for the asset type, author, size, and status filters in the Assets app.

    4.  `content-tags-integration/decorations/dam-assets-app/apps/dam.subApps.yaml` for the tag filter in the Assets app.


3.  Look for `workbench` and remove the configuration of the existing filters under `filters`.

    The filters are removed from the app, but the search field remains.


To remove the search field:

1.  Find the filter configuration in your app. For example, `pages-app.yaml` or `dam.subApps.yaml`.

2.  Add the `searchEnabled` property and set it to `false`.


The example below shows the configuration to disable the asset type, author, size, and status filters as well as the search field in the Assets app.

`resources/dam-app-jcr/decorations/dam-assets-app/apps/dam.subApps.yaml`

```yaml
  workbench:
    searchEnabled: false
    filters:
```

## [](#_default_filter_examples)Default filter examples

The following sections list the default filters provided in the Assets and Pages apps and their configuration.

#### [](#assets-app-filters-anchor)Assets app filters

The following default filters and filter values are provided in the Assets app:

-   **Asset type**

    -   Audio

    -   Documents

    -   Images

    -   Videos


-   **Author**

    -   List of users


-   **Size**

    -   Small

    -   Medium

    -   Large

    -   Extra large


-   **Status**

    -   Draft

    -   Marked for deletion

    -   Modified

    -   Published


-   **Tag**

    -   List of all [content tags](../../Modules/List-of-modules/Content-Tags-module/)



##### [](#_asset_type_filter)Asset type filter

The **Asset type** filter groups different file formats into filter values. By default, the following filter values are provided:

-   **Audio** - Uses the MIME type prefix `audio/`. All supported audio formats, such as .mpeg, .webm, .mp4, .ogg, .aac, .aacp, .flac, .wav, .x-wav, or .mp3.

-   **Documents** - Uses the MIME type prefixes `application/` or `text/` All supported document formats, such as .pdf, or .html.

-   **Images** - Uses the MIME type prefix `image/`. All supported image formats, such as .jpeg, .png, .svg, .gif, or .webp.

-   **Videos** - Uses the MIME type prefix `video/`. All supported video formats, such as .mp4, .mpeg, or .webm.


For a list of supported file formats, see [Supported file formats for preview generation](../../Authoring/Managing-assets/#_supported_file_formats_for_preview_generation).

For more information about how MIME types are mapped to file extensions in Magnolia, see [MIME type mapping](../MIME-type-mapping/).

Default configuration in `resources/dam-app-jcr/decorations/dam-assets-app/apps/dam.subApps.yaml`

```yaml
  workbench:
    sortFilterOptions: true
    filters:
      - name: mimeType
        icon: icon-file
        filterOperator: STARTS_WITH
        $type: dropdownMultiselect
        propertyName: jcr:content@jcr:mimeType
        datasource:
          $type: optionListDatasource
          options:
            - name: audio
              value: audio/
              label: Audio
            - name: documents
              value: application/,text/
              label: Documents
            - name: images
              value: image/
              label: Images
            - name: videos
              value: video/
              label: Videos
```

##### [](#_author_filter)Author filter

The **Author** filter lists all the JCR-based [Users](../IAM/Users/) in the instance.

> **Note:** SSO-based users may only find their own content using the Current user option that appears in the Author filter.

Default configuration in `resources/dam-app-jcr/decorations/dam-assets-app/apps/dam.subApps.yaml`

```yaml
  workbench:
    filters:
      - name: mgnl:createdBy
        icon: icon-user-public
        filterOperator: EQUALS
        $type: dropdownMultiselect
        datasource:
          name: available-filtering-users
```

##### [](#_size_filter)Size filter

The **Size** filter groups different asset sizes into filter values. By default, the following filter values are provided:

-   **Small** - less than 1 MB: `(,1)`

-   **Medium** - 1 to 5 MB: `[1,5]`

-   **Large** - 5 to 20 MB: `[5,20]`

-   **Extra large** - greater than 20 MB: `(20,)`


###### [](#_configuring_size_filter_ranges)Configuring Size filter ranges

You can configure the **Size** filter values to suit the kind of assets you deal with. For example, *small* means something different depending on if your asset library contains RTF assets or videos.

To set a range of values for the media size filter values, you must use the supported `BETWEEN` filter operator formatting:

```yaml
[a,b]
(a,b)
[a,b)
(a,b]
```

-   `[` means `>=` (more than or equal to).

-   `]` means `⇐`(less than or equal to).

-   `(` means `>` (more than).

-   `)` means `<` (less than).

-   The comma (the separator) between the values must exist.

-   `a` or `b` can be omitted but not both.

-   If `a` is omitted, the open symbol can be either `[` or `(`.

-   If `b` is omitted, the close symbol can be either `]` or `)`.


In the example below, you can see the default configuration for the **Size** filter.

Default configuration in `resources/dam-app-jcr/decorations/dam-assets-app/apps/dam.subApps.yaml`

```yaml
  workbench:
    filters:
      - name: size
        icon: icon-zoom-to-fit
        filterOperator: BETWEEN
        $type: dropdownMultiselect
        propertyName: jcr:content@size
        datasource:
          $type: optionListDatasource
          options:
            - name: small
              value: "(,1048576)"
              label: Small (< 1 MB)
            - name: medium
              value: "[1048576,5242880]"
              label: Medium (1 - 5 MB)
            - name: large
              value: "[5242880,20971520]"
              label: Large (5 - 20 MB)
            - name: extraLarge
              value: "(20971520,)"
              label: Extra large (> 20 MB)
```

##### [](#_status_filter)Status filter

The **Status** filter lists all the publication statuses.

| Status | Description |
| --- | --- |
| Published | Content is published from the author instance to the public instance. Identical content exists on both instances. |
| Modified | Content was modified since publication. The author instance isn’t in sync with the public. |
| Draft | Content exists only on the author instance. |
| Marked for deletion | Content is marked for deletion but still appears in the list (grayed out). It can be restored or permanently deleted. |

Default configuration in `resources/dam-app-jcr/decorations/dam-assets-app/apps/dam.subApps.yaml`

```yaml
  workbench:
    filters:
      - name: jcrPublishingStatus
        icon: icon-spinner-full
        $type: dropdownMultiselect
        datasource:
          $type: enumDatasource
          enumeration: info.magnolia.ui.contentapp.configuration.column.StatusColumnDefinition$PublicationStatus
          sorted: true
```

##### [](#_tag_filter)Tag filter

The **Tag** filter lists all the [content tags](../../Modules/List-of-modules/Content-Tags-module/).

> **Note:** The Tag filter is configured in resources/content-tags-integration/decorations/dam-assets-app/apps/dam.subApps.yaml by default, contrary to the other Assets app filters. The configuration is added by decoration to the current implementation of the dam module and is bundled in the content-tags module.

Default configuration in `resources/content-tags-integration/decorations/dam-assets-app/apps/dam.subApps.yaml`

```yaml
  workbench:
    filters:
      - name: mgnl:tags
        icon: icon-tag
        $type: dropdownMultiselect
        datasource:
          name: available-filtering-content-tags
```

#### [](#_pages_app_filters)Pages app filters

The following default filters and filter values are provided in the Pages app:

-   **Author**

    -   List of users


-   **Status**

    -   Draft

    -   Marked for deletion

    -   Modified

    -   Published


-   **Tag**

    -   List of all the [content tags](../../Modules/List-of-modules/Content-Tags-module/)


-   **Template**

    -   List of all the [page templates](../../Developing/Templating/Template-definition/Page-definition/)



The **Author** and **Status** filters are configured in the same way as [their counterparts](#assets-app-filters-anchor) in the Assets app. Only the location of the configuration file is different `resources/pages-app/apps/pages-app.yaml`.

The **Tag** filter is also configured in the same way, but in another location: `resources/pages-content-tags-integration/decorations/pages-app/apps/pages-app.subApps.browser.yaml`.

##### [](#_template_filter)Template filter

The **Template** filter lists all the [page templates](../../Developing/Templating/Template-definition/Page-definition/).

Default configuration in `resources/pages-app/apps/pages-app.yaml`

```yaml
    workbench:
      filters:
        - name: mgnl:template
          icon: icon-view
          $type: dropdownMultiselect
          datasource:
            name: available-filtering-page-templates
```
