---
title: "Periscope module"
url: https://docs.magnolia-cms.com/product-docs/Modules/List-of-modules/Periscope-module/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Modules > Periscope module
---

# Periscope module

[Operations](../../../use-cases/operations/) Bundled: Framework

| Edition | CE  |
| --- | --- |
| License | [MLA](https://www.magnolia-cms.com/mla.html), [GPL](http://www.gnu.org/licenses/gpl-3.0.html) |
| Issues | [MGNLPER](https://magnolia-cms.atlassian.net/browse/MGNLPER) |
| Maven site | [Periscope](https://nexus.magnolia-cms.com/#browse/browse:public:info%2Fmagnolia%2Fperiscope%2Fmagnolia-periscope-core%2F{infoMagnoliaPeriscope-magnoliaPeriscopeCore-version}) |
| Latest | {infoMagnoliaPeriscope-magnoliaPeriscopeCore-version} |

The Periscope module provides back-end functionality used by the [Global Search](../../../Authoring/Search/Global-search/). It can be used out-of-the-box to search all content apps or extended by activating search in external data sources and by implementing operations commonly used by your users.

The Global Search brings the back-end search functionality of the Periscope module into the [Magnolia UI](../UI-module/). It provides the UI display of the Global Search box, search results list, and filter buttons to refine results.

## [](#_module_structure)Module structure

| artifactID | Description |
| --- | --- |
| `magnolia-periscope-core` | Provides the default search result supplier and periscope operation configuration files. |
| `magnolia-periscope-api` | Provides an API to plug in search result suppliers to the search result set, as well as to create your own query sniffers (for example, for vocal commands). |
| `magnolia-speech-recognition` | Provides speech-to-text recognition capabilities. |

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../../Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.periscope</groupId>
  <artifactId>magnolia-periscope-core</artifactId>
  <version>{infoMagnoliaPeriscope-magnoliaPeriscopeCore-version}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.periscope</groupId>
  <artifactId>magnolia-periscope-api</artifactId>
  <version>{infoMagnoliaPeriscope-magnoliaPeriscopeCore-version}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.periscope</groupId>
  <artifactId>magnolia-speech-recognition</artifactId>
  <version>{infoMagnoliaPeriscope-magnoliaPeriscopeCore-version}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

> **Note:** The functionality of the QuerySniffer and OperationRequest components is now handled by the Global Search system. The magnolia-speech-recognition code is no longer linked to the new Global Search functionality. This obsolete code is non-functional and will be removed to streamline the codebase.

## [](#_configuration)Configuration

There’s no additional configuration required for standard use because the default configuration provides a number of search result suppliers.

You may configure additional search result suppliers and periscope operations to suit your specific needs.

### [](#_search_result_suppliers)Search result suppliers

Search result suppliers are responsible for providing results to the Global Search.

Example supplier definition (for the [Pages app](../../../Apps/List-of-apps/Pages-app/) content):

/pages/searchResultSuppliers/pages-app.yaml

```yml
class: info.magnolia.periscope.search.jcr.JcrSearchResultSupplierDefinition
appName: pages
workspace: website
nodeTypes:
  - mgnl:page
fullTextSearch: true
titleProperty: title
icon: icon-webpages-app
```

##### [](#_for_rest_integrations)For REST integrations

You can define a search result supplier using YAML for integration of external data set through REST. For more details, see the page [REST search result suppliers for Global Search](../UI-Framework-REST-Extensions-module/REST-search-result-suppliers-for-Global-Search/).

##### [](#_for_jcr_workspaces)For JCR workspaces

Content apps are detected when you start Magnolia and the system generates corresponding `SearchResultSuppliers` for their JCR workspaces automatically.

You only need to define a search result supplier using YAML to search JCR workspaces if you want to customize the supplier.

Magnolia provides a registry with a specific info.magnolia.periscope.search.jcr.JcrSearchResultSupplierDefinition class that searches over defined JCR workspaces using specific node types and with the option of performing full-text search.

In the example below, the `JcrSearchResultSupplierDefinition` class, `<my-custom-workspace>` workspace and `<my-node-type>` node type are specified. Full-text search is activated within the workspace defined.

/my-module/searchResultSuppliers/appName.yaml

```yml
class: info.magnolia.periscope.search.jcr.JcrSearchResultSupplierDefinition
workspace: <my-custom-workspace>
appName: <app-to-open>
nodeTypes:
  - <my-node-type>
fullTextSearch: true
titleProperty: caption
```

**`JcrSearchResultSupplierDefinition` properties**

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 70%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Property</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong>, <em>default is <code>info.magnolia.periscope.search.jcr.JcrSearchResultSupplierDefinition</code></em></p></div><div class="paragraph"><p>Fully qualified class name of the supplier definition. Must implement the <code>info.magnolia.periscope.search.SearchResultSupplierDefinition</code> interface.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>workspace</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>Name of the <a href="../../../Administration/Architecture/Workspaces/" class="xref page">workspace</a> in the <code>magnolia</code> repository you want to search.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>appName</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>Name of the app that opens when a search result is clicked.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>nodeTypes</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>List of node types you want to search. If no value is specified, the supplier will search all node types.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>titleProperty</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>Title of the searched node. Always searched by default and used as a title for the result.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>nodeNameProperty</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong> <em>default is <code>jcrName</code></em></p></div><div class="paragraph"><p>Restricts the search only to match a specific node name.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>rootPath</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>/</code></em></p></div><div class="paragraph"><p>Path configured as the root of the workspace. Only content below the path is operated on.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>enabled</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>true</code></em></p></div><div class="paragraph"><p>When <code>false</code>, the supplier is disabled.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>fullTextSearch</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>true</code></em></p></div><div class="paragraph"><p>When <code>false</code>, only node names are searched. See also the <code>propertySearch</code> property.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>propertySearch</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>false</code></em></p></div><div class="paragraph"><p>When <code>true</code>, only property names are searched. See also the <code>fullTextSearch</code> property.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>resultLimit</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>100</code></em></p></div><div class="paragraph"><p>Limit on the total number of search results that can be retrieved.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeoutSeconds</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>15</code></em></p></div><div class="paragraph"><p>Specifies the timeout duration in seconds for individual search supplier operations.</p></div><div class="paragraph"><p><strong>Behavior</strong></p></div><div class="ulist"><ul><li><p>Each supplier operates independently with its own timeout.</p></li><li><p>If a supplier exceeds its timeout, it returns empty results, but other suppliers continue processing and return results as normal.</p></li><li><p>The overall search operation completes, aggregating results from all finished suppliers.</p></li><li><p>Timeouts are handled gracefully, with no exceptions thrown to the client.</p></li></ul></div><div class="admonitionblock tip"><table><tbody><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="ulist"><ul><li><p>Lower values (5–10 seconds): For faster responses, but complex searches may be truncated.</p></li><li><p>Higher values (30–60 seconds): For more comprehensive searches, but expect potential delays.</p></li><li><p>Balance search thoroughness with user experience.</p></li><li><p>Monitor supplier performance to fine-tune timeout values for specific use cases.</p></li></ul></div></td></tr></tbody></table></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>strategy</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>info.magnolia.periscope.search.jcr.JcrSearchResultSupplierStrategy</code></em></p></div><div class="paragraph"><p>Strategy used to construct a search result supplier from <code>JcrSearchResultSupplierDefinition</code>. Must implement the <code>info.magnolia.periscope.search.SearchResultSupplierStrategy</code> interface.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>order</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>Node containing the order configuration of search results. See the <span class="inlineBean">info.magnolia.periscope.search.jcr.JcrSearchResultSupplierOrder</span> class.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">&nbsp;&nbsp;&nbsp;&nbsp; <code>property</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>Node type property to sort search results by. Use a <a href="../../../Administration/Architecture/Node-types/" class="xref page">Magnolia node type</a> or define your own property.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">&nbsp;&nbsp;&nbsp;&nbsp; <code>sortBy</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>A map where:</p></div><div class="ulist"><ul><li><p>The key (String) is an attribute to sort by.</p></li><li><p>The value is a sort direction (<code>ASC</code> or <code>DESC</code>) for the given key.</p></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>subAppName</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>browser</code></em></p></div><div class="paragraph"><p>Name of the subapp that opens when a search result is clicked.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>detailSubAppName</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong>, <em>default is <code>detail</code></em></p></div><div class="paragraph"><p>Name of the detail subapp that opens when a search result is clicked.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>icon</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>CSS class that identifies an icon used for the supplier.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>label</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>Text displayed on the supplier icon. The value is <a href="../../../Administration/Language/Internationalization/#_i18n_message_keys" class="xref page">i18n</a>-able.</p></div></div></td></tr></tbody></table></div>

#### [](#_creating_a_custom_search_result_supplier)Creating a custom search result supplier

If you want to search non-JCR databases or external datasets, you must create your own corresponding `SearchResultSupplier`.

Use the info.magnolia.periscope.search.SearchResultSupplierDefinition interface provided by the `magnolia-periscope-api` submodule to implement a search result supplier.

```java
public interface SearchResultSupplier {
    String getName();
    Stream<SearchResult> search(SearchQuery query) throws SearchException;
}
```

Each `SearchResultSupplier` is responsible for supplying results. The results of suppliers are represented by `SearchResult` objects which contain text, metadata and a periscope operation request, which specifies what should be done when a user selects that result.

```java
public class SearchResult {

    private final String title;
    private final String content;
    private final String path;
    private final OperationRequest operationRequest;

    private final String type;
    private final String lastModifiedBy;
    private final ZonedDateTime lastModified;
    private final Status status;
    private final SearchResultItem resultItem;

}
```

### [](#_search_results)Search results

You can modify the existing search results configuration by the [definition decoration](../../../Developing/Definition-decoration/) mechanism.

For example, the following light module configuration updates the `defaultCountPerSupplier` to `3`, allowing you to see only up to three search results.

<my-module>/decorations/periscope-core/config.yaml

```yaml
globalSearchConfiguration:
  defaultCountPerSupplier: 3
```

#### [](#_configurable_properties)Configurable properties

The table below lists properties that affect how search results appear.

| Property | Description |
| --- | --- |
| `suppliers` | **optional**<br><br>List of search result suppliers.<br><br>See also [Search result suppliers](#_search_result_suppliers). |
| `supplierOrder` | **optional**<br><br>List defining the ordering of search result groups. |
| `editorRoles` | **optional**<br><br>List of user roles available in the **Author** search filter.<br><br>All users are available unless specified otherwise. |
| `defaultCountPerSupplier` | **optional**, *default is `50`*<br><br>Integer defining the maximum number of search results shown from any single search supplier. |

### [](#_disabling_result_ranker)Disabling result ranker

The boolean `disabled` property of the `info.magnolia.periscope.ResultRankerConfiguration` allows you to entirely disable the ranking of Global Search results.

### [](#_asynchronicity_of_search_queries)Asynchronicity of search queries

To improve search performance for multiple threads trying to get the same session on the same workspace, you may need to change the limit of the total number of concurrent queries.

Go to the `magnolia.properties` file and adjust the [`magnolia.periscope.result.supplier.thread`](../../../Administration/Architecture/Configuration-management/#_magnoliaPeriscopeResultSupplierThread) system property value.

### [](#_example_configuration)Example configuration

/periscope-core/config.yaml

```yaml
resultRankerConfiguration:
  disabled: true (1)
globalSearchConfiguration:
  defaultCountPerSupplier: 50
  supplierOrder:
    - pages-app
    - stories
    - dam
    - tours
```

|     |     |
| --- | --- |
| **1** | Disables the ranking of Global Search results. |
