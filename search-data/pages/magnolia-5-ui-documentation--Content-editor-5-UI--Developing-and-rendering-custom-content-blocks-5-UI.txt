---
title: "Developing and rendering custom content blocks - 5 UI"
url: https://docs.magnolia-cms.com/magnolia-5-ui-documentation/Content-editor-5-UI/Developing-and-rendering-custom-content-blocks-5-UI/
category: Modules
version: modules
breadcrumb: Magnolia 5 UI documentation > Content editor - 5 UI > Developing and rendering custom content blocks - 5 UI
---

# Developing and rendering custom content blocks - 5 UI

> **Note:** This page has been created for the Magnolia 5 UI framework. For the 6 UI framework page, see Developing and rendering custom content blocks instead.

This page describes how to define and render custom content blocks that can be grouped to form content compositions in implementations of the [Content editor](#6.2@product-docs:ROOT:Features/Content-authoring/Content-editor.adoc).

The Magnolia [Stories app](#6.2@product-docs:ROOT:Apps/List-of-apps/Stories-app.adoc), which is an implementation of the content editor, uses four predefined block types: `text`, `image`, `externalLink` and `video`.

## [](#_block_types)Block types

The Content editor provides predefined block types that you can use in your custom content editor app:

-   `text`

-   `image`

-   `externalLink`

-   `video`


You can also define your own blocks.

Compared to [`TextFieldDefinition`](#6.2@product-docs:ROOT:Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Text-field.adoc), the `text` block implements a special `RichTextBlock` class, which features basic text formatting functions:

![RichTextBlock class in text block](6.2@product-docs:ROOT:6-1-developingRenderingCustomContentBlocks-textBlock-5ui.png)

All the other predefined block types implement the `FieldSetBlockDefinition` class.

### [](#_demo_block_types)Demo block types

The Magnolia demo decorates the default Stories app and provides two additional block types you can use:

-   `tour`

-   `date`


Both block types implement the `FieldSetBlockDefinition` class.

To see these blocks you must have the [Magnolia demo modules](#6.2@product-docs:ROOT:Getting-started-with-Magnolia/Demo.adoc) installed.

## [](#_defining_a_custom_block)Defining a custom block

To define a custom block, use a [YAML definition file](#6.2@product-docs:ROOT:Developing/YAML.adoc#_yaml_in_the_context_of_magnolia) and apply the `FieldSetBlockDefinition` class of the Content editor submodule.

1.  Create a YAML file in the `blocks` folder of your module and add:

    1.  The `info.magnolia.editor.block.stock.FieldSetBlockDefinition` class.

    2.  The `templateId` of your block.

    3.  The list of fields the content block consists of.

        A general block definition based on the FieldSetBlockDefinition class



class: info.magnolia.editor.block.stock.FieldSetBlockDefinition
templateId: <module-name>:<the-path-to-the-block-relative-to-the-module>
fields:
  <field-1>
  <field-2>
  <field-3>
  etc.

1.  Provide a template definition file and a template script for your block in the `templates/blocks` subfolder of your module.

2.  Optionally, in the `i18n` folder of your module, provide a file with i18n keys for labels and descriptions of the block’s fields.


### [](#_example_a_quotation_block)Example: a quotation block

The following code samples are used to create a quotation block in a light module called `block-examples`:

-   [Block definition](https://bitbucket.org/magnola-cms/block-examples/src/master/blocks/quote.yaml)

-   [Template definition file](https://bitbucket.org/magnola-cms/block-examples/src/master/templates/blocks/quote.yaml)

-   [Template script](https://bitbucket.org/magnola-cms/block-examples/src/master/templates/blocks/quote.ftl)

-   [i18n file](https://bitbucket.org/magnola-cms/block-examples/src/master/i18n/example-blocks_en.properties)


Resulting block

![Resulting block](6.2@product-docs:ROOT:6-0-developingCustomContentBlocks-quoteRendered-5ui.png)

## [](#_rendering_blocks_in_a_freemarker_script)Rendering blocks in a FreeMarker script

This section explains how to render block content in a page or a component template.

### [](#_the_cmsblock_directive)The `cms:block` directive

The Content editor module provides `cms:block`, a Magnolia FreeMarker [directive](#6.2@product-docs:ROOT:Developing/Templating/Template-scripts/Directives.adoc) for fetching and rendering block elements.

The directive expects a node of the type `mgnl:block` as argument, identifies the template definition of the block and calls the associated template script.

\[#assign blocks = cmsfn.children(articleContent, "mgnl:block") /\]
  \[#list blocks as block\]
    \[@cms.block content=block /\]
  \[/#list\]

### [](#_block_rendering_scripts_in_the_article_editor_submodule)Block-rendering scripts in the `article-editor` submodule

In `/templates/pages/areas`, the `article-editor` submodule already contains the following predefined block-rendering scripts used by the Stories app:

-   `articleDisplayArea.ftl` – Displays a single story.

-   `articleListArea.ftl` – Displays a list of all story.

-   `articleReferenceArea.ftl` – Displays a referenced story through the `/templates/pages/article.inc.ftl` page template script.


### [](#_examples_of_block_rendering)Examples of block rendering

The examples show how to render blocks within a [template script](#6.2@product-docs:ROOT:Developing/Templating/Template-scripts.adoc) of a page or component template. Using the Magnolia directive `cms.block`, the template script of the block is executed during the rendering of the page or component.

1.  Get story content:

    `[#assign articleContent = cmsfn.contentById(content.article, "") /]`

2.  Get the blocks for that story:
    `[#assign blocks = cmsfn.children(articleContent, "mgnl:block") /]`

3.  Retrieve all blocks for a piece of content:

    ```numberLines
    [#if articleContent?hasContent]
      [#assign blocks = cmsfn.children(articleContent, "mgnl:block") /]
      [#list blocks as block]
        [@cms.block content=block /]
      [/#list]
    [/#if]
    ```

    Line 4: The Magnolia directive `cms.block` ensures that the template script associated to the passed block is called to render the block content.

4.  Retrieve two blocks, for instance to display an excerpt of a story in a list:

    ```numberLines
    [#if articleContent?hasContent]
      [#assign blocks = cmsfn.children(articleContent, "mgnl:block") /]
      [#list blocks as block]
        [#if block?index == 2]
          [#break]
        [/#if]
        [@cms.block content=block /]
      [/#list]
    [/#if]
    ```

    Line 7: The Magnolia directive `cms.block` calls the template script associated to the passed block content.


Related topics

-   [Block definition](#6.2@product-docs:ROOT:Apps/Developing-an-app/Developing-a-custom-content-editor-app/Block-definition.adoc)

-   [Developing a custom content editor app](#6.2@product-docs:ROOT:Apps/Developing-an-app/Developing-a-custom-content-editor-app.adoc)

-   [Content Editor module](#6.2@product-docs:ROOT:Modules/List-of-modules/Content-Editor-module.adoc)

-   [Stories app](#6.2@product-docs:ROOT:Apps/List-of-apps/Stories-app.adoc)
