---
title: "Custom filters"
url: https://docs.magnolia-cms.com/product-docs/7.0/Administration/Architecture/Request-processing-and-filters/Custom-filters/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Administration > Architecture > Request processing and filters > Custom filters
---

# Custom filters

This page explains how to create and configure a custom Filter.

Please read about [Filters](../Filters/) and [request processing](../) which explains some filters used by Magnolia.

## [](#_implementation)Implementation

To ensure your filter is properly registered using Magnolia configuration, your filter should implement info.magnolia.cms.filters.MgnlFilter or extend another Magnolia filter that implements `MgnlFilter`. Extending info.magnolia.cms.filters.AbstractMgnlFilter is usually a good starting point.

Example:

```java
public class KlackerFilter extends AbstractMgnlFilter{
    @Override
    public void doFilter(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse,
          FilterChain filterChain) throws IOException, ServletException {
        httpServletResponse.setHeader("X-Clacks-Overhead", "GNU Terry Pratchett" );
        filterChain.doFilter(httpServletRequest, httpServletResponse);
    }
}
```

> **Note:** The example above is a dummy example inspired by the GNU Terry Pratchett HTTP-Header.

| Name | Value |
| --- | --- |
| ðŸ“ klacker |  |
| â¬© class | info.magnolia.documentation.examples.templates.KlackerFilter |

| Name | Value |
| --- | --- |
| ðŸ“ klacker |  |
| â¬© class | info.magnolia.documentation.examples.templates.KlackerFilter |
| â¬© enabled | true |
| â¬© KlackerMessage | Klacker messages are safe and reliable. |
| â¬© maximumKlackerNumber | 30 |

## [](#_ensure_position_in_filter_chain)Ensure position in filter chain

Filters are executed in the order they are in the chain, from top to bottom. If you do not care about execution order, you can skip this section, otherwise make sure the filter is in the right position in the chain.

Magnolia provides task classes to adapt the order of the filter via module version handler. Use info.magnolia.module.delta.FilterOrderingTask or info.magnolia.module.delta.OrderFilterBeforeTask.

The code example below is using the `FilterOrderingTask`.

> **Note:** When installing a module, you can define the position with ModuleVersionHandler#getExtraInstallTasks.

```java
public class MyModuleVersionHandler extends DefaultModuleVersionHandler {
    @Override
    protected List<Task> getExtraInstallTasks(InstallContext installContext) {
        List<Task> extraInstallTasks = new ArrayList<Task>(super.getExtraInstallTasks(installContext));
        extraInstallTasks.add(new FilterOrderingTask("klacker", new String[]{"contentType"}));
        return extraInstallTasks;
    }
}
```

> **Note:** The code above would ensure to have the filter klacker right after the contentType filter.
