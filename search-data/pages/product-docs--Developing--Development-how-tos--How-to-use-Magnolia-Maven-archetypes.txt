---
title: "How to use Magnolia Maven archetypes"
url: https://docs.magnolia-cms.com/product-docs/Developing/Development-how-tos/How-to-use-Magnolia-Maven-archetypes/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Developing > Development how-tos > How to use Magnolia Maven archetypes
---

# How to use Magnolia Maven archetypes

This page explains how to use Magnolia-specific Maven archetypes to jumpstart development of Magnolia Maven modules and projects.

Maven is a tool for managing project dependencies and building your Magnolia project.

This page describes how to configure Maven to download Magnolia modules and webapps from our [Nexus](https://nexus.magnolia-cms.com/) server, with appropriate access credentials.

## [](#_install_maven)Install maven

[Download](http://maven.apache.org/download.cgi) and [Install](http://maven.apache.org/install.html) Maven. In order to verify Maven has been installed correctly:

1.  Open a terminal or a shell.

2.  Issue the command `mvn -v`. The command should produce an output similar to this:

    ```sh
    mvn -v

    Apache Maven 3.9.11 (3e54c93...d3d825b)
    Maven home: /opt/apache-maven-3.9.11
    Java version: <JAVA_VERSION>, vendor: Eclipse Adoptium, runtime: path/to/install
    Default locale: fr_FR, platform encoding: UTF-8
    OS name: "<OPERATING_SYSTEM>"
    ```

    > **Note:** Maven keeps your user configuration and local repository under the ${user.home}/.m2/ directory. For more details, see Configuring Maven.


## [](#_set_up_magnolia_repositories)Set up Magnolia repositories

-   DX Core

-   Community


For **DX Core** projects, add the following repository to your project POM (or Maven settings profile), and follow the next sections to set up authentication.

```xml
<repositories>
  <repository>
    <id>magnolia.nexus.enterprise</id>
    <url>https://nexus.magnolia-cms.com/repository/enterprise</url>
  </repository>
</repositories>
```

This also applies to Community Edition releases in [maintenance mode](../../../../support/).

For **Community Edition** projects, use these repositories:

```xml
<repositories>
  <repository>
    <id>magnolia.nexus.public</id>
    <url>https://nexus.magnolia-cms.com/repository/public</url>
  </repository>
   <repository>
    <id>vaadin-addons</id>
    <url>https://maven.vaadin.com/vaadin-addons/</url>
  </repository>
 </repositories>
```

> **Note:** Magnolia provides additional regional repositories for US and APAC. Choose the appropriate regional URL for your environment.

For more details, see [Maven: Setting up Multiple Repositories](https://maven.apache.org/guides/mini/guide-multiple-repositories.html).

## [](#_create_a_master_password_recommended)Create a master password (recommended)

We recommend you create a master password. However, this is not mandatory.

> **Note:** For more details, see Maven’s Password Encryption.

1.  Run the following command.

    ```sh
    mvn --encrypt-master-password
    ```

    > **Note:** This command produces an encrypted version of the password similar to the example below:{jSMOWnoPFgsHVpMvz5VrIt5kRbzGpI8u+9EF1iFQyJQ=}

2.  Store the password in `~/.m2/settings-security.xml`.

    ```xml
    <settingsSecurity>
      <master>{jSMOWnoPFgsHVpMvz5VrIt5kRbzGpI8u+9EF1iFQyJQ=}</master>
    </settingsSecurity>
    ```


## [](#_set_up_credentials_in_maven_settings)Set up credentials in Maven settings

To set up or update your credentials for Maven:

1.  Log into the chosen [regional Magnolia Nexus](#_regional_magnolia_repositories) with SSO.

2.  Access your *User Token* details from the user menu.
    See more: [Working with Your User Profile](https://help.sonatype.com/en/working-with-your-user-profile.html)

3.  If you have created a master password, encrypt your user token pass code:

    ```sh
    mvn --encrypt-password ${userTokenPassCode}
    ```

4.  Finally, store the token in the format shown here.

    ```xml
    <server>
      <id>magnolia.nexus.enterprise</id> (1)
      <!-- Token, not actual username / password -->
      <username>{userTokenNameCode}</username> (2)
      <password>{userTokenPassCode}</password> (3)
    </server>
    ```

    |     |     |
    | --- | --- |
    | **1** | The Magnolia enterprise Nexus repository. The id must match the repository id in your project POM or 'magnolia-repositories' profile in maven settings. |
    | **2** | Your name code user token from Nexus. |
    | **3** | Your pass code user token from Nexus. You may use your encrypted pass code token here. |


## [](#_regional_magnolia_repositories)Regional Magnolia repositories

Magnolia provides regional repositories for better performance:

-   EU: [nexus.magnolia-cms.com](https://nexus.magnolia-cms.com)

-   US: [nexus.us.magnolia-cms.com](https://nexus.us.magnolia-cms.com)

-   APAC: [nexus.ap.magnolia-cms.com](https://nexus.ap.magnolia-cms.com)


Choose the appropriate Magnolia Nexus regional URL for your environment.

## [](#_using_magnolia_maven_archetypes)Using Magnolia Maven archetypes

You need Maven to generate Magnolia project archetypes. To do so, add the following to your Maven settings.

settings.xml

```xml
<profiles>
  <profile>
    <id>magnolia-repositories</id>
    <activation>
      <activeByDefault>true</activeByDefault>
    </activation>
    <repositories>
      <!-- required for Magnolia Maven archetypes -->
      <repository>
        <id>magnolia.nexus.public</id>
        <url>https://nexus.magnolia-cms.com/repository/public</url>
      </repository>
    </repositories>
  </profile>
</profiles>
```

> **Note:** For more details, see Maven Archetypes and repositories.

## [](#_the_archetype_plugin)The Archetype plugin

The [Maven Archetype Plugin](https://maven.apache.org/archetype/maven-archetype-plugin/) allows you to create a Maven project from an *archetype* – an existing template (a skeleton of files and directories).

The base plugin command is `mvn archetype:generate`.

-   For an overview of the parameters it accepts, see the [archetype:generate](https://maven.apache.org/archetype/maven-archetype-plugin/generate-mojo.html) page on the Apache Maven Project website.

-   For details on how the command works and how to use the interactive mode, see the [Usage](https://maven.apache.org/archetype/maven-archetype-plugin/usage.html) page on the site.


### [](#_option_a)Option A

If you already know which Magnolia archetype you want to generate, the fastest way is to supply the archetype’s [Maven coordinates](https://maven.apache.org/pom.html#Maven_Coordinates) (GAV) to the command line. For example:

```sh
mvn archetype:generate -DarchetypeGroupId=info.magnolia.maven.archetypes -DarchetypeArtifactId=magnolia-project-archetype -DarchetypeVersion=RELEASE
```

> **Warning:** If you omit the archetypeVersion, the plugin automatically picks the oldest version.

### [](#_option_b)Option B

By default, the archetype plugin collects a list of all possible archetypes, including those found at Maven Central. The list can be very long and it may take some time to generate it. To reduce the list only to available Magnolia archetypes, use the plugin command with the following `filter` option:

```sh
mvn archetype:generate -Dfilter=info.magnolia.maven.archetypes:magnolia
```

> **Tip:** If you need to interrupt the command, press CTRL + C.

## [](#_magnolia_maven_archetypes)Magnolia Maven archetypes

Magnolia provides the following archetypes:

-   The `magnolia-project-archetype` generates a Magnolia project with a parent POM and a [Magnolia webapp](../../Bundles-and-webapps/Creating-a-custom-webapp-with-Maven/).

-   The `magnolia-module-archetype` generates a Magnolia Maven module. For details, please refer to the [Modules](../../../Modules/) page.

-   The `magnolia-blossom-module-archetype` generates a Magnolia Maven module with support for the [Blossom module](../../../Modules/List-of-modules/Blossom-module/).

-   The `magnolia-cloud-project-archetype` generates a Magnolia project with both a parent POM and both the `dev` and `shared` directories. See [cloud:ROOT:Developing-for-Magnolia-in-the-cloud/Creating-and-deploying-custom-cloud-bundles.adoc](#cloud:ROOT:Developing-for-Magnolia-in-the-cloud/Creating-and-deploying-custom-cloud-bundles.adoc) for more details.


Before generating a project, the archetypes ask you to supply values for the following parameters:

  Required parametersExample valueNotes

Maven `groupId`

`com.example`

Typically reflects the name or domain of your company or projects.

Maven `artifactId`

`custom-project`

Project-specific identifier.

Maven `version`

`1.0-SNAPSHOT`

Project version. Typically, when creating a new project, use the value suggested by Maven, for example `1.0-SNAPSHOT`.

`package`

`com.example`

Package name for Java classes reflecting both your company (or domain) and the specific project.

`magnolia-bundle-version`

`6.2`

Magnolia version to be used in your custom project.

`project-name`

`Custom Project`

Project name.

`module-class-name`

`FoobarModule`

Module name.

> **Note:** This is for module archetypes only.

`blossom-version`

`3.2.1`

The version of the Magnolia Blossom module.

> **Note:** This is for the blossom module archetype only.

### [](#_discontinued_archetypes)Discontinued archetypes

As of version `1.2.5`, the following archetypes have been discontinued. Older versions may still appear if you use the filter option.

-   The `magnolia-forge-module-archetype`, used to create a Magnolia module for the former Magnolia Forge (moved to [GitHub: Magnolia Forge](https://github.com/magnolia-community)).

-   The `magnolia-theme-archetype`, used to create an STK (deprecated) theme module.


## [](#_which_archetype_version_should_i_use)Which archetype version should I use?

Use the latest archetype release: **1.2.5**.

## [](#_generated_skeletons)Generated skeletons

A creation of a *project* typically results in the following skeleton, with a few more files created in `src/main/webapp`. For details, see [Creating a custom webapp with Maven](../../Bundles-and-webapps/Creating-a-custom-webapp-with-Maven/).

```none
custom-project/
├── custom-project-webapp
│ ├── pom.xml
│ └── src
│ └── main
│ └── webapp
└── pom.xml
```

On the other hand, if you create a *module*, the skeleton will have a simpler structure (no multi-module Maven reactor), with a pre-generated Magnolia module descriptor and Java module class. See also [Module structure](../../../Modules/Module-structure/).

```none
custom-module/
├── pom.xml
└── src
    ├── main
    │ ├── java
    │ └── resources
    │ └── META-INF
    │ └── magnolia
    │ └── custom-module.xml
    └── test
```

Further reading

Magnolia

-   [Maven setup](../../Development-environment/Maven/)

-   [Creating a custom webapp with Maven](../../Bundles-and-webapps/Creating-a-custom-webapp-with-Maven/)


External

-   [Introduction to archetypes](https://maven.apache.org/guides/introduction/introduction-to-archetypes.html)

-   [Maven archetype plugin](https://maven.apache.org/archetype/maven-archetype-plugin/index.html) (concept page)

-   [archetype:generate](https://maven.apache.org/archetype/maven-archetype-plugin/generate-mojo.html) (reference page)

-   [Project creation](https://maven.apache.org/archetype/maven-archetype-plugin/usage.html)
