---
title: "Magnolia instance is down"
url: https://docs.magnolia-cms.com/paas/troubleshooting/alerts/CustomerMagnoliaDown/
category: DX Cloud
version: cloud
breadcrumb: DX Cloud > Troubleshoot > Magnolia instance is down
---

# Magnolia instance is down

This topic guides you on troubleshooting Magnolia instances that are down.

## [](#_symptom)Symptom

A `CustomerMagnoliaDown` alert is firing.

> **Note:** CustomerMagnoliaDown alerts are sent to subscribers via email.

| **Expression** | `up{tier="app"} != 1` |
| --- | --- |
| **Delay** | `30` minutes |
| **Labels** | `team: customer` |
| **Annotations** | • `summary` • `description` • `tenant` • `cluster_id` • `cluster_name` • `pod` • `instance` • `namespace` |

## [](#_solutions)Solutions

This section provides solutions that should help resolve the issue in most cases.

### [](#_prometheus_reports_404_when_collecting_metrics)Prometheus reports `404` when collecting metrics

If Magnolia is up and running but the Prometheus metrics collection returns a `404`, you can change the metrics scrape path.

Change the scrape path by adding an annotation to the service using the Magnolia instance:

```bash
kubectl -n <namespace> annotate service <deployment>-magnolia-helm-author-svc "magnolia.info/context-path"="/<app context>/.monitoring/scrape" --overwrite
```

> **Note:** The application context for author instances is usually "author", so the path should be "/author/.monitoring/scrape".Prometheus will detect the new path from the service annotation, reload its configuration and collecting metrics from Magnolia. This can take a 1 - 3 minutes.Connect to the local Prometheus instance as described above using port forwarding and check the status of the scrape jobs.

### [](#_prometheus_reports_403_when_collecting_metrics)Prometheus reports `403` when collecting metrics

This means you cannot access metrics endpoint with port forwarding. The configuration of the metrics endpoint included in the instrumentation module should allow anonymous access to the endpoint.

1.  In AdminCentral, go to the Security app.

2.  Go to the Roles tab within the app.

3.  Select the anonymous role from the list.

    1.  With **anonymous** selected, click Edit role.

    2.  Go to the Web Access tab

    3.  Ensure the role is allowed to `Get` and `Post` to `/.monitoring/*`.



### [](#_prometheus_reports_a_timeout_when_collecting_metrics)Prometheus reports a timeout when collecting metrics

If Magnolia does not respond with metrics within `10` seconds, the metrics collection job will fail. Metrics collection must fail for `30` minutes (`30` consecutive failures) for this alert to be triggered.

Unlikely scenario

This case is unlikely; failing to collect metrics for `30` minutes because of timeout shows Magnolia is highly loaded.

Other alerts, such as [Magnolia author or public slow response](../CustomerMagnoliaSlowResponse/) or [Tomcat is showing high load or slow requests](../CustomerTomcatHighLoad/), will likely fire.

### [](#_kubernetes_reports_magnolia_is_not_running)Kubernetes reports Magnolia is not running

Check Rancher or `kubectl` for the status of the Magnolia instance for indications why the Magnolia is failing to start.
