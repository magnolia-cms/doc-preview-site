---
title: "Database persistent volume is filling"
url: https://docs.magnolia-cms.com/paas/troubleshooting/alerts/CustomerDatabasePersistentVolumeFillingUp/
category: DX Cloud
version: cloud
breadcrumb: DX Cloud > Troubleshoot > Database persistent volume is filling
---

# Database persistent volume is filling

## [](#_symptom)Symptom

A `CustomerDatabasePersistentVolumeFillingUp` alert is firing.

> **Note:** CustomerDatabasePersistentVolumeFillingUp alerts are sent to subscribers via email.

## [](#_observations)Observations

Here are the details on the alerts:

### [](#_alert_customerdatabasepersistentvolumefillingup)Alert: CustomerDatabasePersistentVolumeFillingUp

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 15%;"> <col style="width: 85%;"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Expression</strong></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>predict_linear(kubelet_volume_stats_available_bytes{persistentvolumeclaim=~"data.*"}[24h], 8 * 3600) &lt; 0 and (kubelet_volume_stats_available_bytes{persistentvolumeclaim=~"data.*"} / kubelet_volume_stats_capacity_bytes{persistentvolumeclaim=~"data.*"}) * 100 &lt; 15</code></p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Delay</strong></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>30</code> minutes</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Labels</strong></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>team: customer</code></p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Annotations</strong></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="ulist"><ul><li><p><code>summary</code></p></li><li><p><code>description</code></p></li><li><p><code>tenant</code></p></li><li><p><code>cluster_id</code></p></li><li><p><code>cluster_name</code></p></li><li><p><code>namespace</code></p></li><li><p><code>pvc</code></p></li></ul></div></div></td></tr></tbody></table></div>

### [](#_determine_current_size_of_database_persistent_volume)Determine current size of database persistent volume

The name of the database persistent volume claim and its namespace are contained in the alert, for example `"database-prod-magnolia-helm-public-db-0"`.

You can find the details on the persistent volume by displaying the persistent volume claim using `kubectl`:

```bash
kubectl -n <namespace from alert> get pvc <persistent volume claim from alert>
```

Executing the above will list the size of the persistent volume shown in the `CAPACITY` column.

```bash
$ kubectl -n prod get pvc database-prod-magnolia-helm-public-db-0
NAME                                     STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
database-prod-magnolia-helm-public-db-0   Bound    pvc-e695274c-5794-4a78-afe0-e86b0efd40ed   10Gi       RWO            local-path     9d
```

## [](#_solutions)Solutions

This section provides solutions that should help resolve the issue in most cases.

### [](#_increase_the_capacity_of_the_database_persistent_volume)Increase the capacity of the database persistent volume

The space allocated to the Database persistent volume can be increased with a "hot fix" or by modifying the values of the Helm chart deploying Magnolia.

You can edit the persistent volume claim and increase the capacity in Rancher or with `kubectl`.

Edit the persistent volume claim or the persistent volume associated with the claim and increase the size of the storage resource.

```yaml
  resources:
    requests:
      storage: 10Gi (1)
```

**1**Increase the `storage` property.

> **Warning:** The storage resource for the persistent volume claim is not permanent. It may be overridden when Magnolia is redeployedwith the Helm chart.

### [](#_increase_capacity_via_helm_chart)Increase capacity via Helm chart

1.  Set the Helm chart value `db.persistence.size` to an appropriate value.

    *The default value of `db.persistence.size` is `10Gi`.*

2.  Redeploy Magnolia.
