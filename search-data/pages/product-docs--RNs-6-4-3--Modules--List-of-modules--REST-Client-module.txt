---
title: "REST Client module"
url: https://docs.magnolia-cms.com/product-docs/RNs-6-4-3/Modules/List-of-modules/REST-Client-module/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Modules > REST Client module
---

# REST Client module

| Edition | CE |
| --- | --- |
| License | [MLA](https://www.magnolia-cms.com/mla.html) , [GPL](http://www.gnu.org/licenses/gpl-3.0.html) |
| Issues | [MGNLRESTCL](https://magnolia-cms.atlassian.net/browse/MGNLRESTCL) |
| Maven site | [REST Client](https://nexus.magnolia-cms.com/#browse/browse:public:info%2Fmagnolia%2Frestclient%2Fmagnolia-rest-client%2F{magnolia-rest-client-64}) |
| Latest | {magnolia-rest-client-64} |

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../../Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.restclient</groupId>
  <artifactId>magnolia-rest-client</artifactId>
  <version>{magnolia-rest-client-64}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.restclient</groupId>
  <artifactId>magnolia-rest-client-app</artifactId>
  <version>{magnolia-rest-client-64}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

## [](#_module_description)Module description

-   `magnolia-rest-client` - Defines the API for a Magnolia REST client definition class (to configure), for a REST client factory (to create instances) and for a registry (to obtain configured clients).

-   `magnolia-rest-client-app` - Installs the client app to test and debug configured REST clients. You can test your clients in the app before using them in template scripts, models or other Java classes.


| Property | Description |
| --- | --- |
| `<rest client name>` | **required** Add a node for each REST client. The name is arbitrary, but it is good practice to use a descriptive name. The node name is used when obtaining instances of clients. |
| `baseUrl` | **required** Base URL of the REST endpoint to connect with the client. ** You can also use the `API_BASE_URL` environment variable in the value. For more details, see the [Using environment variables](#_using_environment_variables) section. | ** | You can also use the `API_BASE_URL` environment variable in the value. For more details, see the [Using environment variables](#_using_environment_variables) section. |
| ** | You can also use the `API_BASE_URL` environment variable in the value. For more details, see the [Using environment variables](#_using_environment_variables) section. |
| `class` | **optional** , *default is `info.magnolia.rest.client.ConfiguredRestClientDefinition`* REST client definition class. In additional to the default class, you may use also the `info.magnolia.openapi.client.OpenApiRestClientDefinition` to leverage a schema based on the [OpenAPI Specification](https://en.wikipedia.org/wiki/OpenAPI_Specification) . |
| `clientFactoryClass` | **optional** , *default is `info.magnolia.rest.client.factory.DefaultClientFactory`* The factory class. The default factory class is used with the `ConfiguredRestClientDefinition` . The info.magnolia.openapi.client.factory.OpenApiClientFactory class is used with `OpenApiRestClientDefinition` class. |
| `schemaUrl` | **required** if `OpenApiRestClientDefinition` is used Full path (URL or file) to the resource containing an OpenAPI schema. |
| `clientConfiguratorClass` | **optional** Custom class that specifies the client builder. Allows you to configure the client ex post, without the need to create a new factory or extend it. See also [Jakarta RESTful Web Services](https://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services) . |
| `components` | **optional** List of components (for example `ClientRequestFilter` , `ClientResponseFilter` ). Registered components will be executed on every request. **Example configuration** `baseUrl: https://cdn-url components: cdn-purge: class: com.example.ipnp.magnolia.core.caching.CdnPurgeRequest restCalls: cdn-purge-rest-call: method: post path: /.purge-cdn` |
| `enabled` | **optional** , *default* is `true` Enables or disables the client. |
| `exceptionHandlerClass` | **optional** Custom class that handles the HTTP standard response exceptions such as code 404 - `Not Found` . Any `jakarta.ws.rs.WebApplicationException` will be handled. |
| `name` | **optional** Overrides the name assigned to the client through the node name. The name should be unique. By default, file name is used in a file-based client definition. |
| `proxies` | **optional** List of info.magnolia.rest.client.proxy.ProxyDefinition objects. You can use definitions with `client.proxy()` in the `DefaultRestClient` . |

## [](#_using_environment_variables)Using environment variables

You can use environment variables in plain YAML configuration files (not in [YAML decorator files](../../../Developing/YAML/#_definition_decoration)).

Example of using environment variables

Let’s say you want to target a different url and supply different credentials depending on which Magnolia environment is making the call. For example if it’s your **UAT** or **Prod** environment. In this scenario, you could define three environment variables `API_BASE_URL`, `API_USER`, `API_PWD` and use them in your definitions.

```yml
baseUrl: !env ${API_BASE_URL}/example/todos (1)
securitySchemes:
  basic:
    $type: basic
    username: !env ${API_USER} (1)
    password: !env ${API_PWD} (1)
```

**1**The environment variables that you export from your terminal or IDE.

> **Tip:** For more, see Interpolate environment variables in light modules.

## [](#_hiding_sensitive_information)Hiding sensitive information

In the `path`, `queryParameters`, `headers`, `cookies` and `body` properties, and in the `username` and `password` properties of the basic security scheme, you can use the password template (`{@password:<passwordIdentifier>}`) and the respective password identifier from the [Passwords app](../../../Apps/List-of-apps/Passwords-app/) to hide password values in the requests. Example:

```yml
baseUrl: https://example.com
restCalls:
  foo:
    headers:
      api_key: '{@password:<UUID>}'
```

## [](#_service_interface_declaration)Service interface declaration

For [`restfn`](../../../Developing/Templating/Template-scripts/Templating-functions/restfn/) functions that utilize a service, you need to declare a service as a Java interface using [`jakarta.ws.rs`](https://docs.oracle.com/javaee/6/api/javax/ws/rs/package-summary.html) annotations. The interface must be part of a [Magnolia Maven module](../../Module-structure/).

You can use these service interfaces in `restfn` and REST clients.

**Example:** An interface to get a client that requests `api.icndb.com/jokes/random?firstName=John&lastName=Doe`.

```java
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.PathParam;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.QueryParam;
import jakarta.ws.rs.core.MediaType;

public interface IcndbService {
  @GET
  @Path("/jokes/{select}")
  @Produces(MediaType.APPLICATION_JSON)
  JsonNode joke(@PathParam("select") String select, @QueryParam("firstName") String firstName, @QueryParam("lastName") String lastName);
}
```

-   The return type of a method and the `@Produces` declaration must correspond with each other. In the example above, the `#joke` method returns an `org.codehaus.jackson.JsonNode` object, which fits well together with `@Produces(MediaType.APPLICATION_JSON)`.

-   The value of the `@Path` annotation is relative to the `baseUrl` of this Java client. In this example, the relative URL starts with `/jokes` followed by a parameter. The `baseUrl` itself is defined in the configuration.

-   Create a method for each sub-resource / parameters combination you need.


## [](#_handling_errors_and_exceptions)Handling errors and exceptions

info.magnolia.rest.client.exception.handler.RestClientExceptionHandler in module version 2 allows you to access response codes and exceptions and deal with them the way you need. See the example template scripts below that use the following client configuration:

```yml
baseUrl: 'http://httpbin.org/'
class: 'info.magnolia.rest.client.ConfiguredRestClientDefinition'
clientFactoryClass: 'info.magnolia.rest.client.factory.DefaultClientFactory'

restCalls:
  requestCode:
    method: 'GET'
    entityClass: 'java.lang.String'
    path: 'status/{code}'
    defaultValues:
      code: 404
```

### [](#_get_status)Get Status

Display the response status code ([https://jakarta.ee/specifications/platform/8/apidocs/javax/ws/rs/core/response#getStatusInfo--](https://jakarta.ee/specifications/platform/8/apidocs/javax/ws/rs/core/response#getStatusInfo--)):

```none
[#assign code500Call = restfn.call("errors", "requestCode", {"code": 500})]

<p>
    <b>code500Call:</b> ${code500Call.getEntity()?has_content?then(code500Call.getEntity(), code500Call.getStatus())}
</p>
```

![Response code](../../../_images/6-2-TmpHandlingResponseCodes_500.png)

### [](#_get_statusinfo)Get StatusInfo

Display the response status information ([https://jakarta.ee/specifications/platform/8/apidocs/javax/ws/rs/core/response#getStatusInfo--](https://jakarta.ee/specifications/platform/8/apidocs/javax/ws/rs/core/response#getStatusInfo--)):

```none
[#assign code404Call = restfn.call("errors", "requestCode", {"code": 404})]

<p>
    <b>code404Call:</b> ${code404Call.getEntity()?has_content?then(code404Call.getEntity(), code404Call.getStatusInfo())}
</p>
```

![Not found response code](../../../_images/6-2-TmpHandlingResponseCodes_404.png)

See also [RFC-2616: 10 Status Code Definitions](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html).

### [](#_non_existing_client_configuration)Non-existing client configuration

The script refers to a REST client definition (`errors1234`) that doesn’t exist:

```none
[#assign wrongClientNameCall = restfn.call("errors1234", "requestCode1234")]

<p>
    <b>wrongClientNameCall:</b> ${wrongClientNameCall.getEntity()?has_content?then(wrongClientNameCall.getEntity(), wrongClientNameCall.getStatus())}
</p>
```

![Unknown client code](../../../_images/6-2-TmpHandlingResponseCodes-wrongClient.png)

### [](#_non_existing_call_name)Non-existing call name

The script refers to a call name (`requestCode1234`) that doesn’t exist:

```none
[#assign wrongNameCall = restfn.call("errors", "requestCode1234")]
<p>
    <b>wrongNameCall:</b> ${wrongNameCall.getEntity()?has_content?then(wrongNameCall.getEntity(), wrongNameCall.getStatus())}
</p>
```

![Non-existing call name code](../../../_images/6-2-TmpHandlingResponseCodes-callName.png)

## [](#_testing_clients_in_the_rest_client_app)Testing clients in the Rest Client app

See the [REST Client app](../../../Apps/List-of-apps/REST-Client-app/) page.

You need to [configure](#_configuration) and [declare](#_service_interface_declaration) REST clients before you can test them in the app.

See also info.magnolia.rest.client.RestClient.

Related topics

-   [REST Client app](../../../Apps/List-of-apps/REST-Client-app/)

-   [UI Framework REST Extensions module](../UI-Framework-REST-Extensions-module/)

-   [Hello Magnolia - with content via REST](../../../Developing/Hello-Magnolia---with-content-via-REST/)

-   [Example REST client configurations](Example-REST-client-configurations/)
