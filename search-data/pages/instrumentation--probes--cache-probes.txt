---
title: "Cache probes"
url: https://docs.magnolia-cms.com/instrumentation/probes/cache-probes/
category: Modules
version: modules
breadcrumb: Instrumentation module > Cache probes
---

# Cache probes

[Administration](../../../product-docs/RNs-6-4-3/use-cases/administration/) [Tier 1](../../../incubator-modules/incubator-module-list/#_tier_1_modules) [Incubator](https://gitlab.magnolia-platform.com/ps/incubator/instrumentation) [INSTRUMENT](https://magnolia-cms.atlassian.net/browse/INSTRUMENT) [Magnolia 6.4](../../../product-docs/RNs-6-4-3/) compatible

The cache probes can monitor usage of caches defined within Magnolia. Unlike other probes, they are not configured in the Instrumentation module, they must be configured in the Magnolia cache configuration.

The cache probes record counts of cache operations:

-   `get` - an item is retrieved from a cache

-   `put` - an item is added to a cache

-   `clear` - remove all items in a cache

-   `remove` - remove an item from a cache


Since these operations are performed on a specific cache, the targeted cache is noted with the measurement.

The cache probes are cache listeners; they extend the AbstractCacheListener class (`info.magnolia.module.cache.listeners.AbstractCacheListener`) and are called when cache operations are performed.

The cache probes are configured in the cache configuration: `/modules/cache/config/contentCaching/<cache name>/listeners/<cache probe>`.

Depending on how your cache configuration, you may or may not have to configure a cache probe for each of your configured caches:

-   if your caches extend a common cache configuration (like defaultPageCache), you can configure a cache listener in the common cache configuration and all caches extending the source cache configuration will have cache probes.

-   if you are using site aware cacheing (see [Advanced Cache Policies module](../../../product-docs/RNs-6-4-3/Modules/List-of-modules/Advanced-cache-modules/Advanced-Cache-Policies-module/)), you can configure a cache listener in the base cache configuration for site cacheing and all site caches will have cache probes.

-   if you want to monitor some caches but not other caches, configure cache probes in the specific caches you want to monitor. Donâ€™t configure cache probes in base cache configurations shared by other caches. Cache probes can share a Prometheus metric name. This is useful when you have more than one cache and want cache metrics to have a common name. You can still give a specific cache probe a unique name.


Since cache probes will generate measurements with the same labels, including a label identifying the cache, it may be useful to have a metric name used by the cache probes when aggregating the cache statistics for all caches.

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.cache.CacheProbe` . | **** |
| `name` | The name of the cache listener. ** the name of the cache listener will not be used as the Prometheus metric name. The metric name is specified by the `probeName` property. | ** | the name of the cache listener will not be used as the Prometheus metric name. The metric name is specified by the `probeName` property. | **** |
| ** | the name of the cache listener will not be used as the Prometheus metric name. The metric name is specified by the `probeName` property. |
| `enabled` | Enable or disable the collection of cache metrics for this probe. **Default** = `true` |  |
| `probeName` | The metric name. | **** |
| `probeDescription` | A description of the metric. | **** |

| Property | Description | Required |
| --- | --- | --- |
| `class` | Should be `info.magnolia.services.instrumentation.probes.cache.CacheLogger` . | **** |
| `name` | The name of the cache listener. ** The name of the cache listener will not be used as the logger name. | ** | The name of the cache listener will not be used as the logger name. | **** |
| ** | The name of the cache listener will not be used as the logger name. |
| `loggerName` | The name of the logger. **Default** = `info.magnolia.services.instrumentation.probes.cache.CacheLogger` |  |
| `loggerFormat` | An output format suitable for use with java.text.Message (see java.text.MessageFormat). The valid placeholders are: `0` - the cache name `1` - the cache operation `2` - the cache domain `3` - the cache item path Default `{0},{1},{2},{3},{4}` | **** |
