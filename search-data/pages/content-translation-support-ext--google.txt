---
title: "CTSX Google Translator"
url: https://docs.magnolia-cms.com/content-translation-support-ext/google/
category: Modules
version: modules
breadcrumb: Content Translation Extended module > CTSX Google Translator
---

# CTSX Google Translator

[Content management](../../product-docs/7.0/use-cases/content-management/) [Incubator](https://gitlab.magnolia-platform.com/pd/extensions/ps-maintained/content-translation-support-ext) Version 5.0.0 [Magnolia 6.4](../../product-docs/7.0/) compatible

The **CTSX Google module** performs translation via the [Google Cloud Translation API](https://cloud.google.com/translate/). The Google Translation API supports more than one hundred different languages, from Afrikaans to Zulu. Used in combination, this enables translation between thousands of language pairs.

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../product-docs/7.0/Developing/Bundles-and-webapps/):

> **Important:** In order to start the Google translation process, please make sure that the core and apps modules in the Content Translation Extended have already been installed.

```xml
<dependency>
  <groupId>info.magnolia.translation</groupId>
  <artifactId>magnolia-content-translation-support-ext-google</artifactId>
  <version>5.0.0</version>
</dependency>
<dependency>
  <groupId>com.google.cloud</groupId>
  <artifactId>google-cloud-translate</artifactId>
  <version>2.22.0</version>
</dependency>
```

## [](#_configuration)Configuration

The configuration can be done using JCR or YAML.

-   Refer to the [JCR Configuration](#_jcr_configuration) for the JCR configuration.

-   Refer to the [YAML configuration](#_yaml_configuration) for instructions on how to define settings using YAML.


### [](#_jcr_configuration)JCR Configuration

Configuration of the Google service provider is handled in the module config. This provider should be configured with the following path:

```none
modules
└── content-translation-support-ext-google
    └── config
        └── translationProviders
            └── googleTranslationProviderConfigFile.yaml
```

> **Note:** For users upgrading from version 4.0.0 to version 4.1.0, ensure you move your existing translation provider configuration to the correct path.

### [](#_yaml_configuration)YAML configuration

Google service provider configuration is defined within its provider module (`magnolia-content-translation-support-ext-google`) under the following directory structure:

```plaintext
/src/main/resources/magnolia-content-translation-support-ext-google/translationProviders
```

#### [](#_required_decorations)Required decorations

This configuration can also be **decorated** to override or extend the default configuration. Decoration file should be placed under the following path:

```plaintext
<light-module-name>/decorations/magnolia-content-translation-support-ext-google/translationProviders
```

Below is an example of how to decorate Google service provider configuration within a light module:

```plaintext
light-modules/
└── my-module/
    └── decorations/
        └── magnolia-content-translation-support-ext-google/
            └── translationProviders/
                └── Google.yaml
```

### [](#_configuration_properties)Configuration properties

This provider can be configured with the following properties.

| Property | Description |
| --- | --- |
| `autoTranslationAllowed` | **optional** , default is `false`<br><br>When true the content review process (workflow) is bypassed. |
| `class` | **required**<br><br>Definition class for the translator to be used.<br><br>See `info.magnolia.translation.ext.provider.google.definition.GoogleProviderDefinition`. |
| `clientId` | **required**<br><br>Identifies the client application with Google. |
| `clientToken` | **required**<br><br>Client secret for the client ID. |
| `configName` | **required**<br><br>Identifies the configuration within Magnolia. |
| `defaultFlag` | **optional**<br><br>The default configuration used by the system in the case of multiple translation services being used. |
| `implementationClass` | **required**<br><br>Implementation class for interfacing with Google.<br><br>See `info.magnolia.translation.ext.provider.google.translator.GoogleTranslator`. |

### [](#_sample_jcr_configuration)Sample JCR configuration

```none
'config':
  'jcr:primaryType': 'mgnl:content'
  'translationProviders':
    'Google':
      'autoTranslationAllowed': 'false'
      'class': 'info.magnolia.translation.ext.provider.google.definition.GoogleProviderDefinition'
      'clientId': 'xxx'
      'clientToken': 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
      'configName': 'Google.com'
      'defaultFlag': 'true'
      'enabledFlag': 'true'
      'implementationClass': 'info.magnolia.translation.ext.provider.google.translator.GoogleTranslator'
```

### [](#_sample_yaml_decorated_configuration)Sample YAML decorated configuration

```yaml
clientId: xxxxxx
clientToken: xxxxxx-xxxxx-xxxx-xxxx-xxxx
defaultFlag: true
enabledFlag: true
```

## [](#_usage)Usage

After registration and starting, The Content Translation Support Extended (CTSX) module will bind the Google translator to Configuration field.

You can test the connection to the translator api before using.

### [](#_choose_pages)Choose Pages

1.  Choose the pages that contain the i18n items before starting the process.

    ![choose pages](_images/choose-pages.jpg)

2.  Click to 'Add to translation batch' action on action bar.

    ![add page to batch](_images/add-page-to-batch.jpg)

3.  In the 'Add to translation batch' dialog:

    1.  Input the batch name or select a existing batch.

    2.  Check to include Dependencies and include Sub-nodes if necessary.

    3.  Select Google.com in the Configuration.

    4.  Optionally, add instructions and notes.

    5.  Click Save Changes.

        ![translation batch dialog](_images/translation_batch_dialog.jpg)



### [](#_submit_batch)Submit Batch

1.  Open the Translation Extend app (under the Tools menu).

2.  From the 'Batches' tab:

    1.  Select your batch.

    2.  Edit the batch information if you want.

    3.  Click to 'Submit batch' action on action bar.

        ![submit batch](_images/submit_batch.jpg)

        > **Note:** After The retrieveTranslationResultFromExternalServiceJob has run, you will get notification for the translation result.

        > **Tip:** You can bypass this step (auto import translated content) if you set "autoTranslationAllowed=true".


3.  In the 'Translation Review' dialog:

    1.  Click to 'Assign to me' on action bar.

    2.  Can be 'Approve & Import' or Reject the task.

    3.  Click to 'Review' action for comparing the different.

        ![review the translated content](_images/review_the_translated_content.jpg)



> **Note:** It can also be 'Import' or "Reject" in the 'Comparison' tab.

### [](#_check_the_result)Check the result

After importing the translated content, you can open the selected page again for checking the result.

![check result page](_images/check_result_page.jpg)

## [](#_known_issues)Known issues

### [](#_too_many_text_segments)Too many text segments

In case of submitting many contents (such as the whole /travel page includes dependences), an error will be thrown as below. This is known issue as number of submitted segments is over google’s threshold.

```none
ERROR info.magnolia.commands.MgnlCommand: Execution is error, update to translation task item {}
com.google.cloud.translate.TranslateException: Too many text segments
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request {"code": 400, "errors" : [ { "domain" : "global", "message" : "Too many text segments", "reason" : "invalid" } ], "message" : "Too many text segments"}
```

#### [](#_jira)Jira

-   3.x [EXCONTRANS-333](https://magnolia-cms.atlassian.net/browse/EXCONTRANS-333)

-   2.9 [EXCONTRANS-334](https://magnolia-cms.atlassian.net/browse/EXCONTRANS-333)
