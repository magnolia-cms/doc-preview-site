---
title: "GraphQL API"
url: https://docs.magnolia-cms.com/product-docs/RNs-6-4-3/Developing/API/GraphQL-API/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Developing > API > GraphQL API
---

# GraphQL API

This page describes the GraphQL endpoint for obtaining JCR data as JSON. GraphQL is most convenient if you need to retrieve content from a content app (a specialized app type for managing structured content, see [Content Types](../../../Features/Content-Types/)) and you want control of exactly which properties and related content is included.

> **Note:** The example GraphQL requests and responses shown below on this page make use of the Book and Author catalog apps available in our demo bookcase light module. You can clone the module with this command:git clone {repo-git-bookcase}In the _dev/postmanCollections subfolder, the demo includes a Postman collection which you can use to quickly try all features.

## [](#_scope)Scope

Content types

Magnolia GraphQL API can only fetch content that has been declared using Magnolia [content types](../../../Features/Content-Types/). A GraphQL schema type is automatically created for every registered content type.

To check what GraphQL types are available, see the `graphqlTypes` in the [Definitions app](../../../Apps/List-of-apps/Definitions-app/) or send an [introspection](#_introspection) request to the endpoint. The following GraphQL schema types are available by default:

-   `asset`

-   `date`

-   `jcrMetadata`


> **Note:** Content type nameWhen creating content types, use singular and countable forms likebookphotographOtherwise, Magnolia GraphQL types will have double plural forms like bookses and photographses.App nameAppend -app to the name of the app, for example:books-appphotographs-appWorkspace nameIf possible, use the plural form, for example:booksphotographs

Query types

**The API is read-only.** The GraphQL `[query](https://graphql.org/learn/schema/#the-query-and-mutation-types)` type is supported. The `mutation` type has not been implemented yet.

Content from Pages and Stories apps

The API cannot retrieve content used by the [Pages app](../../../Apps/List-of-apps/Pages-app/) and the [Stories app](../../../Apps/List-of-apps/Stories-app/).

> **Note:** If accessing content from the Pages app is an important use case for you, please give us your input through the following page: Should GraphQL support pages and how.

Sorting and metadata for assets

Currently, the [sorting functionality](#_sorting) cannot be applied to the results obtained from [assets](#_retrieving_assets). Retrieving [metadata](#_retrieving_content_metadata) properties is not yet supported.

## [](#_configuration_aspects)Configuration aspects

Endpoint name and access control

By default, all GraphQL requests are mapped to `/.graphql` and pass through a filter chain. On a production instance, make sure that you have configured appropriate Access Control Lists (ACLs) and Web Access permissions for GraphQL. For more details, see [GraphQL module: Configuration](../../../Modules/List-of-modules/GraphQL-module/#_configuration).

## [](#_graphiql)GraphiQL

You can explore the API and test GraphQL queries against *GraphiQL*, a servlet installed by the `magnolia-graphql-core` module. For configuration of the servlet, see the [GraphiQL servlet](../../../Modules/List-of-modules/GraphQL-module/#_graphiql_servlet) section of the GraphQL module page.

The servlet is exposed in two forms:

-   As the [GraphQL app](../../../Apps/List-of-apps/GraphQL-app/), accessible from the the **Dev** group of the App launcher.

-   Directly in your web browser. On a localhost installation of Magnolia, the URL to access the servlet is `[http://localhost:8080/magnoliaAuthor/.graphiql](http://localhost:8080/magnoliaAuthor/.graphiql)`.


## [](#_http_methods)HTTP methods

The endpoint supports the POST and GET HTTP methods.

> **Important:** When using the POST method, you also need to set the Content-Type header in your request. The header type needs to reflect the format of content you intend to send in the request body.

### [](#_post_method)POST method

Body format for a POST request with the `application/graphql` content type header:

```graphql
{
    books(locale: "en") {
        title
    }
}
```

Body format for a POST request with the `application/json` content type header:

```json
{
  "query":"{ books ( locale: \"en\" ) { title }}"
}
```

### [](#_get_method)GET method

```bash
http://localhost:8080/.graphql?query=%7Bbooks%28locale%3A%20%22en%22%29%20%7Btitle%7D%7D
```

The value of the `query` parameter is a URL-encoded string `{books(locale: "en") {title}}`.

For more details how to create a GraphQL-valid header and body, see the [HTTP Methods, Headers, and Body](https://graphql.org/learn/serving-over-http/). All the examples below are based on the POST method.

## [](#_introspection)Introspection

> **Note:** By default, this feature is disabled in GraphQL for security reasons. If you need to enable it for development purposes, you can do so using the magnolia.graphql.introspection.enabled Magnolia property. For more details, see the Magnolia properties.

You can use the GraphQL schema [introspection](https://graphql.org/learn/introspection/) to learn about querying GraphQL types and properties. See the following example introspection request body:

```graphql
{
  __schema {
    types {
      name
    }
  }
}
```

Response

```json
{
  "data": {
    "__schema": {
      "types": [
        {
          "name": "Asset"
        },
        {
          "name": "AssetRendition"
        },
        {
          "name": "Author"
        },
        {
          "name": "AuthorSort"
        },
        {
          "name": "Book"
        },
        {
          "name": "BookSort"
        },
        {
          "name": "Boolean"
        },
        {
          "name": "Date"
        },
        {
          "name": "ID"
        },
        {
          "name": "JcrMetadata"
        },
        {
          "name": "Locale"
        },
        {
          "name": "Long"
        },
        {
          "name": "Query"
        },
        {
          "name": "String"
        },
        {
          "name": "__Directive"
        },
        {
          "name": "__DirectiveLocation"
        },
        {
          "name": "__EnumValue"
        },
        {
          "name": "__Field"
        },
        {
          "name": "__InputValue"
        },
        {
          "name": "__Schema"
        },
        {
          "name": "__Type"
        },
        {
          "name": "__TypeKind"
        }
      ]
    }
  }
}
```

| ðŸ“ My-Good-Reads |  |
| --- | --- |
| ðŸ“ Science |  |
| â¸¬ Hawking 2005 God Created the Integers |  |
| â¸¬ Hawking 1988 A Brief History of Time |  |
| â¸¬ Darwin 1859 On the Origin of Species |  |
| ðŸ“ Sci-Fi |  |
| â¸¬ Sagan 1997 Contact |  |
| â¸¬ Huxley 1932 Brave New World |  |
| â¸¬ Wells 1898 The War of the Worlds |  |

## [](#_retrieving_assets)Retrieving assets

To fetch assets, you can query either the `asset` or the `assets` field.

### [](#_single_asset)Single asset

To retrieve a single asset, use the `asset` field and supply the UUID or path of the asset.

### [](#_multiple_assets)Multiple assets

To retrieve multiple assets, use the `assets` field and provide a path or UUID of the folder containing the assets.

> **Note:** jcr is the default value for the providerId argument. Unless you need to use a different asset provider, providerId can be omitted, as shown in the second example.

### [](#_by_uuid)By UUID

```graphql
{
    asset(providerId: "jcr", id: "da35e99f-6138-40c9-b7c1-57978aa70268") {
        name
        link
        path
    }
}
```

Response

```json
{
  "data": {
    "asset": {
      "name": "darwin1859.png",
      "link": "/dam/jcr:da35e99f-6138-40c9-b7c1-57978aa70268/darwin1859.png",
      "path": "/Book-Covers/darwin1859.png"
    }
  }
}
```

### [](#_by_path)By path

```graphql
{
    assets(path: "/Book-Covers") {
        name
        link
    }
}
```

Response

```json
{
  "data": {
    "assets": [
      {
        "name": "wells1898.png",
        "link": "/dam/jcr:d6007e99-c6b1-44f4-ac6e-13c2eefa4379/wells1898.png"
      },
      {
        "name": "huxley1932.png",
        "link": "/dam/jcr:f8cfffe0-5383-4f89-ae5d-26e760dd68b8/huxley1932.png"
      },
      {
        "name": "sagan1997.png",
        "link": "/dam/jcr:a1a2ff1f-4580-4950-8576-0ec12ee35370/sagan1997.png"
      },
      {
        "name": "hawking2005.png",
        "link": "/dam/jcr:d5161c3b-2517-4476-9c18-c1c53886d555/hawking2005.png"
      },
      {
        "name": "hawking1988.png",
        "link": "/dam/jcr:f964ee41-d533-4a21-bb61-8c576498b868/hawking1988.png"
      },
      {
        "name": "darwin1859.png",
        "link": "/dam/jcr:da35e99f-6138-40c9-b7c1-57978aa70268/darwin1859.png"
      }
    ]
  }
}
```

## [](#_resolving_asset_renditions)Resolving asset renditions

To resolve asset renditions, renditions must be defined in a [theme](../../Templating/Theme/) that is linked to a [site definition](../../Templating/Site-definition/).

Letâ€™s assume there is a theme definition called `book-theme` in the `bookcase` light module:

`<light-modules-folder>/bookcase/themes/book-theme.yaml`

```yaml
imaging:
  class: info.magnolia.templating.imaging.VariationAwareImagingSupport
  variations:
    "1600":
      class: info.magnolia.templating.imaging.variation.SimpleResizeVariation
      width: 1600
    "1366":
      class: info.magnolia.templating.imaging.variation.SimpleResizeVariation
      width: 1366
    "240":
      class: info.magnolia.templating.imaging.variation.SimpleResizeVariation
      width: 240
```

The definition is linked to a site associated with the domain you query with GraphQL requests:

```yaml
<site-name>:
  theme:
    name: book-theme
```

Then you can issue the following requests.

### [](#_all_renditions)All renditions

```graphql
{
    book(path: "/My-Good-Reads/Science/Darwin-1859-On-the-Origin-of-Species") {
        title
        frontcover {
            name
            link
            renditions {
                renditionName
                link
            }
        }
    }
}
```

Response

```json
{
  "data": {
    "book": {
      "title": "On the Origin of Species by Means of Natural Selection, or the Preservation of Favoured Races in the Struggle for Life",
      "frontcover": {
        "name": "darwin1859.png",
        "link": "/dam/jcr:da35e99f-6138-40c9-b7c1-57978aa70268/darwin1859.png",
        "renditions": [
          {
            "renditionName": "1600",
            "link": "/.imaging/mte/book-theme/1600/dam/Book-Covers/darwin1859.png/jcr:content/darwin1859.png"
          },
          {
            "renditionName": "1366",
            "link": "/.imaging/mte/book-theme/1366/dam/Book-Covers/darwin1859.png/jcr:content/darwin1859.png"
          },
          {
            "renditionName": "240",
            "link": "/.imaging/mte/book-theme/240/dam/Book-Covers/darwin1859.png/jcr:content/darwin1859.png"
          }
        ]
      }
    }
  }
}
```

### [](#_one_rendition)One rendition

```graphql
{
    book(path: "/My-Good-Reads/Science/Darwin-1859-On-the-Origin-of-Species") {
        title
        frontcover {
            name
            link
            renditions(renditionNames: "1600") {
                renditionName
                link
            }
        }
    }
}
```

Response

```json
{
  "data": {
    "book": {
      "title": "On the Origin of Species by Means of Natural Selection, or the Preservation of Favoured Races in the Struggle for Life",
      "frontcover": {
        "name": "darwin1859.png",
        "link": "/dam/jcr:da35e99f-6138-40c9-b7c1-57978aa70268/darwin1859.png",
        "renditions": [
          {
            "renditionName": "1600",
            "link": "/.imaging/mte/book-theme/1600/dam/Book-Covers/darwin1859.png/jcr:content/darwin1859.png"
          }
        ]
      }
    }
  }
}
```

### [](#_more_renditions)More renditions

```graphql
{
    book(path: "/My-Good-Reads/Science/Darwin-1859-On-the-Origin-of-Species") {
        title
        frontcover {
            name
            link
            renditions(renditionNames: ["1600","240"]) {
                renditionName
                link
            }
        }
    }
}
```

Response

```json
{
  "data": {
    "book": {
      "title": "On the Origin of Species by Means of Natural Selection, or the Preservation of Favoured Races in the Struggle for Life",
      "frontcover": {
        "name": "darwin1859.png",
        "link": "/dam/jcr:da35e99f-6138-40c9-b7c1-57978aa70268/darwin1859.png",
        "renditions": [
          {
            "renditionName": "1600",
            "link": "/.imaging/mte/book-theme/1600/dam/Book-Covers/darwin1859.png/jcr:content/darwin1859.png"
          },
          {
            "renditionName": "240",
            "link": "/.imaging/mte/book-theme/240/dam/Book-Covers/darwin1859.png/jcr:content/darwin1859.png"
          }
        ]
      }
    }
  }
}
```

## [](#_retrieving_content_metadata)Retrieving content metadata

Values of the following metadata properties can be retrieved for each content item via GraphQL:

-   `created` (DateTime, [ISO 8601 - Wikipedia](https://en.wikipedia.org/wiki/ISO_8601))

-   `createdBy` (username)

-   `id` (UUID)

-   `lastModified` (DateTime, [ISO 8601 - Wikipedia](https://en.wikipedia.org/wiki/ISO_8601))

-   `lastModifiedBy` (username)

-   `name`

-   `nodeType`

-   `path`

-   `tags` (list of assigned [tags](../../../Modules/List-of-modules/Content-Tags-module/))


Example:

```graphql
{
    book(path: "/My-Good-Reads/Science/Darwin-1859-On-the-Origin-of-Species") {
        title
        _metadata {
            id
            name
            path
            nodeType
        }
    }
}
```

Response

```json
{
  "data": {
    "book": {
      "title": "On the Origin of Species by Means of Natural Selection, or the Preservation of Favoured Races in the Struggle for Life",
      "_metadata": {
        "id": "c2a5ea72-6611-4f70-8005-42e8694fc610",
        "name": "Darwin-1859-On-the-Origin-of-Species",
        "path": "/My-Good-Reads/Science/Darwin-1859-On-the-Origin-of-Species",
        "nodeType": "lib:book"
      }
    }
  }
}
```

### [](#_retrieving_other_metadata_properties)Retrieving other metadata properties

You can use the [definition decoration](../../Definition-decoration/) mechanism to define additional metadata properties that should also be retrievable through GraphQL.

In the following example, an additional `published` field is defined to allow accessing the `mgnl:lastActivated` property:

```yaml
fields:
  - name: 'published'
    type:
      name: Date
      nonNull: true
    dataFetcher:
      class: info.magnolia.graphql.jcr.datafetcher.JcrPropertyDataFetcherDefinition
      propertyName: 'mgnl:lastActivated'
```

## [](#_paging)Paging

Paging of results in Magnolia GraphQL can be achieved using the `limit` and `offset` arguments. Their default values are `20` and `0`, respectively.

In the following body definition, only the first four entries for the `title` field are requested:

```graphql
{
    books(limit: 4) {
        title
    }
}
```

Response

```json
{
  "data": {
    "books": [
      {
        "title": "The War of the Worlds"
      },
      {
        "title": "Contact"
      },
      {
        "title": "On the Origin of Species by Means of Natural Selection, or the Preservation of Favoured Races in the Struggle for Life"
      },
      {
        "title": "A Brief History of Time: From the Big Bang to Black Holes"
      }
    ]
  }
}
```

With `limit` and `offset` set to `2` and `1`, respectively, titles two and three are delivered:

```graphql
{
    books(limit: 2, offset: 1) {
        title
    }
}
```

Response

```json
{
  "data": {
    "books": [
      {
        "title": "Contact"
      },
      {
        "title": "On the Origin of Species by Means of Natural Selection, or the Preservation of Favoured Races in the Struggle for Life"
      }
    ]
  }
}
```

## [](#_sorting)Sorting

For scalar JCR-based GraphQL types, Magnolia automatically generates custom ENUMs in the form `<FIELDNAME>_ASC` and `<FIELDNAME>_DESC`. These ENUMs then describe the fields that can be sorted. Field names must be given in the upper case form.

```graphql
{
    books(sort: TITLE_DESC) {
        title
    }
}
```

Response

```json
{
  "data": {
    "books": [
      {
        "title": "The War of the Worlds"
      },
      {
        "title": "On the Origin of Species by Means of Natural Selection, or the Preservation of Favoured Races in the Struggle for Life"
      },
      {
        "title": "God Created the Integers: The Mathematical Breakthroughs That Changed History"
      },
      {
        "title": "Contact"
      },
      {
        "title": "Brave New World"
      },
      {
        "title": "A Brief History of Time: From the Big Bang to Black Holes"
      }
    ]
  }
}
```

You can also chain the sort operations, for example `sort: [AUTHOR_ASC, TITLE_ASC]` first sorts the results by the `author` property and then by the `title` property.

| Form | Meaning |
| --- | --- |
| `=` | equal |
| `<>` | not equal |
| `>` | greater than |
| `<` | lesser than |
| `â‡` | lesser than or equal |
| `>=` | greater than or equal |
| `LIKE` Can be used with: â€¢ The percentage sign ( `%` ), a wildcard character that stands for zero or more additional characters. | like |
| `ILIKE` Same as `LIKE` but case-insensitive. | case-insensitive like |

## [](#_further_resources)Further resources

-   [GraphQL Specification Versions](http://spec.graphql.org)
