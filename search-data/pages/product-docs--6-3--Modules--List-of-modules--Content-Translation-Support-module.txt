---
title: "Content Translation Support module"
url: https://docs.magnolia-cms.com/product-docs/6.3/Modules/List-of-modules/Content-Translation-Support-module/
category: Magnolia 6.3
version: 6.3
breadcrumb: DX Core > Modules > Content Translation Support module
---

# Content Translation Support module

[Content management](../../../use-cases/content-management/) Unbundled: Extension

| Edition | DX Core |
| --- | --- |
| License | [MLA](https://www.magnolia-cms.com/mla.html) |
| Issues | [MGNLCTS](https://magnolia-cms.atlassian.net/browse/MGNLCTS) |
| Maven site | [Content Translation Support](https://nexus.magnolia-cms.com/#browse/browse:enterprise:info%2Fmagnolia%2Ftranslation%2Fmagnolia-content-translation%2F3.0.1) |
| Latest | 3.0.1 |

The Content Translation Support module allows you to export and import content in translation-friendly [XLIFF](https://en.wikipedia.org/wiki/XLIFF), CSV and Excel formats. You can send a file to a translator and then import the translated content. The file includes context information and a link to the relevant content to make translation easier. The module comes with a [Content Translation app](#_content_translation_app) for managing page translation. Export formats are pluggable and can be extended to support a custom format.

## [](#_module_artifacts_have_changed)Module artifacts have changed

Please note that the artifact IDs (Maven `groupId` and `artifactId`) have changed since Magnolia 5.5.

If you have custom Java code relying on this module, you need to install a compatibility module too.

> **Tip:** Check Gitlab repo for the new module structure.

See also the [Content Translation Extended module](../../../../../content-translation-support-ext/) (CTSX) module, which provides automated translation services for your content.

> **Warning:** Note the changes in groupId and artifactId since the 2.2 release.

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../../Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.translation</groupId>
  <artifactId>magnolia-content-translation</artifactId>
  <version>3.0.1</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.translation</groupId>
  <artifactId>magnolia-content-translation-pages-integration-app</artifactId>
  <version>3.0.1</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

## [](#_configuration)Configuration

The module is configured in the following JCR nodes:

-   `/modules/translation`

-   `/modules/translation-pages-integration`


In addition, the following directories in the **Resource Files** app contain configuration by file:

-   `/translation/dialogs`

-   `/translation/fieldTypes`

-   `/translation/i18n`


## [](#_content_translation_app)Content Translation app

The Content Translation app allows you to manage the translation of pages.

-   **Export translation**: Exports i18n content of a page or tree.

-   **Import translation**: Imports translated content of a page or tree.

-   **Preview page**: Opens the page in preview mode in the [Pages app](../../../Apps/List-of-apps/Pages-app/).

-   **Publish** and **Unpublish** are subject to [workflow](../Workflow-module/).


### [](#_exporting_pages_for_translation)Exporting pages for translation

To export pages:

1.  Select a page. Subpages are included in the export file.

2.  Click **Export translation**.

3.  Select a file format

4.  Click **Export file**.


The download filename is created from the file path in the `website` workspace, with dots replacing forward slashes such as `website.travel.about.xls`. The file has the following columns (comma-separated headings in CSV or elements in XLIFF):

-   **Modification date of page**

-   **Key**: Internal identifier that consists of component UUID and field name. This is used by Magnolia to store and render translated content. Do not edit this value.

-   **Link to page**: Page URL for easy access by the translator. Click to see the translatable text in page context.

-   **Title**: A pseudo-title created by combining component type and field name, for example `Text and Image: Subheading`. This tells the translator what kind of page element he is translating.

-   **Default language**: Default language text.

-   **<language\_code>**: Columns for each locale configured for the site. This is where the translator types the language text. Already translated content can be updated and new translations added.


> **Tip:** GoogleSpreadsheetTranslationBundleWriter adds the Google Translate formula to the CSV exporter. When you upload the CSV file to Google Docs, it evaluates the formula and the text is machine-translated into the target i18n languages automatically.

### [](#_importing_translated_page_content)Importing translated page content

Once the file has been translated you can upload it in the app. The translated content is automatically included on the page.

To import translated page content:

1.  Select the page.

2.  Click **Import translation**.

3.  Upload the file.

4.  Optionally check the overwrite and import empty translations options.

5.  Click **Import file**.


In the Pages app, you can now see the translated content in the components and dialogs.

## [](#_locales)Locales

Your site definition needs to have at least one [locale](../../../Administration/Language/Language-configuration/) in addition to the default locale. Locales show up as columns in the export file.

**Example**: `travel` site definition with English and German locales.

```yml
travel:
  i18n:
    locales:
      en:
        country:
        enabled: true
        language: en
      de:
        country:
        enabled: true
        language: de
      class: info.magnolia.cms.i18n.DefaultI18nContentSupport
      enabled: true
      fallbackLocale: en
```

## [](#_importers_and_exporters)Importers and exporters

Importers and exporters are Java classes that contain business logic to convert translatable content into a convenient format. Out of the box the module provides importers and exporters for XLIFF, Excel and CSV files and an exporter for uploading to Google Docs.

Importers and exporters are configured in `/modules/translation/config`.

```yml
translation:
  config:
    importers:
      xlsImporter:
        readerImplementationClass: info.magnolia.translation.io.reader.XlsTranslationItemReader
        extension: xls
        label: contenttranslation.fileformat.xls
      csvImporter:
      xliffImporter:
    exporters:
      xlsExporter:
        writerImplementationClass: info.magnolia.translation.io.writer.XlsTranslationItemWriter
        extension: xls
        label: contenttranslation.fileformat.xls
      csvExporter:
      xliffExporter:
      googleSpreadsheetExporter:
```

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 70%;"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>class</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>Class that performs the import or export (<code>readerImplementationClass</code> and <code>writerImplementationClass</code> properties respectively).</p></div><div class="ulist"><ul><li><p><code>info.magnolia.translation.io.reader.*</code></p><div class="ulist"><ul><li><p><code>XlsTranslationItemReader</code></p></li><li><p><code>CsvTranslationItemReader</code></p></li><li><p><code>UnzippedXliffTranslationItemReader</code></p></li></ul></div></li><li><p><code>info.magnolia.translation.io.writer.*</code></p><div class="ulist"><ul><li><p><code>XlsTranslationItemWriter</code></p></li><li><p><code>CsvTranslationItemWriter</code></p></li><li><p><code>XliffTranslationItemWriter</code></p></li><li><p><code>GoogleSpreadsheetTranslationItemWriter</code></p></li></ul></div></li></ul></div><div class="paragraph"><p>You can write your own importers and exporters for other file formats, databases, or Web services that translators use.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>extension</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>File extension without the dot.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>label</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>optional</strong></p></div><div class="paragraph"><p>Extension label.</p></div></div></td></tr></tbody></table></div>

## [](#_commands)Commands

The module includes two `TranslationFile` commands that are used to export and import content in various formats for translation.

Commands are configured in `/modules/translation/commands/translation`.

```yml
translation:
  commands:
    translation:
      downloadTranslationFile:
        class: info.magnolia.translation.commands.TranslationFileDownloadCommand
      uploadTranslationFile:
        class: info.magnolia.translation.commands.TranslationFileUploadCommand
```

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 70%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Property</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><code>commands</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p><a href="../../../Developing/Commands/" class="xref page">Commands</a> folder.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>&nbsp;&nbsp;&nbsp;&nbsp; <code>translation</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>Content translation support <a href="../../../Developing/Commands/" class="xref page">catalog</a>.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code>&lt;command name&gt;</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="ulist"><ul><li><p><code>downloadTranslationFile</code>: Name of the command node to download files for translation.</p></li><li><p><code>uploadTranslationFile</code>: Name of the command node to reupload translation files.</p></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code>formPath</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>The path to the form.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code>workspace</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="paragraph"><p>Workspace name.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code>class</code></p></div></div></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p><strong>required</strong></p></div><div class="ulist"><ul><li><p><span class="inlineBean">info.magnolia.translation.commands.TranslationFileDownloadCommand</span>:</p><div class="ulist"><ul><li><p>Downloads files from a specified path in a specified format, for translation. Operates on the <code>website</code> workspace by default.</p></li><li><p>Calls the relevant <a href="#_importers_and_exporters">importers and exporters</a> class.</p></li><li><p>The exported file contains all page content nodes marked as <code>i18n</code> in the <a href="../../../Developing/Templating/Template-definition/" class="xref page">template definition</a>.</p></li><li><p>The file path in the repository is converted into the file name by replacing forward slashes with dots.</p></li></ul></div></li><li><p><span class="inlineBean">info.magnolia.translation.commands.TranslationFileUploadCommand</span>:</p><div class="ulist"><ul><li><p>Uploads translated files in a specified format to a specified path. Operates on the <code>website</code> workspace by default.</p></li><li><p>Calls the relevant <a href="#_importers_and_exporters">importers and exporters</a> class.</p></li><li><p>Content is uploaded to relevant i18n fields in the dialogs.</p></li></ul></div></li></ul></div></div></td></tr></tbody></table></div>

## [](#_action_definitions)Action definitions

The module includes some dialog actions that are used in the [Content Translation app](#_content_translation_app).

**Example**: Commit actions to download and upload files in `/translation-pages-integration/dialogs/downloadTranslationFile/actions/downloadTranslationFile` and `uploadTranslationFile`.

These actions are configured by file, for example in **Resource Files >** `/translation/dialogs/downloadTranslationFile.yaml`, not in JCR nodes.

downloadTranslationFile.yaml

```yml
form:
  properties:
    ...
actions:
  commit:
    command: downloadTranslationFile
    catalog: translation
    class: info.magnolia.translation.ui.action.TranslationFileDownloadDialogActionDefinition
  cancel:
    class: info.magnolia.ui.dialog.action.CancelDialogActionDefinition
```

uploadTranslationFile.yaml

```yml
form:
  properties:
    ...
actions:
  commit:
    command: uploadTranslationFile
    catalog: translation
    class: info.magnolia.translation.ui.action.TranslationFileUploadDialogActionDefinition
    successMessage: translation.uploadTranslationFile.executionSuccess
  cancel:
    class: info.magnolia.ui.dialog.action.CancelDialogActionDefinition
```

| Property | Description |
| --- | --- |
| `commit` | **required**<br><br>Commit action configuration. |
| `catalog` | **required**<br><br>`translation` command [catalog](../../../Developing/Commands/). |
| `class` | **required**<br><br>Action definition class. See below. |
| `command` | **required**<br><br>Name of command configuration node. |
| `label` | **optional**<br><br>Action labels: Export file and Import file. |

`info.magnolia.translation.ui.action.*` definition classes:



`TranslationFileUploadDialogActionDefinition`

Uploads the translation file.

`TranslationFileDownloadDialogActionDefinition`

Downloads the translation file.

`OpenCreateTranslationFileUploadDialogActionDefinition`

Used in the app to open the `uploadTranslationFile` dialog.

> **Note:** The downloadTranslationFile dialog is opened with info.magnolia.ui.dialog.actions.OpenDialogActionDefinition. See Action definition classes for more information.

## [](#_what_is_exported_and_imported)What is exported and imported

[Text](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Text-field/) and [rich text](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Rich-text-field/) fields are included in export files by default. [Additional fields types can be registered](#_registering_additional_field_types), but they must be configured using Magnolia 6 UI.

The type of exported content is configured in `/modules/translation/config/supportedFieldDefinitions` and `/propertiesToTranslateFinder`.

```yml
modules:
  translate:
    config:
      importers:
      exporters:
      supportedFieldDefinitions:
        richText: info.magnolia.ui.field.RichTextFieldDefinition
        text: info.magnolia.ui.field.TextFieldDefinition
      propertiesToTranslateFinder:
        class: info.magnolia.translation.finder.AdaptivePropertiesToTranslateFinder
```

| Property | Description |
| --- | --- |
| `config` | **optional**<br><br>Module configuration folder. |
| `supportedFieldDefinitions` | **required**<br><br>Defines the field types to export. |
| `<field name>` | **required**<br><br>Registers [rich text field](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Rich-text-field/) and [text field](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Text-field/) definition classes. These field types typically contain the textual i18n content. |
| `propertiesToTranslateFinder` | **required**<br><br>Node data to translate finder node. |
| `class` | **required**<br><br>info.magnolia.translation.finder.AdaptivePropertiesToTranslateFinder delegates calls to an implementation of `PropertiesToTranslateFinder` based on the modules that are currently installed. |

### [](#_registering_additional_field_types)Registering additional field types

You can register additional field types to be included in the exported file. These must be configured using *Magnolia 6 UI* (for example, `info.magnolia.ui.form.field.definition.CompositeFieldDefinition` must be updated to `info.magnolia.ui.field.CompositeFieldDefinition`).

**Example**: Registering [composite field](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Composite-field/) as a field type to export.

```yml
supportedFieldDefinitions:
  richText: info.magnolia.ui.field.RichTextFieldDefinition
  text: info.magnolia.ui.field.TextFieldDefinition
  composite: info.magnolia.ui.field.CompositeFieldDefinition
```

In addition to registration, the subfields of the composite field should have an `i18n` property set to `true`. It is not necessary for the composite field itself to have an `i18n` property.

**Example**: Composite field configuration where `text1` field will be included in the download file, but `text2` will not.

/my-module/dialogs/my-dialog.yaml

```yml
form:
  properties:
    test:
      $type: compositeField
      itemProvider: currentItemProvider
      properties:
        - name: text1
          $type: textField
          i18n: true
        - name: text2
          $type: textField
```

## [](#_i18n_content_storage)i18n content storage

You can view the translated nodes in the `website` workspace in the [JCR Browser app](../../../Apps/List-of-apps/JCR-Browser-app/). The translated content is suffixed with a locale such as `_de`. Since English is the default locale on this site, no `_en` suffix is used.

## [](#_enabling_content_translation_in_content_apps)Enabling content translation in content apps

You can enable content translation support in any content app.

**Example**: Enabling content translation in the Contacts app.

1.  Add the `i18n` property to any field you want to translate in the `detail` subapp. See [Enabling mulitlanguage content](../../../Administration/Language/Language-configuration/#_Enabling_multi_language_content) for more information.

    **Example**: New [text field](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Text-field/) called `bio` under `/modules/contacts/apps/contacts/subApps/detail/editor/form/fields/bio`.

    ```yml
    editor:
      form:
        fields:
          bio:
            $type: textField
            i18n: true
            rows: 3
    ```

2.  Configure contact translation upload and download [commands](../../../Developing/Commands/) in the `translation` [catalog](../../../Developing/Commands/) in the `translation` module. The commands are called by the dialogs configured in step 3.

    **Example**: `downloadContactTranslation` and `uploadContactTranslation` commands configured in `/modules/translation/commands/translation/commands`.

    ```yml
    commands:
      translation:
        downloadContactTranslation:
          workspace: contacts
          formPath: /modules/contacts/apps/contacts/subApps/detail/editor/form
          class: info.magnolia.translation.commands.TranslationFileDownloadCommand
        uploadContactTranslation:
          class: info.magnolia.translation.commands.TranslationFileUploadCommand
    ```

3.  Configure contact translation dialogs in any module. The easiest way to do this is to copy the `downloadTranslationFile` and `uploadTranslationFile` dialog definition files in **Resource Files** `/translation/dialogs/` and change the value of the `command` properties. These dialogs use the commands configured in step 2.

    **Example**: `downloadContactTranslation` and `uploadContactTranslation` dialogs configured in `/modules/translation/commands/translation/dialogs`.

    downloadContactTranslation.yaml

    ```yml
    form:
      properties:
        ...
    actions:
      commit:
        command: downloadContactTranslation
        catalog: translation
        class: info.magnolia.translation.ui.action.TranslationFileDownloadDialogActionDefinition
      cancel:
        class: info.magnolia.ui.dialog.action.CancelDialogActionDefinition
    ```

    uploadContactTranslation.yaml

    ```yml
    form:
      properties:
        ...
    actions:
      commit:
        command: uploadContactTranslation
        catalog: translation
        class: info.magnolia.translation.ui.action.TranslationFileUploadDialogActionDefinition
        successMessage: translation.uploadTranslationFile.executionSuccess
      cancel:
        class: info.magnolia.ui.dialog.action.CancelDialogActionDefinition
    ```

4.  Add translation download and upload actions in the `browser` subapp.

    **Example**: Adding `downloadTranslation` and `uploadTranslation` actions in the Contacts app in `/modules/contacts/apps/contacts/subApps/browser/actions`.

    ```yml
    apps:
      contacts:
        subApps:
          browser:
            actions:
              downloadTranslation:
                class: info.magnolia.ui.framework.action.OpenCreateDialogActionDefinition
                dialogName: contacts:downloadContactTranslation
                icon: icon-export
                availability:
                  rules:
                    IsNotDeletedRule:
                      implementationClass: info.magnolia.ui.framework.availability.IsNotDeletedRule
                label: Download for translation
              uploadTranslation:
                class: info.magnolia.translation.ui.action.OpenCreateTranslationFileUploadDialogActionDefinition
                dialogName: contacts:uploadContactTranslation
                icon: icon-import
                availability:
                  multiple: true
                  root: true
                  writePermissionRequired: true
                  rules:
                    IsNotDeletedRule:
                      implementationClass: info.magnolia.ui.framework.availability.IsNotDeletedRule
                label: Upload translated content
    ```

5.  Add the actions created in step 4 to `actionbar`.

    **Example**: Adding `downloadTranslation` and `uploadTranslation` actions to the `contact` section of `actionbar` in the Contacts app in `/modules/contacts/apps/contacts/subApps/browser/actionbar/sections/contact/groups/importExportActions`.

    ```yml
    browser:
      actionbar:
        sections:
          item:
            groups:
              importExportActions:
                items:
                  downloadTranslation:
                    name: downloadTranslation
                  uploadTranslation:
                    name: uploadTranslation
    ```
