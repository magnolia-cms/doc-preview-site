---
title: "Hosting the SPA"
url: https://docs.magnolia-cms.com/product-docs/7.0/Developing/headless/spa-development/SPA-hosting/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Developing > Headless docs > SPA development > Hosting the SPA
---

# Hosting the SPA

Magnolia can provide visual authoring for an SPA, PWA or frontend project hosted on any server or meta-framework.

> **Note:** We use SPA as a shorthand for all of these.

For a smooth development experience and flexible deployment, we recommend you to host your SPA externally to Magnolia. It is also possible to deploy an SPA to Magnolia via a light module. Below, we describe both approaches.

An SPA can be hosted anywhere and retrieve content from Magnolia through the REST API. This page, however, is specifically about an SPA that can be edited in the Magnolia Pages app with the Visual SPA Editor technology.

## [](#_externally_hosted_spa)Externally hosted SPA

An SPA can be running or hosted on a remote server. In this configuration, the Magnolia Page Editor loads your frontend project directly from the remote server.

This hosting mode requires version 1.2 or later of the Magnolia [`angular-editor`](https://www.npmjs.com/package/@magnolia/angular-editor), [`react-editor`](https://www.npmjs.com/package/@magnolia/react-editor), or [`vue-editor`](https://www.npmjs.com/package/@magnolia/vue-editor) npm package.

> **Tip:** During SPA development, you can specify your local React, Vue or Angular development server running on localhost so that you can take advantage of hot redeploys the instant you make changes to the frontend code.

### [](#_configuration)Configuration

The following properties are key to a correct functioning of your SPA setup:

-   `$type`

-   `baseUrl`

-   `routeTemplate`


#### [](#_the_spa_type)The SPA type

For SPA scenarios, `$type` can be one of the following values:

-   `siteSpa` - for site-aware SPA templates.

-   `spa` - for non site-aware SPA templates.


#### [](#_connecting_an_external_spa)Connecting an external SPA

In your SPA setup, you must specify the URL that will be loaded into the Magnolia Page Editor IFRAME. This is achieved with the `baseUrl` and `routeTemplate` properties, which can be defined in two ways:

-   Directly in a page template definition. For an example, see the subsection [Non site-aware external SPA](#_non_site_aware_external_spa) below.

-   For more flexibility, in a site prototype definition, shown further below in the [Site-aware external SPA](#_site_aware_external_spa) subsection.


For more details about the `baseUrl` and `routeTemplate` properties, see the table under [Common template properties](../../../Templating/Template-definition/#_common_template_properties).

> **Tip:** See also our headless SPA demo project, showcasing Angular, Vue, React and Next.js (SSR and SSG):minimal-headless-spa-demos.

#### [](#_non_site_aware_external_spa)Non site-aware external SPA

For an external SPA that is not site-aware, use `spa` as the value of the `$type` property in your page template definition.

**Example:**

```yaml
# Since Magnolia 6.2.18, SPA $type aliases are available and the renderType property is optional.
# class: info.magnolia.rendering.spa.renderer.SpaRenderableDefinition
# renderType: spa

$type: spa
title: 'React: Basic'
baseUrl: http://localhost:3100/magnoliaAuthor (1)
routeTemplate: '{{@path}}' (2)
dialog: spa-lm:pages/basic
```

|     |     |
| --- | --- |
| **1** | A base URL for the server. |
| **2** | A path and any query parameters. |

#### [](#_site_aware_external_spa)Site-aware external SPA

> **Note:** Use a site prototype definition to configure the baseUrl and routeTemplate SPA properties.

How do I do that? See [Configuring a prototype in YAML](#_configuring_a_prototype_in_yaml) below.

It can be very convenient to configure `baseUrl` and `routeTemplate` in a [site template prototype definition](../../../Templating/Site-definition/Template-prototype/) rather than in a [page template definition](../../../Templating/Template-definition/Page-definition/).

While maintained in a single site prototype definition, the properties will be applied to every page template in the site. In the page template, the `$type` must be then set to `siteSpa`.

**Example template definition:**

```yaml
# Since Magnolia 6.2.18, SPA $type aliases are available and the renderType property is optional.
# class: info.magnolia.rendering.spa.renderer.SiteAwareSpaRenderableDefinition
# renderType: site-spa

$type: siteSpa
visible: true
dialog: spa-lm:pages/basic
```

**Example site configuration:**

```yaml
my-site:
  templates:
    prototype:
      $type: spaPrototype
      baseUrl: http://localhost:3100/magnoliaAuthor
      routeTemplate: '{{@path}}'
      areas:
        extras:
          title: Extras Area
          availableComponents:
            Headline:
              id: spa-lm:components/headline
            Paragraph:
              id: spa-lm:components/paragraph
            List:
              id: spa-lm:components/list
...
```

### [](#_configuring_a_prototype_in_yaml)Configuring a prototype in YAML

While it is not possible to configure a site definition completely in YAML, you can configure the prototype in YAML and reference it in the site definition. The prototype definition can reside in any module.

To configure the prototype in YAML:

1.  In the site definition:

    1.  Set the:

        1.  `class` property to `info.magnolia.module.site.templates.ReferencingPrototypeTemplateSettings`. *This class allows you to use a prototype defined in YAML.*

        2.  `prototypeId` to the location of the YAML prototype definition in the `<module name>:<relative path to definition>` format, for example, `travel-demo:pages/prototype`.



2.  Remove the `prototype` node, if it exists.

    **Example**: `travel` site definition.

    /<module-name>/sites/travel.yaml

    ```yaml
    templates:
      class: info.magnolia.module.site.templates.ReferencingPrototypeTemplateSettings
      prototypeId: travel-demo:pages/prototype
      availability:
        class: com.example.myModule.site.CustomTemplateAvailability
    theme:
      name: travel-demo-theme
    i18n:
      class: info.magnolia.cms.i18n.DefaultI18nContentSupport
      enabled: true
      fallbackLocale: en
      locales:
        en:
          enabled: true
          language: en
        de:
          enabled: true
    ```

3.  Create the prototype YAML file in the location defined in the `prototypeId` property and set the class property to `info.magnolia.module.site.templates.PrototypeTemplateDefinition` (or a subclass).

    [https://bitbucket.org/magnolia-cms/travel-demo](https://bitbucket.org/magnolia-cms/travel-demo)


### [](#_deployment)Deployment

For deployment, you can specify:

-   The URL of a JavaScript bundle hosted on any server.

-   The URL of a meta-framework server such as NextJS, Gatsby, Nuxt or Scully.


Even projects with statically rendered pages can be authored in Magnolia. Meta-frameworks and static sites are useful for performance, SEO and social previews, among other benefits.

### [](#_next_js_related_aspects)Next.js-related aspects

For Next.js *Server Side Rendering* and Next.js *Static Site Generation* implementations, the following steps must be taken.

> **Note:** global.mgnlInPageEditor is deprecated and not necessary.

#### [](#_next_js_with_server_side_rendering_ssr)Next.js with Server Side Rendering (SSR)

1.  Use the `baseUrl` and `routeTemplate` properties in the page template definitions. Compared with a regular React implementation, Next.js SSR differs in how the code determines the page path to be fetched. In Next.js SSR, it will be read from request URL which is available through `context.resolvedUrl`.

    **Example template**

    /light-modules/nextjs-ssr-minimal-lm/templates/pages/basic.yaml (excerpt)

    ```yaml
    # Since Magnolia 6.2.18, SPA $type aliases are available and the renderType property is optional.
    # class: info.magnolia.rendering.spa.renderer.SpaRenderableDefinition
    # renderType: spa

    $type: spa
    title: 'Next.js SSR: Basic'
    baseUrl: http://localhost:3000
    routeTemplate: '/{language}{{@path}}'

    dialog: spa-lm:pages/basic
    ...
    ```


#### [](#_next_js_with_static_site_generation_ssg)Next.js with Static Site Generation (SSG)

In Next.js SSG, in order to have links working for the author instance, you need to make sure that all requests go through a preview API, for example:

/contact => /api/preview?slug=/contact

1.  Create a preview API:

    /spa/nextjs-ssg-minimal/pages/api/preview.js

    // More about Preview Mode: https://nextjs.org/docs/advanced-features/preview-mode

    export default function handler(req, res) {
      res.setPreviewData({
        query: req.query,
      });
      res.redirect(req.query.slug);
    }

2.  Again, use the `baseUrl` and `routeTemplate` properties in the page template definitions. In SSG, the page path will be read from request URL (preview API) or from a static paths array.

    **Example template**

    /light-modules/nextjs-ssg-minimal-lm/templates/pages/basic.yaml (excerpt)

    ```yaml
    # Since Magnolia 6.2.18, SPA $type aliases are available and the renderType property is optional.
    # class: info.magnolia.rendering.spa.renderer.SpaRenderableDefinition
    # renderType: spa

    $type: spa
    title: 'Next.js SSG: Basic'
    baseUrl: http://localhost:3000
    routeTemplate: '/api/preview?slug=/{language}{{@path}}'

    dialog: spa-lm:pages/basic
    ...
    ```


Unresolved include directive in modules/ROOT/pages/Developing/headless/spa-development/SPA-hosting.adoc - include::6.2@product-docs:ROOT:partial$i/\_Known-issues.adoc\[\]

## [](#_hosting_csr_spas_in_magnolia)Hosting CSR SPAs in Magnolia

Magnolia continues to support hosting Single Page Applications (SPAs) with Client-side Rendering (CSR). CSR means that the rendering of the SPA is performed on the client side, typically in the browser, using JavaScript.

Developers can host CSR SPAs by storing all necessary JavaScript, CSS, and HTML files within a Magnolia light module. These files are made accessible via the `/.resources/` endpoint, ensuring seamless delivery to the client.

To configure SPA routing effectively, developers can leverage the combination of `baseUrl`, `routeTemplate`, and, if needed, `virtualUrlMapping`. This setup allows Magnolia to serve the appropriate files for your SPA page template without relying on the deprecated `templateScript`. By configuring these properties correctly, you can achieve the same functionality as before, ensuring your CSR SPA is properly hosted and routed within Magnolia.

Related topics

Some topics below may take you to a different part of the docs site and away from the current **product-docs** section.

-   [Pages module](../../../../Modules/List-of-modules/Pages-module/)
