---
title: "Content Dependencies module"
url: https://docs.magnolia-cms.com/product-docs/Modules/List-of-modules/Content-Dependencies-module/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Modules > Content Dependencies module
---

# Content Dependencies module

[Content management](../../../use-cases/content-management/) Bundled: DX Core

| Edition | DX Core |
| --- | --- |
| License | [MLA](https://www.magnolia-cms.com/mla.html) |
| Issues | [MGNLCDEP](https://magnolia-cms.atlassian.net/browse/MGNLCDEP) |
| Maven site | [Content Dependencies](https://nexus.magnolia-cms.com/#browse/browse:enterprise:info%2Fmagnolia%2Fdependencies%2Fmagnolia-content-dependencies-core%2F4.0.0) |
| Latest | 4.0.0 |

Content dependencies are references between content items. When a page links to another page, a dependency is created. Similarly, when a page uses an asset from the [DAM](../../../use-cases/Digital-asset-management/), a dependency is created between the page and the asset.

The Content Dependencies module enables you to display and manage these relationships, whether the items reside in the same Magnolia workspace or in different ones.

With this module, you can configure:

-   A **Dependencies** tab in a content app to list where an item links to and where it is linked from. This is useful to identify related content that needs to be published together.

-   A warning dialog that appears when content with dependencies is marked for deletion. This warns editors about the risk of breaking links before they confirm the deletion.

-   A **View links** action that opens a dialog showing where the selected item is referenced. This is enabled by default in the Pages and Assets apps, and you can configure it for other content apps if needed.


## [](#_content_dependency_limitations)Content dependency limitations

Content dependencies, including those shown in the [**View links** dialog](../../../Authoring/managing-content-dependencies/) and [deletion confirmation dialogs](../../../Authoring/Deleting-and-restoring/), rely on reference data stored in the JCR. Once an item is marked for deletion, its references are removed from the repository. As a result, links from or to deleted items are no longer available to dependency checks.

-   If you view links for an asset that belongs to a page already marked for deletion (but not yet permanently deleted), no dependency is shown. If the page is later restored, the link to the asset is lost and may result in a broken reference.

-   When you check links at the folder level, dependencies are counted as distinct links, not aggregated counts of each child’s links. For example, if three assets in a folder all link to the same page, the dialog shows one incoming link (the page), not three.


> **Note:** Deletion warning dialogs are configured by default in the Pages and Assets apps.By default, dependencies are only checked between pages and assets, not against other content apps. For example, if an editor deletes an asset used in the Tours app, no warning appears. Warnings are only shown when deleting a page or an asset linked to a page.You can configure this functionality to include additional content apps if needed.

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../../Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.dependencies</groupId>
  <artifactId>magnolia-content-dependencies-core</artifactId>
  <version>4.0.0</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.dependencies</groupId>
  <artifactId>magnolia-content-dependencies-ui</artifactId>
  <version>4.0.0</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.dependencies</groupId>
  <artifactId>magnolia-content-dependencies-service</artifactId>
  <version>4.0.0</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

## [](#_configure)Configure

Use the settings in this section to add a Dependencies tab, enable dependency-aware deletion warnings, expose the **View links** action in your apps, and customize the **Broken links warning** dialog.

### [](#_add_a_dependencies_tab_to_a_dialog)Add a dependencies tab to a dialog

A typical use case is to add a dependencies tab to a page properties dialog. This is useful if you want to see any related content that needs to be published with the page.

In this example, we add a dependencies tab to [MTK’s](../MTE-module/) `basic` page dialog. The dependencies tab has two fields:

1.  List of content items that link to the item.

2.  List of content items the item links to.


`<light-module-folder>/<light-module-name>/decorations/mtk2/dialogs/pages/basic.yaml`

```yaml
form:
  properties:
    referencesTo:
      class: info.magnolia.module.dependencies.ui.field.DependenciesViewDefinition
      referencesTo: true
      references:
        pages:
          appMapping: app:pages-app:browser
          workspace: website
          referenceProperties:
            - link
            - linkTypepage #teaser component
    referencesFrom:
      class: info.magnolia.module.dependencies.ui.field.DependenciesViewDefinition
      referencesTo: false
      references:
        pages:
          appMapping: app:pages-app:browser
          workspace: website
          referenceProperties:
            - link
            - linkTypepage #teaser component
        assets:
          appMapping: app:dam:jcrBrowser
          workspace: dam
          referenceProperties:
            - image
            - thumbnail
          pathResolver:
            class: info.magnolia.module.dependencies.field.resolver.AssetPathResolverImpl
          appLocationFactory:
            class: info.magnolia.module.dependencies.field.factory.DamAppLocationFactoryImpl

  layout:
    tabs:
      - name: tabDependencies
        fields:
          - name: referencesTo
          - name: referencesFrom
```

Here is the dependencies tab after adding it to the Travel Demo’s Page properties dialog and viewing it on the About page.

-   **This content is depended upon by**:

    -   **Pages**: Lists pages that link to the page.


-   **This content depends on**:

    -   **Pages**: Lists pages the page links to.

    -   **Assets**: Lists assets added to the page.



All links are clickable and open the item in the target app.

![Dependencies tab in Page properties](../../../_images/6-1-contentDependenciesModule-aboutPageDeps.png)

| Property | Description |
| --- | --- |
| `tabDependencies` | **required**<br><br>Dependencies tab. |
| `fields` | **required**<br><br>Fields node. |
| `<field name>` | **required**<br><br>`referencesFrom` and `referencesTo` fields extend the generic `references` field. |
| `references` | **required**<br><br>References node. |
| `<workspace name>` | **required**<br><br>Arbitrary node name. One for each workspace you want to track. |
| `appMapping` | **required**<br><br>Subapp in `app:<app name>:<subapp name>` format. |
| `workspace` | **required**<br><br>Workspace name. |
| `nodeType` | **required**<br><br>Node type. |
| `referenceProperties` | **required**<br><br>See [Reference properties](#_reference_properties). |
| `pathResolver` | **optional**<br><br>Path resolver node. |
| `class` | **optional**, *default is \`info.magnolia.module.dependencies.field.resolver.PathResolverImpl\`*<br><br>Default implementation returns a node’s path. info.magnolia.module.dependencies.field.resolver.AssetPathResolverImpl implements `PathResolver` for assets. |
| `appLocationFactory` | **optional**<br><br>App location factory node. |
| `class` | **optional**, *default is \`info.magnolia.module.dependencies.field.factory.AppLocationFactoryImpl\`*<br><br>Default implementation creates an app’s location. info.magnolia.module.dependencies.field.factory.DamAppLocationFactoryImpl implements `AppLocationFactory` for the Assets app. |
| `label` | **optional**<br><br>Label displayed in dialog. |
| `class` | **required**<br><br>info.magnolia.module.dependencies.ui.field.DependenciesViewDefinition shows dependencies to and from workspaces. |
| `referencesTo` | **optional**, default is `false`<br><br>Whether items linking to the item should be included. |

### [](#_reference_properties)Reference properties

Reference properties are properties that the module uses to retrieve nodes that an item depends on. They’re typically properties that hold references to other nodes and whose value is the JCR identifier or UUID.

If you don’t include the correct reference properties in your configuration, the items don’t show up in the **depends on** section of the dependencies tab.

If you don’t include any reference properties, the three default values (`image`, `contact`, and `link`) are used.

> **Tip:** To find the correct reference properties to configure, export the JCR content or look in the JCR Browser app.

### [](#_configure_deletion_warnings_for_an_app)Configure deletion warnings for an app

The module provides dependency-aware deletion warnings in the [Pages](../../../Apps/List-of-apps/Pages-app/) and [Assets](../../../Apps/List-of-apps/Assets-app/) (JCR-stored assets only) apps by default. These warnings appear in a confirmation dialog **Links** column, which lists broken links that would result from the deletion. Each link, displayed in blue, is clickable and opens the **Links** dialog.

![Marking an item for deletion confirmation dialog](../../../_images/confirm-mark-for-deletion.png)

Deletion warnings are configured in the `confirmDeleteAsset` and `confirmMarkDeletion` [action definitions](../../../Apps/App-configuration/Action-definition/). The configuration patterns follow those outlined in the [Dependencies tab](#dependencies-tab-properties-anchor) section above.

You can configure dependency-aware delete warnings in any app by adding a `references` node to `deleteConfirmationAction`.

#### [](#_confirmmarkdeletion_action_in_the_assets_app)`confirmMarkDeletion` action in the Assets app

magnolia-content-dependencies-ui/src/main/resources/content-dependencies-ui/decorations/dam-assets-app/apps/dam.yaml

```yaml
      confirmMarkDeletion:
        icon: icon-trash
        $type: contentDependencies:deleteConfirmationAction
        references:
          website:
            nodeType: mgnl:page
            workspace: website
```

> **Note:** The viewLinks action produces the same result as the Links column in the deletion confirmation dialog, which lists any links referencing the selected item. Therefore, both the node type configuration and the workspace of contentDependencies:deleteConfirmationAction and contentDependencies:viewLinks must be the same

| Property | Description |
| --- | --- |
| `<action name>` | **required**<br><br>Action node. |
| `references` | **required**<br><br>References node. |
| `<workspace name>` | **required**<br><br>Arbitrary node name. One for each workspace you want to track. |
| `workspace` | **required**<br><br>Workspace name. |
| `nodeType` | **required**<br><br>Node type. |
| `class` | **required**<br><br>info.magnolia.module.dependencies.ui.action.DependencyAwareConfirmationActionDefinition adds dependency awareness to the action. |
| `icon` | **optional**<br><br>CSS class that identifies an icon used for the action. For available names, see [Icons](../../../Apps/Developing-an-app/General-aspects/Designing-an-app/Icons/). |
| `successActionName` | **required**<br><br>Name of action to execute on confirmation. |

### [](#_add_the_view_links_action_to_an_app)Add the **View links** action to an app

The module provides a `viewLinks` action, which opens the **Links** dialog listing where the selected item is referenced. This action works the same way as the **View links** option available by default in the Pages and Assets apps.

![View links dialog](../../../_images/authoring/view-links-dialog.png)

You can add it to other content apps as needed.

Example configuration in a custom app:

```yaml
      viewLinks:
        $type: contentDependencies:viewLinks
        icon: icon-link
        references:
          website:
            nodeType: mgnl:page
            workspace: website
```

> **Note:** The viewLinks action produces the same result as the Links column in the deletion confirmation dialog, which lists any links referencing the selected item. Therefore, both the node type configuration and the workspace of contentDependencies:deleteConfirmationAction and contentDependencies:viewLinks must be the same

| Property | Description |
| --- | --- |
| `<action name>` | **required**<br><br>Action node. In this case, `viewLinks`. |
| `references` | **required**<br><br>References node. |
| `<workspace name>` | **required**<br><br>Arbitrary node name. One for each workspace you want to track. |
| `workspace` | **required**<br><br>Workspace name. |
| `nodeType` | **required**<br><br>Node type. |
| `class` | **required**<br><br>info.magnolia.module.dependencies.ui.action.ViewLinksActionDefinition executes the action. |
| `icon` | **optional**<br><br>CSS class that identifies an icon used for the action. For available names, see [Icons](../../../Apps/Developing-an-app/General-aspects/Designing-an-app/Icons/). |

> **Note:** If you add this action to a new app, also include it in the app’s action bar so it is available to users.

### [](#_examples)Examples

Pages app (default):

```yaml
      viewLinks:
        $type: contentDependencies:viewLinks
        icon: icon-link
        references:
          website:
            nodeType: mgnl:page
            workspace: website
```

Assets app (default):

```yaml
      viewLinks:
        $type: contentDependencies:viewLinks
        icon: icon-link
        references:
          website:
            nodeType: mgnl:page
            workspace: website
```

### [](#_customize_the_broken_links_warning_dialog)Customize the **Broken links warning** dialog

The **Broken links warning** dialog is displayed when a user marks an item for deletion and then clicks a link in the **Links** column of the confirmation dialog.

For performance, the **Broken links warning** dialog shows up to 201 items and caches them for 10 seconds before fetching fresh data. You can change this behavior to suit your requirements.

content-dependencies-service/config.yaml

```yaml
defaultLimit: 201
defaultCacheExpirationTime : 10
```

| Property | Description |
| --- | --- |
| `defaultLimit` | ***optional**, default is `201`*<br><br>The maximum number of items to fetch/display in one go. By default, it shows (or requests) up to 201 items before needing another page or request. |
| `defaultCacheExpirationTime` | ***optional**, default is `10`*<br><br>How long (in seconds) the results are cached before refreshing. By default, it waits 10 seconds. After that, the dialog refetches updated data. |
