---
title: "Cache debugging"
url: https://docs.magnolia-cms.com/product-docs/RNs-6-4-3/Administration/Troubleshooting/Cache-debugging/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Administration > Troubleshooting > Cache debugging
---

# Cache debugging

When customizing the [Cache module](../../../Modules/List-of-modules/Cache-modules/) configuration or using an advanced caching strategy, it can be helpful to have some confirmation things are working as intended. By turning on the debugging features of the cache module, you can verify both cache and flush events.

| Parameter | Description |
| --- | --- |
| `behaviour` | One of three values: • **bypass** : Skips caching. This is useful for content that can’t or shouldn’t be cached. • **useCache** : Retrieves the cached item from the cache and streams it to the client. • **store** : Stores the response in the cache for future use. |
| `cacheName` | The name of the cache being used to store the result. The `defaultPageCache` is essentially the fallback cache store for requests that don’t use site-aware caching. |
| `cacheKey` | The default cache key implementation is based on the URI, server name, parameters, and request headers. ** Since the server name is likely to change from server to server, copying cached items around doesn’t prevent generating cache entries. Parameter Description `uri` The URI of the requested resource. This is the key used by the cache for storage and retrieval of the value stored by the cache. The value is the HTML generated during rendering or the binary data of the requested resource. `serverName` The requested server. `locale` The requested locale. `channel` The requested channel. Typical values are all, desktop, and mobile. Sometimes, it can be "unresolved" if the [MultiChannelFilter](../../Architecture/Request-processing-and-filters/Filters/#_channel) can’t determine the channel. `params` Any parameters passed as part of the request. `secure` Indicates if the request was made over a secure connection. `method` The request method. `POST` , `GET` , `PUT` , `DELETE` , and so on. `additionalAttributes` Any other attributes passed as part of the request. | ** | Since the server name is likely to change from server to server, copying cached items around doesn’t prevent generating cache entries. | Parameter | Description | `uri` | The URI of the requested resource. This is the key used by the cache for storage and retrieval of the value stored by the cache. The value is the HTML generated during rendering or the binary data of the requested resource. | `serverName` | The requested server. | `locale` | The requested locale. | `channel` | The requested channel. Typical values are all, desktop, and mobile. Sometimes, it can be "unresolved" if the [MultiChannelFilter](../../Architecture/Request-processing-and-filters/Filters/#_channel) can’t determine the channel. | `params` | Any parameters passed as part of the request. | `secure` | Indicates if the request was made over a secure connection. | `method` | The request method. `POST` , `GET` , `PUT` , `DELETE` , and so on. | `additionalAttributes` | Any other attributes passed as part of the request. |
| ** | Since the server name is likely to change from server to server, copying cached items around doesn’t prevent generating cache entries. |
| Parameter | Description |
| `uri` | The URI of the requested resource. This is the key used by the cache for storage and retrieval of the value stored by the cache. The value is the HTML generated during rendering or the binary data of the requested resource. |
| `serverName` | The requested server. |
| `locale` | The requested locale. |
| `channel` | The requested channel. Typical values are all, desktop, and mobile. Sometimes, it can be "unresolved" if the [MultiChannelFilter](../../Architecture/Request-processing-and-filters/Filters/#_channel) can’t determine the channel. |
| `params` | Any parameters passed as part of the request. |
| `secure` | Indicates if the request was made over a secure connection. |
| `method` | The request method. `POST` , `GET` , `PUT` , `DELETE` , and so on. |
| `additionalAttributes` | Any other attributes passed as part of the request. |
| `cachedEntry` | Cache entry keeping the content in memory. Stores a gzipped and non-gzipped version. Parameter Description `gzippedContent` Length of the gzipped content. `plainContent` Length of the plain content. `characterEncoding` Character encoding for the stored content. `contentType` Type of content being stored. `lastModificationTime` Last time the content was modified. `originalUrl` Original requesting URL. `serializableHeadersBackingList` List of serializable headers associated with the request. `statusCode` HTTP status code. `timeToLiveInSeconds` Time for how long the content should be valid. `-1` indicates forever. | Parameter | Description | `gzippedContent` | Length of the gzipped content. | `plainContent` | Length of the plain content. | `characterEncoding` | Character encoding for the stored content. | `contentType` | Type of content being stored. | `lastModificationTime` | Last time the content was modified. | `originalUrl` | Original requesting URL. | `serializableHeadersBackingList` | List of serializable headers associated with the request. | `statusCode` | HTTP status code. | `timeToLiveInSeconds` | Time for how long the content should be valid. `-1` indicates forever. |
| Parameter | Description |
| `gzippedContent` | Length of the gzipped content. |
| `plainContent` | Length of the plain content. |
| `characterEncoding` | Character encoding for the stored content. |
| `contentType` | Type of content being stored. |
| `lastModificationTime` | Last time the content was modified. |
| `originalUrl` | Original requesting URL. |
| `serializableHeadersBackingList` | List of serializable headers associated with the request. |
| `statusCode` | HTTP status code. |
| `timeToLiveInSeconds` | Time for how long the content should be valid. `-1` indicates forever. |

## [](#_flush_events)Flush events

Cache flush events can happen:

-   When publishing events complete, that is, when content is published successfully from the author to the public instance. This is the default behavior.

-   When content is updated. When debugging a custom cache configuration, it can be helpful to have these flushes indicated in the log file. For example, when using advance caching strategies like [serving old content while recaching](../../../Modules/List-of-modules/Advanced-cache-modules/Advanced-Cache-Policies-module/#_serving_old_content_while_re_caching) or [eager recaching](../../../Modules/List-of-modules/Advanced-cache-modules/Advanced-Cache-Policies-module/#_eager_re_caching).


To enable the `TRACE` level logging for flush events, use the Log Tools app or adjust the log4j2 configuration file.

### [](#_enable_flush_debugging)Enable flush debugging

With flush debugging enabled, you see the flush event indicated in the log. This also provides the name of the cache being flushed if you use multiple caches.

1.  Open the [Log Tools app](../../../Apps/List-of-apps/Log-Tools-app/).

2.  Go to the **Log Levels** tab.

3.  At the bottom of the page, enter the **Logger name**: `info.magnolia.module.cache`.

4.  Click **Add logger config** and check the entry is added to the list above at `ALL` level.


## [](#_site_aware_flush_events)Site-aware flush events

Using the [Advanced Cache module](../../../Modules/List-of-modules/Advanced-cache-modules/) you can configure workspaces to be site-aware. To do so, you must configure:

-   The site-aware flush configuration in the [Advanced Cache app](../../../Modules/List-of-modules/Advanced-cache-modules/Advanced-Cache-app-module/).

-   The mapping configuration of the site definition in the [Multisite definition](../../../Developing/Templating/Site-definition/How-to-use-Multisite/Multisite-definition-configuration/).


### [](#_enable_site_aware_flush_debugging)Enable site-aware flush debugging

#### [](#_when_publishing_completes)When publishing completes

By default, site-aware flush events happen when publishing successfully completes.

The `INFO` log level is enabled by default.

Example

```sh
INFO  info.magnolia.publishing.receiver.operation.jcr.JcrPublicationOperation 30.01.2024 13:09:27 -- About to update content under path [/travel].
INFO  info.magnolia.publishing.transactional.receiver.operation.jcr.JcrTransactionPublicationOperation 30.01.2024 13:09:27 -- 35 User superuser successfully published website:/travel on magnolia-dev-webapp-1.0-SNAPSHOT.
INFO  info.magnolia.module.cache.flushpolicy.FlushAllFromPublishingEventPolicy 30.01.2024 13:09:27 -- Invalidate cache 'defaultPageCache' after 'publish' operation.
INFO  info.magnolia.module.cache.flushpolicy.FlushAllFromPublishingEventPolicy 30.01.2024 13:09:27 -- Invalidate cache 'uuid-key-mapping' after 'publish' operation.
INFO  info.magnolia.module.advancedcache.SiteAwareFlushFromPublishingEventPolicy 30.01.2024 13:09:27 -- Invalidate cache 'travel' after 'publish' operation.
```

#### [](#_when_content_is_updated)When content is updated

You can choose to trigger site-aware flush events when content changes instead. To enable the `TRACE` level logging for flush events, use the Log Tools app or adjust the `log4j2` configuration file.

With flush debugging enabled, you see the flush event indicated in the log. This also provides the name of the cache being flushed if you use multiple caches.

1.  Open the [Log Tools app](../../../Apps/List-of-apps/Log-Tools-app/).

2.  Go to the **Log Levels** tab.

3.  At the bottom of the page, enter the **Logger name**: `info.magnolia.module.advancedcache`.

4.  Click **Add logger config** and check the entry is added to the list above at `ALL` level.

    Example

    ```sh
    INFO  ing.receiver.operation.jcr.JcrPublicationOperation: About to update content under path [/travel].
    INFO  r.operation.jcr.JcrTransactionPublicationOperation: 364 User superuser successfully published website:/travel on magnoliaPublic.
    TRACE ule.advancedcache.SiteAwareFlushAllListeningPolicy: Cache flushed: sportstation
    TRACE ule.advancedcache.SiteAwareFlushAllListeningPolicy: Cache flushed: travel
    TRACE info.magnolia.module.cache.FlushAllListeningPolicy: Cache flushed: uuid-key-mapping
    TRACE ule.advancedcache.SiteAwareFlushAllListeningPolicy: Cache flushed: defaultPageCache

    INFO  ing.receiver.operation.jcr.JcrPublicationOperation: About to update content under path [/travel/tour-type].
    INFO  r.operation.jcr.JcrTransactionPublicationOperation: 360 User superuser successfully published website:/travel/tour-type on magnoliaPublic.
    TRACE ule.advancedcache.SiteAwareFlushAllListeningPolicy: Cache flushed: travel
    TRACE ule.advancedcache.SiteAwareFlushAllListeningPolicy: Cache flushed: defaultPageCache
    TRACE info.magnolia.module.cache.FlushAllListeningPolicy: Cache flushed: uuid-key-mapping
    ```
