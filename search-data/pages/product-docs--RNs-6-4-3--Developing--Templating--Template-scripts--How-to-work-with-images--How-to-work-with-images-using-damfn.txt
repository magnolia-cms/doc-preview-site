---
title: "How to work with images using damfn"
url: https://docs.magnolia-cms.com/product-docs/RNs-6-4-3/Developing/Templating/Template-scripts/How-to-work-with-images/How-to-work-with-images-using-damfn/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Developing > Templating > Template scripts > How to work with images > How to work with images using damfn
---

# How to work with images using damfn

This page explains how to work with images and other assets stored in Magnolia [Digital asset management](../../../../../use-cases/Digital-asset-management/) using [`damfn`](../../Templating-functions/damfn/) [templating functions](../../Templating-functions/) in template scripts.

| artifactId | version |
| --- | --- |
| `magnolia-dam-imaging` | {magnolia-dam-64} |
| `magnolia-imaging-support` | {magnolia-imaging-64} |

## [](#_selecting_image_in_dialog_using_link_field)Selecting image in dialog using link field

To select an image in a dialog, use a [link field](../../../Dialog-definition/Field-definition/List-of-fields/Link-field/). It stores a reference to the selected asset.

**Example**: Code fragment from a [dialog definition](../../../Dialog-definition/).

```yml
form:
  properties:
    image:
      $type: damLinkField
```

## [](#_displaying_an_image)Displaying an image

To render an image, you need to get a link to the asset. Use the link as a value in the `src` attribute of the `img` element.

### [](#_getting_an_image_link_with_itemkey)Getting an image link with `itemKey`

Use the `#getAssetLink(itemKey)` method if you have the [`itemKey`](../../Templating-functions/Templating-function-arguments-and-return-types/#_itemkey_of_an_asset) of the image. See [Get link for asset](../../Templating-functions/damfn/#_get_link_for_asset). For instance, the `textImage` component stores `itemKey` in the `image` property. This is a very common use case.

**Example**: Getting an image link with `itemKey`. Assume that this code is executed in a component template. The current `content` node has a property named `image` where `itemKey` is stored.

\[#assign imgItemKey = content.image!\]
\[#if imgItemKey??\]
    \[#assign imgRef = damfn.getAssetLink(imgItemKey)!\]
    \[#if imgRef??\]
        <img src="${imgRef}"/>
    \[/#if\]
\[/#if\]

### [](#_getting_an_image_link_for_an_asset)Getting an image link for an asset

Use the `getLink()` method if you already have the asset. Since an \[.inlineBean\]#info.magnolia.dam.api.Asset object is a Java bean, you can use its public method `#getLink()`. You may even use the dot notation.

**Example**: Getting an image link for an asset.

\[#assign myAsset = damfn.getAsset("jcr","/photos/pool.jpg")!\]
\[#if myAsset??\]
    <img src="${myAsset.getLink()}"/>
\[/#if\]

\[#assign myAsset = damfn.getAsset("jcr","/photos/dilbert.jpg")!\]
\[#if myAsset??\]
    <img src="${myAsset.link}"/>
\[/#if\]

## [](#_displaying_resized_images)Displaying resized images

> **Note:** If you need different sizes of the same image, do not upload multiple copies (variations) of the same image to your DAM repository. Instead, upload the image only once and define image size variations in your theme.

### [](#_defining_image_variations)Defining image variations

Configure your image variations in a theme. Each variation should be a node under `<my-theme>/imaging/variations`. The variation node name is what you will be referencing in your template scripts. It is also known as *rendition name*.

**Example**: Defining three image variations in a [theme](../../../Theme/).

| Property | Description |
| --- | --- |
| `imaging` | **optional** Imaging node of the theme. |
| `class` | **required** info.magnolia.templating.imaging.VariationAwareImagingSupport provides support for image variations. |
| `variations` | **required** Map of image variations. |
| `<variation name>` | **required** Name of the variation (rendition). Choose a name that describes the variation. The name is used in template scripts to reference the variation. Add one node for every variation. |
| `class` | **required** You can use one of the available classes or create a custom one. The available properties depend on the class used for the variation. Any custom class must implement info.magnolia.imaging.variation.Variation . The [MTE module](../../../../../Modules/List-of-modules/MTE-module/) provides: • info.magnolia.templating.imaging.variation.SimpleResizeVariation to resize images to a defined size in pixels (see below for available properties). • info.magnolia.templating.imaging.variation.ImageOperationProvidingVariation to create your own image operation chain using the `mte` image generator. |
| `<properties>` | Add properties that are supported by the class used. |
| `enabled` | **optional** Enables and disables support for image variations. |
