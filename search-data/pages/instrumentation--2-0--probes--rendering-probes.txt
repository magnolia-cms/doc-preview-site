---
title: "Rendering probes"
url: https://docs.magnolia-cms.com/instrumentation/2.0/probes/rendering-probes/
category: Modules
version: modules
breadcrumb: Instrumentation module > Rendering probes
---

# Rendering probes

The rendering probes monitor the time taken to render pages, area and components by the rendering engine. Unlike most other probes, the rendering probes must be configured in the rendering engine, not the Instrumentation module.

The rendering probes can capture the following:

-   what is being rendered (a page, area or component)

-   the template being rendered

-   the path being rendered


These are included as labels to a measurement. You can use the labels in queries to narrow down the results returned.

> **Note:** The rendering probes are implemented as rendering engine listeners (info.magnolia.rendering.listeners.AbstractRenderingListener) and are called as the rendering engine is executed.

## [](#_renderingprobe)RenderingProbe

The RenderingProbe the time it takes to render pages, area and components.

### [](#_configuration_properties)Configuration properties

  PropertyDescriptionRequired

`class`

Should be `info.magnolia.services.instrumentation.probes.rendering.RenderingProbe`.

`name`

The name of the rendering listener.

> **Note:** The name of the rendering listener will not be used as the Prometheus metric name. The metric name is specified by the probeName property.

`enabled`

Enable or disable the collection of rendering metrics for this probe.

**Default** = `true`

`probeName`

The metric name.

`probeDescription`

A description of the metric.

### [](#_metrics)Metrics

| Metric | Description |
| --- | --- |
| `<metric-name>` | The configured metric name. |

### [](#_labels)Labels

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 20%;"> <col style="width: 20%;"> <col style="width: 60%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Label</th><th class="tableblock halign-left valign-top">Metric</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>What is being rendered, one of:</p></div><div class="ulist"><ul><li><p>page</p></li><li><p>area</p></li><li><p>component</p></li><li><p>unknown (if none of the above)</p></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The path of the item being rendered.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>template</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The template being rendered.</p></div><div class="paragraph"><p><strong>Format</strong> <code>&lt;module name&gt;:&lt;template path&gt;</code></p></div></div></td></tr></tbody></table></div>

### [](#_example)Example

![RenderingProbe example config](../../_images/probes/RenderingProbe-example-config.jpg)

## [](#_renderingsummaryprobe)RenderingSummaryProbe

The RenderingSummaryProbe keeps a running total of the time it takes to render pages, area and components.

RenderingSummaryProbe uses the Prometheus Summary (io.prometheus.client.Summary) collector. RenderingSummaryProbe is easier to work when creating histogram or heat maps of rendering time distributions.

### [](#_configuration_properties_2)Configuration properties

  PropertyDescriptionRequired

`class`

Should be `info.magnolia.services.instrumentation.probes.rendering.RenderingSummaryProbe`.

`name`

The name of the rendering listener.

> **Note:** The name of the rendering listener will not be used as the Prometheus metric name. The metric name is specified by the probeName property.

`enabled`

Enable or disable the collection of rendering metrics for this probe.

**Default** = `true`

`probeName`

The metric name.

`probeDescription`

A description of the metric.

### [](#_metrics_2)Metrics

| Metric | Description |
| --- | --- |
| `<metric-name>` | The configured metric name. |

### [](#_labels_2)Labels

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 20%;"> <col style="width: 20%;"> <col style="width: 60%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Label</th><th class="tableblock halign-left valign-top">Metric</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>What is being rendered, one of:</p></div><div class="ulist"><ul><li><p>page</p></li><li><p>area</p></li><li><p>component</p></li><li><p>unknown (if none of the above)</p></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The path of the item being rendered.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>template</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The template being rendered.</p></div><div class="paragraph"><p><strong>Format</strong> <code>&lt;module name&gt;:&lt;template path&gt;</code></p></div></div></td></tr></tbody></table></div>

### [](#_example_2)Example

![RenderingSummaryProbe example config](../../_images/probes/RenderingSummaryProbe-example-config.jpg)

## [](#_renderingsummaryprobe_2)RenderingSummaryProbe

Unlike other probes that report their measurements to Prometheus, the RenderingLogger probe will report rendering times to a logging destination.

RenderingLogger simply logs each rendering time along with the target, path and template to a log.

RenderingLogger can be configured to output a log in a convenient, easy to import CSV (comma separated values) text format, that can be imported for further analysis. By default, the log message created by RenderingLogger will be:

```none
{0},{1},{2},{3},{4}
```

where the placeholders above are:

-   `0` = the rendering target, either page, area, component or unknown

-   `1` = the path

-   `2` = the template

-   `3` = the rendering time in milliseconds


RenderingLogger, because it can produce a very large number of logging messages, may not be suitable for use with Magnolia instances rendering lots of items since it may reduce Magnolia performance.

> **Note:** We recommend RenderingLogger and its logging configuration to set up as follows:the rendering logging messages should be directed to a separate log destination to avoid overwhelming regular Magnolia logsthe log destination should be controlled (limited to a set size, with a set number of backups retained) to avoid taking up excessive amounts of storage

### [](#_configuration_properties_3)Configuration properties

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 30%;"> <col style="width: 60%;"> <col style="width: 10%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Property</th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Required</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>Should be <code>info.magnolia.services.instrumentation.probes.RenderingLogger</code>.</p></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The name of the rendering engine listener.</p></div><div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">The name of the rendering engine listener will not be used as the logger name.</td></tr></tbody></table></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>loggerName</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The logger name.</p></div><div class="listingblock"><div class="title">Default</div><div class="content"><pre class="highlightjs highlight"><code class="language-none hljs">info.magnolia.services.instrumentation.probes.rendering.RenderingLogger</code></pre></div></div></div></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>loggerFormat</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>An output format suitable for use with java.text.Message (see java.text.MessageFormat).</p></div><div class="paragraph"><p>The valid placeholders are:</p></div><div class="ulist"><ul><li><p><code>0</code> - the rendering target</p></li><li><p><code>1</code> - the path of the item being rendered</p></li><li><p><code>2</code> - the template ID</p></li><li><p><code>3</code> - the rendering time in milliseconds</p></li></ul></div><div class="listingblock"><div class="title">Default</div><div class="content"><pre class="highlightjs highlight"><code class="language-none hljs">{0},{1},{2},{3}</code></pre></div></div></div></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="icon"><i class="fa fa-check"></i></span></strong></p></td></tr></tbody></table></div>

### [](#_metrics_3)Metrics

| Metric | Description |
| --- | --- |
| `<metric-name>` | The configured metric name. |

### [](#_labels_3)Labels

<div class="joplin-table-wrapper"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 20%;"> <col style="width: 20%;"> <col style="width: 60%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Label</th><th class="tableblock halign-left valign-top">Metric</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>What is being rendered, one of:</p></div><div class="ulist"><ul><li><p>page</p></li><li><p>area</p></li><li><p>component</p></li><li><p>unknown (if none of the above)</p></li></ul></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The path of the item being rendered.</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>template</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;metric-name&gt;</code></p></td><td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"><p>The template being rendered.</p></div><div class="paragraph"><p><strong>Format</strong> <code>&lt;module name&gt;:&lt;template path&gt;</code></p></div></div></td></tr></tbody></table></div>

### [](#_example_3)Example

![RenderingSummaryProbe example config](../../_images/probes/RenderingSummaryProbe-example-config.jpg)

## [](#_log4j)Log4j

Here’s a simple log4j appender to capture the logging output from RenderingLogger to a log file name `monitor-rendering.log`, limited to `10` megabytes and `5` backups:

```html
<appender name="monitor-rendering" class="org.apache.log4j.RollingFileAppender">
  <param name="File" value="logs/monitor-rendering.log" />
  <param name="MaxFileSize" value="10MB" />
  <param name="MaxBackupIndex" value="5" />
  <param name="Append" value="true" />
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern" value="%d{dd.MM.yyyy HH:mm:ss},%m%n" />
  </layout>
</appender>
```

And here’s a log4j category to generate the logging messages:

```html
<category name="info.magnolia.services.instrumentation.probes.rendering.RenderingLogger">
  <priority value="DEBUG"/>
  <appender-ref ref="monitor-rendering"/>
</category>
```

> **Important:** No metrics or labels are provided; cache activity is logged rather than collected by Prometheus.
