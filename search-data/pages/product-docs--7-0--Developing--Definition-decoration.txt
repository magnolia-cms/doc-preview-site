---
title: "Definition decoration"
url: https://docs.magnolia-cms.com/product-docs/7.0/Developing/Definition-decoration/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Developing > Definition decoration
---

# Definition decoration

Definition decoration is a mechanism which allows you to change existing configured items such as apps, dialogs, field types and templates. This page explains the definition decoration concept and provides usage examples.

## [](#_definition_decoration_concept)Definition decoration concept

Definition decoration is a mechanism that allows you to change the properties and subdefinitions of an *existing* definition item.

A definition item is a configuration of a `component` to execute tasks in a Magnolia instance. [Template definitions](../Templating/Template-definition/), [dialog definitions](../Templating/Dialog-definition/), [app definitions](../../Apps/App-configuration/App-descriptor/) (also known as app descriptors), [renderer definitions](../Templating/Renderers/#_renderer_definition), [themes definitions](../Templating/Theme/#_theme_definition), [field definitions](../Templating/Dialog-definition/Field-definition/) are all examples of such definition items. They can be configured via JCR in the `configuration` workspace.

Most (but not all) of these items can be configured via YAML. All items which can be configured via YAML are registered in a specific registry. **Registered items** can be seen in the [Definitions app](../../Apps/List-of-apps/Definitions-app/).

It is possible to change definitions such as app descriptors, dialogs, field types, message views, templates, media editors and renderer definitions. Any definition bound to info.magnolia.config.registry.Registry such as info.magnolia.rendering.template.registry.TemplateDefinitionRegistry can be decorated.

Decorated definitions can originate from any source, including the JCR, YAML files or even executable code like Blossom. However, decorators themselves can only be defined via [YAML](../YAML/) for the time being.

![Module registry diagram with and without decoration](../../../RNs-6-4-3/_images/with-without-decoration.png)

## [](#_multiple_decorations)Multiple decorations

The same definition can be decorated multiple times. When a definition is decorated several times, the decorators are applied in the following order:

1.  Decorators from *Magnolia Maven modules* are applied before decorators from *light modules*. (A *Magnolia Maven module* is a Maven packaged module which contains a Magnolia [Module descriptor](../../Modules/Module-descriptor/).)

2.  If there are decorators from different Magnolia Maven modules, they are applied in the dependency order of modules declaring the decorators.

    The [Module descriptor](../../Modules/Module-descriptor/) defines [Module dependencies](../../Modules/Module-descriptor/). If `module-a` depends on `module-b`, `module-b` is loaded before `module-a`. The module dependencies of all Magnolia Maven modules together define a distinct order.

3.  If there are decorators from different Magnolia light modules, the application order can be unpredictable. You can make it predictable by defining the module loading order of your light modules in the [module descriptor](../../Modules/Module-descriptor/).


> **Caution:** When two decorators are decorating the same part of a definition, the last decoration applied wins, however, keep in mind that decorations are applied in the module load order. Find out more about module dependencies and their loading order over here.

### [](#_decorating_for_merging_or_overriding)Decorating for merging or overriding

Definition decoration changes properties and subdefinitions of an existing definition item. This change can either merge the decoration with the decorated definition or completely override it. In the latter case, you must use the [YAML `!override`](../Reusing-configuration/YAML-inherit-and-include/#_yaml_override) directive.

Have a look at [Changing the `cssFiles` property in the mtk page template `basic`](#_changing_the_cssfiles_property_in_the_mtk_page_template_basic) for examples of both merging and overriding.

> **Tip:** Removing a decoration?The only way to remove an existing decoration is to either override it with another decoration or remove the whole module with the original decoration.

## [](#_definition_decorator_file_location)Definition decorator file location

Definition decorator files must be stored in the `decorations` folder of a module. The module can be either a Maven module or a light module (see [Module structure](../../Modules/Module-structure/)). This means that it is possible to decorate definitions using the [light development](../Light-development-in-Magnolia/) approach.

> **Note:** The definition decorator resolution mechanism requires decorator file paths correspond to the following pattern:<decorating-module-name>/decorations/<target-module-name>/<definition-type>/<def-relative-path>/<def-name>.<path-within-definition>.yaml<decorating-module-name>: Module which declares the definition decorator.decorations: Decorations folder within the decorating module.<target-module-name>: Name of the module that hosts the targeted items to decorate.<definition-type>: Title of the registry containing definitions, such as apps, dialogs, fieldTypes, messageViews, templates, mediaEditors and renderers.<def-relative-path>: Path to the decorated definition within the target module, such as /pages or /components (for templates).<def-name>: Name of the decorated definition, e.g. pages for the name of an app.<path-within-definition>: Path of the decorated subdefinition, such as dam.subApps.

### [](#_magnolia_maven_module)Magnolia Maven module

```bash
my-maven-module/
└── src
    └── main
        └── resources
            └── my-module
                └── decorations
                    ├── dam-app
                    │   └── apps
                    │       └── assets.subApps.browser.contentConnector.yaml
                    ├── mtk2
                    │   └── templates
                    │       └── pages
                    │           ├── basic.cssFiles.yaml
                    │           └── basic.yaml
                    └── pages
                        └── apps
                            └── pages.yaml
```

### [](#_light_module)Light module

```bash
$magnolia.resources.dir
└── my-module
    └── decorations
        ├── dam-app
        │   └── apps
        │       └── assets.subApps.browser.contentConnector.yaml
        ├── mtk2
        │   └── templates
        │       └── pages
        │           ├── basic.cssFiles.yaml
        │           └── basic.yaml
        └── pages
            └── apps
                └── pages.yaml
```

## [](#_definition_decorator_development_in_real_time)Definition decorator development in real time

Definition decorator files are loaded in the same way as any other Magnolia resource. See [Resources](../Resources/) for more. Magnolia’s resource change observation mechanism ensures that definition decorators are updated, registered and un-registered in real time, without the necessity of a server restart. (To monitor changes in files coming from the classpath, you must enable the magnolia develop mode, see [watching changes of resources](../Resources/)).

The effect of a decorator addition, removal or modification is visible on the next decorated definition retrieval attempt.

## [](#_decoration_examples)Decoration examples

### [](#_changing_the_title_and_icon_of_an_app)Changing the title and icon of an app

/my-module/decorations/pages-app/apps/pages-app.yaml

```yml
label: My pages ...
icon: icon-content-app
```

Result:

![Decorated tile](../../../RNs-6-4-3/_images/6-2-1-definitionDecoration-decoratedTile.png)

### [](#_changing_the_root_path_of_the_data_source_of_the_dam_app)Changing the root path of the data source of the dam app

/my-module/decorations/dam/apps/dam.subApps.jcrBrowser.datasource.yaml

```yml
rootPath: /tours
```

Result:

![Definitions app showing definition items read from the corresponding registry](../../../RNs-6-4-3/_images/6-2-definitionDecoration-rootPath.png)

(Screenshot taken from the [Definitions app](../../Apps/List-of-apps/Definitions-app/), which shows definition items read from the corresponding registry. Also, notice the presence of the tick in the *Is decorated?* column and on the row with `dam`.)

### [](#_changing_the_cssfiles_property_in_the_mtk_page_template_basic)Changing the `cssFiles` property in the mtk page template `basic`

mtk2/templates/pages/basic.yaml

(excerpt)

```yml
templateScript: /mtk2/templates/pages/basic.ftl
dialog: mtk2:pages/basic
renderType: freemarker
class: info.magnolia.module.site.templates.PageTemplateDefinition
cssFiles:
  normalize:
    link: /.resources/mtk2/webresources/css/normalize-3.0.3.css
  main:
    link: /.resources/mtk2/webresources/css/html5boilerplate-main-5.3.0.css
  video:
    link: /.resources/mtk2/webresources/css/video.css
```

The original template defines three CSS files.

#### [](#_a_adding_an_additional_css_file_merging)a) Adding an additional CSS file - merging

/my-module/decorations/mtk2/templates/pages/basic.yaml

```yml
cssFiles:
  minimum:
    link: /.resources/my-module/webresources/css/minimum.css
```

![Adding an additional CSS file](../../../RNs-6-4-3/_images/6-2_definitionDecoration-defApp.png)

#### [](#_b_overriding_the_property_completely_using_override)b) Overriding the property completely - using `!override`

/my-module/decorations/mtk2/templates/pages/basic.yaml

```yml
cssFiles: !override
  minimum:
    link: /.resources/my-module/webresources/css/minimum.css
```

![Overriding the property completely - using !override](../../../RNs-6-4-3/_images/6-2_definitionDecoration-defApp_override.png)
