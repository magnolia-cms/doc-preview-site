---
title: "Cross-site security"
url: https://docs.magnolia-cms.com/product-docs/7.0/Administration/Security/Cross-site-security/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Administration > Security > Cross-site security
---

# Cross-site security

DX Core allows you to run multiple sites in a single Magnolia instance. In a multisite scenario, allowing the content of one site to be accessed through the URL of a sibling site hurts search engine optimization (SEO). Web crawlers interpret the sibling content as duplicate content, that is the same content but visible through a different URL. Content should only be accessible through one own domain name for each site.

Magnolia provides two ways to prevent cross-site access:

-   [Cross-site security filter](#_cross_site_security_filter) grants and denies the permission to access a site through a particular domain name. For example, if you only grant access to the travel site through `travel-demo.magnolia-cms.com`, no other URL can be used to access the content. When a user tries to access one siteâ€™s content through another siteâ€™s domain name, the system displays an HTTP 404 error (page not found).

-   [Site-specific ACL](#_site_specific_acls) grants or denies the permission to access a site to a particular role. For example, if you deny the `anonymous` role access to a site then anonymous users will see a login box. They must authenticate themselves in order to gain access to the content through a more permissive role. Use site-specific ACLs if you want to make sibling site content available through the same URL but only for authenticated users such as registered members. A Web crawler such as Googlebot, which is equal to an anonymous user, cannot see the content and will not penalize your SEO efforts for duplicate content.


You can use either mechanism alone or both mechanisms together. If you use them together, remember that the [cross-site security filter](../../Architecture/Request-processing-and-filters/Filters/#_cross_site_security) is executed before the [URI security filter](../../Architecture/Request-processing-and-filters/Filters/#_uri_security) in the Magnolia filter chain. This means that the cross-site filter must grant permission to access the site first. Only then will roles and ACLs be evaluated.

The [cross-site security filter](../../Architecture/Request-processing-and-filters/Filters/#_cross_site_security) is executed in the Magnolia filter chain before the URI security filter.

| Node name | Value |
| --- | --- |
| â¸¬ fallback |  |
| â¸¬ travel |  |
| â¸¬ domains |  |
| â¸¬ travel-demo |  |
| â¬© name | travel-demo.magnolia-cms.com |
| â¸¬ mappings |  |
| â¸¬ website |  |
| â¬© URIPrefix |  |
| â¬© handlePrefix | /travel |
| â¬© repository | website |
| â¸¬ templates |  |
| â¸¬ theme |  |
| â¸¬ i18n |  |
| â¸¬ sportstation |  |
| â¸¬ domains |  |
| â¸¬ sportstation |  |
| â¬© name | sportstation.magnolia-cms.com |
| â¸¬ mappings |  |
| â¸¬ templates |  |
| â¸¬ theme |  |
| â¸¬ i18n |  |
| â¬© extends | ./travel |

| Node name | Value |
| --- | --- |
| ðŸ“ server |  |
| ðŸ“ filters |  |
| â€¦â€‹ |  |
| ðŸ“ crossSite |  |
| â¸¬ bypasses |  |
| â¸¬ dotMagnolia |  |
| â¸¬ resources |  |
| â¸¬ resolvers |  |
| â¸¬ allToAll |  |
| â¬© enabled | true |
| â¬© fromDomain | .* |
| â¬© toSite | .* |
| â¬© class | info.magnolia.multisite.filters.CrossSiteSecurityFilter |
| â¬© enabled | true |

## [](#_site_specific_acls)Site-specific ACLs

You can also prevent cross-site access using ACLs. This is the recommended practice if you have authenticated users who should have cross-site access when they are logged in.

> **Note:** When whitelisting for multisite, you need to allow both grant and siteGrant rules in SiteUriSecurityFilter.

The `<site name>` parameter makes an ACL rule site specific. You can use the site name in URLs and paths. Enclose the name in angle brackets (`< >`) at the beginning of the rule. The system applies the ACL when a matching site definition node exists.

Example scenario

The ACL rule here prevents cross-site access from the `sportstation` site to the `travel` site.

1.  On the public instance, create a new role, for example `cross-site`.

2.  Assign the *Web access* `Deny`: `<travel>*` rule to the `cross-site` role.

3.  Assign the `cross-site` role to the `anonymous` system user.

4.  Now, while anonymous requests can fetch content from [`https://sportstation.magnolia-cms.com`](https://sportstation.magnolia-cms.com), the standard login form is displayed for requests for [`https://sportstation.magnolia-cms.com/travel`](https://sportstation.magnolia-cms.com/travel).


## [](#_filters_that_control_site_security)Filters that control site security

Three filters control site security:

-   [Multisite](../../Architecture/Request-processing-and-filters/Filters/#_multisite) filter (info.magnolia.multisite.filters.MultiSiteFilter) initializes multidomain support and makes domain related properties available in the aggregation state. This filter finds a domain name that matches a name configured in a site definition.

-   [Cross-site security](../../Architecture/Request-processing-and-filters/Filters/#_cross_site_security) filter (info.magnolia.multisite.filters.CrossSiteSecurityFilter) handles cross-site security. It controls site access based on registered resolvers. This filter imports info.magnolia.multisite.CrossSiteAccessResolver, which makes a number of properties available in the filter configuration.

-   [Site URI security](../../Architecture/Request-processing-and-filters/Filters/#_uri_security) filter (info.magnolia.multisite.filters.SiteUriSecurityFilter) provides site-aware URI security. This filter extends the Community Edition [URI security filter](../../Architecture/Request-processing-and-filters/Filters/#_uri_security), which checks if the current user has permissions to the requested resource. The following permissions are taken into consideration:

    -   URI ACLs of the userâ€™s roles.

    -   URI ACLs of the roles in the user group.
