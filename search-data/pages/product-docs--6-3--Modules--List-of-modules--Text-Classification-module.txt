---
title: "Text Classification module"
url: https://docs.magnolia-cms.com/product-docs/6.3/Modules/List-of-modules/Text-Classification-module/
category: Magnolia 6.3
version: 6.3
breadcrumb: DX Core > Modules > Text Classification module
---

# Text Classification module

| Download | [Multiple submodules](#Installing with maven) |
| --- | --- |
| Edition | DX Core |
| License | [MLA](https://www.magnolia-cms.com/mla.html) |
| Issues | [TXTREC](https://magnolia-cms.atlassian.net/browse/TXTREC) |
| Maven site | [Text Classification](https://nexus.magnolia-cms.com/#browse/browse:enterprise:info%2Fmagnolia%2Fai%2Ftext%2Fmagnolia-text-classification%2F{magnolia-text-classification-63}) |
| Latest | {magnolia-text-classification-63} |

| artifactID | Description |
| --- | --- |
| `magnolia-text-classification-parent` | Parent reactor. |
| `magnolia-text-classification` | Provides the text classification module and service. |
| `magnolia-text-classification-api` | Provides an API to classify text. |
| `magnolia-amazon-text-classification` | Provides functionality to classify text via [Amazon Comprehend](https://aws.amazon.com/comprehend/) . |
| `magnolia-pages-content-tags-integration` | Provides functionality to integrate [content tags](../Content-Tags-module/) and the text classification service using [decorations](../../../Developing/Definition-decoration/) in the Pages app. |
| `magnolia-pages-content-tags-integration-compatibility` | Magnolia 6.2 compatibility submodule that provides the `CompatibilityPageTextAggregator` . This text aggregator gathers texts according to both old and new API dialogs of page areas and components. |

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../../../RNs-6-4-3/Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.ai.text</groupId>
  <artifactId>magnolia-text-classification</artifactId>
  <version>{magnolia-text-classification-63}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.ai.text</groupId>
  <artifactId>magnolia-text-classification-api</artifactId>
  <version>{magnolia-text-classification-63}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.ai.text</groupId>
  <artifactId>magnolia-amazon-text-classification</artifactId>
  <version>{magnolia-text-classification-63}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.ai.text</groupId>
  <artifactId>magnolia-pages-content-tags-integration</artifactId>
  <version>{magnolia-text-classification-63}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

```xml
<dependency>
  <groupId>info.magnolia.ai.text</groupId>
  <artifactId>magnolia-pages-content-tags-integration-compatibility</artifactId>
  <version>{magnolia-text-classification-63}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

| ðŸ“ `aws-credentials` |  |
| --- | --- |
|  | ** `aws_access_key_id` |
|  | ** `aws_secret_access_key` |

## [](#_configuring_text_aggregators)Configuring text aggregators

The `pages-content-tags-integration` module brings the content-tags functionality to the Pages app and handles aggregating text from the `website` workspace.

The `pages-content-tags-integration-`**`compatibility`** module handles aggregating text for both the legacy [Magnolia 5 UI Pages app and the new 6 UI Pages app](#6.2@product-docs:ROOT:Upgrading-to-Magnolia/Changes-in-Magnolia-6-UI.adoc).

Text aggregators collect and aggregate the content that the classification service analyzes and generates tags from. You can specify from which field types content should be taken in the text aggregator configuration.

### [](#_defining_field_types)Defining field types

By default, the text aggregator for the Pages app gathers text from [text](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Text-field/), [rich text](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Rich-text-field/), [composite](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Composite-field/), and [switchable](../../../Developing/Templating/Dialog-definition/Field-definition/List-of-fields/Switchable-field/) field types.

`` text-classification/src/main/resources/text-classification/config.yaml` ``

```yml
aggregateDefinition:
  fieldTypes: [text, textField, richText, richTextField, composite, compositeField, switchable, switchableField]
```

### [](#_excluding_terms_from_the_classification_tags)Excluding terms from the classification tags

You can exclude the terms you donâ€™t want to appear in your tags. For example, you may want to exclude your company name.

1.  Open `/text-classification/config.yaml` in the Resource files app.

2.  Add comma-separated terms to the `excludedTerms` list.

    In this example, the words *ACME*, *corporation*, and *coyote* are excluded:

    `` text-classification/src/main/resources/text-classification/config.yaml` ``

    ```yml
    termFilteringDefinition:
      excludedTerms: [ACME, corporation, coyote]
    ```


> **Note:** The list of excluded terms is case insensitive.

| Property | Description |
| --- | --- |
| `workspaceClassificationConfigurations` | **required** |
| `website` | **required** Arbitrary, unique name for the decoration configuration. |
| `textAggregatorClassName` | **required** Fully qualified classname for your text aggregator. Example: info.magnolia.ai.text.PageTextAggregator |
| `workspace` | **required** The workspace where the content to be analyzed is stored. |
| `nodeType` | **required** The name of the JCR node type for storing an item of the given content type. Example: `mgnl:page` |

## [](#_creating_custom_text_classifiers)Creating custom text classifiers

The `magnolia-amazon-text-classification` submodule provides an out-of-the-box implementation to use Amazon Comprehend.

However, if you want to use another third-party text classification service to classify and tag your content, you can write your own custom text classifier implementation.

Before configuring the text classifier, make sure you have administrator access to your third-party classification service, including the API documentation.

To create a custom text classifier you must implement the info.magnolia.ai.text.TextClassifier interface.

Note that you can inject the `TextClassifier` interface as a component in any running instance of Magnolia.

`info.magnolia.ai.text.TextClassifier` interface

```java
/**
 * Commons interface to classify text.
 */
public interface TextClassifier {

    /**
     * Takes a {@link String text} as parameter and returns a {@link Collection collection}
     * of {@link TextLabel Text label}s as output.
     *
     * <p>
     *     Returns empty collection for the cases below:
     *     <li>Upon exception</li>
     *     <li>Text couldn't be classified</li>
     * </p>
     */
    Collection<TextLabel> classify(String text);

    /**
     * Takes a collection containing the text of the input documents as a parameter.
     *
     * @param texts
     *        A collection containing the text of the input documents.
     * @return Returns a {@link Map map} where keys are input texts, values are {@link Collection collection}s of detected {@link TextLabel Text label}s
     *         for the input text or empty collections if an error occurs while processing the input text.
     *         The returned map preserves the order of the texts in the input collection.
     *
     * <p>
     *     Returns an empty map for the cases below:
     *     <li>Input {@link Collection collection} is null or empty</li>
     *     <li>All documents in input {@link Collection collection} are processed with an error</li>
     * </p>
     */
    default Map<String, Collection<TextLabel>> classify(Collection<String> texts) {
        if (CollectionUtils.isNotEmpty(texts)) {
            return texts.stream()
                    .collect(Collectors.toMap(mapper -> mapper, this::classify));
        }
        return Collections.emptyMap();
    }
}
```

> **Note:** Only one TextClassifier should be used in a Magnolia instance. Remove the out-of-the-box AmazonTextClassifier if you choose to implement your own.If you have more than one module that specifies the TextClassifier implementation in the module class, the TextClassifier from the module that was started last is used.

See the following files for an example implementation:

-   info.magnolia.ai.text.amazon.AmazonTextClassifier

-   `META-INF/magnolia/amazon-text-classification.xml`


## [](#_running_text_classification)Running text classification

The text classification and tagging action are executed during the startup of the author instance. You can also trigger the action manually in the Pages app by selecting one or more pages and clicking the **Run classification** action.

Pages that are already tagged are marked as such using a JCR property called `lastTaggingAttemptDateByTextClassifier`. Executing the manual classification action forces a new tag to be set even if the content was previously tagged.

The text classification feature is available only on author instances.

## [](#_removing_tags)Removing tags

Once a page is tagged, you can remove tags by selecting the page and clicking the **Modify tags** action in the Pages app.

In the dialog box that opens, you can remove individual tags or click **Remove all tags**.

> **Warning:** Note that content tagging currently has an issue when creating tags of words with accented characters. For example, GenÃ¨ve is tagged as Gen-ve. This means that searching for the tag Geneve or GenÃ¨ve doesnâ€™t return any results. The issue is tracked here: CONTTAGS-69 No support of special characters.

## [](#_disabling_text_classification)Disabling text classification

If you donâ€™t use text classification, you can disable it so that system performance isnâ€™t affected.

To disable text classification, go to the file `/text-classification/config.yaml` in the `Resource Files` app and set the `enabled` property to `false`.

By default, itâ€™s set to `true`.

/text-classification/config.yaml

```yaml
# turn off the module with this property
enabled: false (1)
aggregateDefinition:
  fieldTypes: [text, textField, richText, richTextField, composite, compositeField, switchable, switchableField]
termFilteringDefinition:
  excludedTerms: []
```

|     |     |
| --- | --- |
| **1** | The text classification feature is disabled. |

Related topics

-   [Text classification](../../../Features/Text-classification/)

-   [Content tagging](../Content-Tags-module/)

-   [Definition decoration](../../../Developing/Definition-decoration/)
