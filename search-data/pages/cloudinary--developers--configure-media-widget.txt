---
title: "Configure the Media Integration widget"
url: https://docs.magnolia-cms.com/cloudinary/developers/configure-media-widget/
category: Modules
version: modules
breadcrumb: Cloudinary External DAM module > Configure the Media Integration widget
---

# Configure the Media Integration widget

When using the Media Integration widget, the regular Cloudinary Assets subapp is hidden. Instead, Cloudinary content is managed within the Choose Dialog.

## [](#_prerequisites)Prerequisites

To use this module you need to have an existing [Cloudinary](https://cloudinary.com/) account.

> **Important:** The Cloudinary Media Integration widget requires a specific activation flag in the Cloudinary instance. Without the activation flag, the widget displays a login screen.What do you need to do?You must submit a request to Cloudinary to enable the flag on your instance. The flag is called CMS Signature Login Enabled.Why is it needed?The "Signature" authentication method in Cloudinary generates secure signatures for requests to its API. This helps ensure that only authorized users are able to access and manipulate resources stored on Cloudinary.

From your Cloudinary account, you need the following:

-   `cloudName`

-   `apiKey`

-   `userName`

-   `apiSecret`


This information needs to be entered either in the Passwords app under the `/cloudinary/default` folder or as a decoration in your light module.

### [](#_passwords_app)Passwords app

![cloudinary account admincentral](../_images/media-integration-widget/cloudinary-account-admincentral.png)

### [](#_decorate_config_yaml)Decorate config.yaml

This should be done via a decorations registry in your own light module.

The decorations you define impact the Media Integration widget’s [`config.yaml` file](https://gitlab.magnolia-platform.com/ps/extensions/cloudinary/-/blob/master/cloudinary-media-widget-integration/src/main/resources/cloudinary-media-widget-integration/config.yaml).

-   From `2.1.0`

-   Before `2.1.0`


`config.yaml`

```yaml
accounts:
  default: (1)
    apiKey: CLOUDINARY_API_KEY_HERE
    apiSecret: CLOUDINARY_API_SECRET_HERE
    cloudName: CLOUDINARY_CLOUD_NAME_HERE
    userName: CLOUDINARY_USERNAME
  assetManager: (2)
    apiKey: CLOUDINARY_API_KEY_HERE
    apiSecret: CLOUDINARY_API_SECRET_HERE
    cloudName: CLOUDINARY_CLOUD_NAME_HERE
    userName: CLOUDINARY_USERNAME
  assetViewer: (2)
    apiKey: CLOUDINARY_API_KEY_HERE
    apiSecret: CLOUDINARY_API_SECRET_HERE
    cloudName: CLOUDINARY_CLOUD_NAME_HERE
    userName: CLOUDINARY_USERNAME
```

|     |     |
| --- | --- |
| **1** | Default fallback role. |
| **2** | Defines the role to which you can add users. |

`config.yaml`

```yaml
accounts:
  default: (1)
    apiKey: CLOUDINARY_API_KEY_HERE
    apiSecret: CLOUDINARY_API_SECRET_HERE
    cloudName: CLOUDINARY_CLOUD_NAME_HERE
    userName: CLOUDINARY_USERNAME
  superuser: (2)
    apiKey: CLOUDINARY_API_KEY_HERE
    apiSecret: CLOUDINARY_API_SECRET_HERE
    cloudName: CLOUDINARY_CLOUD_NAME_HERE
    userName: CLOUDINARY_USERNAME
```

|     |     |
| --- | --- |
| **1** | Default user. |
| **2** | Specifies a `superuser` user. |

Expected directory structure

your-light-module/ **(1)**
├── decorations/ **(2)**
│   └── cloudinary-media-widget-integration/ **(3)**
        └── config.yaml **(4)**

|     |     |
| --- | --- |
| **1** | From within your own light module. |
| **2** | The decorations registry. |
| **3** | This tells Magnolia to decorate the `cloudinary-media-widget-integration` module. |
| **4** | Use the `config.yaml` file to decorate as you see fit. |

For more on decorating via light modules, see [Definition decoration](../../../product-docs/RNs-6-4-3/Developing/Definition-decoration/).

## [](#_configure_server)Configure server

1.  First modify your server URL in AdminCentral.

2.  Under `config/server`, change the `defaultBaseUrl` property to point your own instance and `contextRoot`.


## [](#_override_default_account)Override default account

> **Warning:** From Cloudinary External DAM module version 2.1.0 and later, this feature no longer works. This is because credentials are role-based instead of user-based from 2.1.0.

You can override the default account settings by providing user specific settings.

Put the user specific account under the Magnolia `username`.

![cloudinary account admincentral override](../_images/media-integration-widget/cloudinary-account-admincentral-override.png)

Installing this module hides the Cloudinary DAM app. To keep using the Cloudinary DAM app, you must manually enable it.

1.  Go to your Resources app.

2.  Navigate to "/cloudinary-media-widget-integration/decorations/dam-app-core/apps/dam.subApps.cloudinaryBrowser.yaml" file.

3.  Set "hidden" property to "false".

    ![cloudinary dam app enable](../_images/media-integration-widget/cloudinary-dam-app-enable.jpg)


## [](#_usage)Usage

You can use a Magnolia field in any dialog:

```yaml
form:
   implementationClass: info.magnolia.ui.javascript.form.FormViewWithChangeListener
   properties:
     image:
        label: Cloudinary Image
        $type: cloudinaryWidgetField
        defaultParameter: t_example
```

> **Note:** The defaultParameters field is optional. When defined, it provides a default transformation parameter that is automatically prefilled in the Parameters input whenever the dialog is opened. Users may edit or override this value at any time, and selecting a Cloudinary asset will only overwrite it if the asset already contains its own derived transformation.

After opening magnolia dialog and clicking on select image button, you are presented with Cloudinary widget select dialog.

![cloudinary image](../_images/media-integration-widget/cloudinary-image.jpg)

## [](#_additional_info)Additional info

When installed, this module hides the Cloudinary Assets subapp and Cloudinary content in the Choose dialog by default.

-   To enable the Cloudinary Assets subapp, set closable to `true` for `cloudinaryBrowser` subapp in the DAM configuration yaml.

-   To enable the Cloudinary content in the Assets Choose dialog, set `showCloudinaryContentInChooseApp` to `true` for the `cloudinary-media-widget-integration` module configuration yaml.


> **Important:** For decorations to work consistently, you need to add the following in your light modules:

<light-module>/module.yaml

```yaml
/module.yaml
version: 1.0
dependencies:
  dam-cloudinary:
    version: 3.0.2/*
  cloudinary-media-widget-integration:
    version: 3.0.2/*
```
