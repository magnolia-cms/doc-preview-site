---
title: "Helm values"
url: https://docs.magnolia-cms.com/paas/deployment/helm-values/
category: DX Cloud
version: cloud
breadcrumb: DX Cloud > Helm values reference
---

# Helm values

**Latest version:** `{helm-chart-version}` [Helm repo](https://gitlab.com/mironet/magnolia-helm/-/tags)

When you [create a project](../../setup/#_create_a_project_using_the_maven_archetype) with DX Cloud, a `values.yml` file is generated for you from the PaaS Helm Chart. The `values.yml` file contains important project information for configuring items such as:

-   [Ingresses](#_ingresses)

-   [Images](#_images)

-   [Magnolia Author](#_magnolia_author)

-   [Magnolia Public](#_magnolia_public)

-   [Jars](#_jars)

-   [Timezone](#_timezone)


Can I change the configuration values in the values.yml file?

Yes, you can change the values for certain properties in the `values.yml` file. However, it’s important that you don’t change some values as this could have serious consequences for your project.

This page guides you through the properties that you **can** change while helping you avoid changing the wrong properties.

## [](#_update_helm_chart_version)Update Helm chart version

You update the Helm chart version in the `.gitlab-ci.yaml` file. You must modify the version, the values file, and the namespace. Pipeline configuration may vary by customer implementation; though we do provide blueprints. Ensure you adapt the configuration accordingly to fit the project requirements.

-   Global variable

-   Command line


Specify the desired Helm chart version here. This shows the latest version.

`gitlab.ci.yaml` file

```yaml
variables:
  HELM_CHART_VERSION: {helm-chart-version}
```

```yaml
...
helm upgrade prod mironet magnolia-helm --version {helm-chart-version} -f values_new.yml -n prod
...
```

| Property | Description |
| --- | --- |
| `enabled` | Enable or disable the ingress file. |
| `annotations` | While a basic Ingress allows you to define hostnames, paths, and rules, annotations extend its functionality with more advanced configurations. Usually, annotations are used to enhance security, manage traffic, and handle custom behaviors. This is the section where you add any necessary annotations for your project. See [Annotations](#_annotations) for more details on different annotation options. ** If in doubt, check with [DX Cloud support](https://magnolia-cms.atlassian.net/servicedesk/customer/portal/13) before adding any additional annotations. | ** | If in doubt, check with [DX Cloud support](https://magnolia-cms.atlassian.net/servicedesk/customer/portal/13) before adding any additional annotations. |
| ** | If in doubt, check with [DX Cloud support](https://magnolia-cms.atlassian.net/servicedesk/customer/portal/13) before adding any additional annotations. |
| `hosts` | Specify hosts. This includes setting the service port if necessary. Example ` - host: {{ .Env.DEPLOYMENT }}.author.paastraining.magnolia-platform.io paths: - path: / instance: author port: https (1)` ** **1** If [SSO in DX Cloud](../../sso/) is failing due to incorrect protocol inference, setting the port to `https` in the Helm chart ensures Magnolia will generate redirect URLs using HTTPS. To do this, ideally, you should be using Helm `{helm-chart-version}` or `{helm-chart-version-1}` . | ** **1** | If [SSO in DX Cloud](../../sso/) is failing due to incorrect protocol inference, setting the port to `https` in the Helm chart ensures Magnolia will generate redirect URLs using HTTPS. To do this, ideally, you should be using Helm `{helm-chart-version}` or `{helm-chart-version-1}` . |
| ** **1** | If [SSO in DX Cloud](../../sso/) is failing due to incorrect protocol inference, setting the port to `https` in the Helm chart ensures Magnolia will generate redirect URLs using HTTPS. To do this, ideally, you should be using Helm `{helm-chart-version}` or `{helm-chart-version-1}` . |
| `tls` | Specify hosts using transport layer security. Specify a secret name here if you already have a certificate stored and know its name. If this is not specified, `lets-encrypt` is used to issue a new certificate. Example ` tls: - hosts: - {{ .Env.DEPLOYMENT }}.author.paastraining.magnolia-platform.io - {{ .Env.DEPLOYMENT }}.public.paastraining.magnolia-platform.io secretName: {{ .Env.DEPLOYMENT }}-paastraining-magnolia-platform-io (1)` ** **1** Specify the `secretName` . | ** **1** | Specify the `secretName` . |
| ** **1** | Specify the `secretName` . |

## [](#_images)Images

The `image:` section of your values.yml file decides which image to use, how to pull the image, and whether authentication is needed, as it would be in the case for private registries.

The properties shown in the example below are configurable.

> **Caution:** You should not change any property other than those highlighted here.

```yaml
  image:
    pullSecrets: (1)
      - name: gitlab
    pullPolicy: Always (2)
```

|     |     |
| --- | --- |
| **1** | Provides credentials for pulling images from private registries. In this case, `gitlab` is used to pull from the private GitLab container registry. |
| **2** | Defines when to pull the image. Options are `Always`, `IfNotPresent`, `Never`. |

| Property | Description |
| --- | --- |
| `enabled` | Boolean that enables the author instance. If set to `false` , no author instance is deployed. |
| `restartPolicy` | Should always be set to `Always` . |
| `redeploy` | Boolean for redeploying the author instance if there is a change to the parent Helm chart. • `true` = redploys on helm upgrades even if no changes were made. • `false` = does not redeploy on helm upgrades. |
| `contextPath` | The context path for the instance. ** You must always have a leading slash `/` . **Example:** `/author` | ** | You must always have a leading slash `/` . |
| ** | You must always have a leading slash `/` . |
| `base_url` | The Magnolia base URL. **Example:** `https://{{ .Env.DEPLOYMENT }}.author.paastraining.magnolia-platform.io/` |
| `env` | Magnolia environment configuration. Includes critical components like `magnolia.bootstrap.license.owner` and `magnolia.bootstrap.license.key` : `... - name: magnolia.bootstrap.license.owner (1) value: "[replace with email]" - name: magnolia.bootstrap.license.key (1) value: "[replace with key]" ...` ** **1** The license gets injected only when an environment gets created via the Helm chart, meaning this only happens once, when the environment is created. If you need to [update your license](../../faqs/#_how_do_i_update_my_magnolia_license_key) , it should be handled directly in Magnolia. | ** **1** | The license gets injected only when an environment gets created via the Helm chart, meaning this only happens once, when the environment is created. If you need to [update your license](../../faqs/#_how_do_i_update_my_magnolia_license_key) , it should be handled directly in Magnolia. |
| ** **1** | The license gets injected only when an environment gets created via the Helm chart, meaning this only happens once, when the environment is created. If you need to [update your license](../../faqs/#_how_do_i_update_my_magnolia_license_key) , it should be handled directly in Magnolia. |
| `rescueModeDX` | Boolean to determine if rescue mode is enabled or not. Default: `false` For more details on this topic, see [Rescue App](../../troubleshooting/general/rescue-app/) . |
| `catalinaExtraEnv` | The environment variables that are added to `CATALINA_OPTS` [ [1](#_footnotedef_1) ] . You can add your own environment variables here. See [DX Core: Environment variables](../../../product-docs/RNs-6-4-3/Administration/Architecture/Configuration-management/#_environment_variables) for more details. [1](#_footnoteref_1) . `CATALINA_OPTS` is an environment variable that allows you to specify options and arguments passed to the JVM (Java Virtual Machine) when starting Tomcat. |
| `setenv` | Under `setenv` , you should only configure the values for `minPercentage` and `maxPercentage` . These are the minimum (or maximum) percentage of pod memory allocated to the heap. ** The heap is where Java objects and data structures are stored during runtime. | ** | The heap is where Java objects and data structures are stored during runtime. |
| ** | The heap is where Java objects and data structures are stored during runtime. |
| `resources` | In the `resources:` section, you control how much memory is allocated to pod requests as well as set limits to the pod memory. This is measured in `Gi` (gibibytes) which is approximately 1.1 Gigabyte (GB). ` resources: requests: memory: 4Gi (1) limits: memory: 4Gi (2)` ** **1** Set the memory limit for pod requests. ** **2** Set the memory limit for the pod. | ** **1** | Set the memory limit for pod requests. | ** **2** | Set the memory limit for the pod. |
| ** **1** | Set the memory limit for pod requests. |
| ** **2** | Set the memory limit for the pod. |
| `startupProbe` | Readiness mechanism for applications that take a significant amount of time to start. ` startupProbe: enabled: True failureThreshold: 720 (1) periodSeconds: 10 (2)` ** **1** Increase `failureThreshold` (number of attempts before failing) to accommodate indexing time for large storage or migrating customers in order to avoid indexing failures. ** **2** `periodSeconds` defines the interval (in seconds) between each probe check. In this example, the probe is checked every 10 seconds 720 times, meaning 2 hours (7200 seconds) before the application officially fails. | ** **1** | Increase `failureThreshold` (number of attempts before failing) to accommodate indexing time for large storage or migrating customers in order to avoid indexing failures. | ** **2** | `periodSeconds` defines the interval (in seconds) between each probe check. In this example, the probe is checked every 10 seconds 720 times, meaning 2 hours (7200 seconds) before the application officially fails. |
| ** **1** | Increase `failureThreshold` (number of attempts before failing) to accommodate indexing time for large storage or migrating customers in order to avoid indexing failures. |
| ** **2** | `periodSeconds` defines the interval (in seconds) between each probe check. In this example, the probe is checked every 10 seconds 720 times, meaning 2 hours (7200 seconds) before the application officially fails. |
| `logging` | Use this section to overwrite Tomcat logging lines. You can define the `level` such as `DEBUG` as well as set the pattern. Here, you can also define loggers and appenders. Do not log to files inside the container. Always log to `stdout` or `stderr` if possible or use a different log shipping mechanism. ` logging: level: DEBUG (1) pattern: "%d %-5p %-50.50c: %m%n" (2) loggers: (3) - name: my-logger level: ERROR appenders: (4) - name: my-appender tagName: CustomTag properties: key1: value1 key2: value2 key3: value3` ** **1** Sets the logging level. This is either `INFO` , `WARN` , `ERROR` , `FATAL` , OR `DEBUG` . `DEBUG` is the most verbose, capturing the most granular details for logging purposes. ** **2** Defines the log message format. ** Format example explained • `%d` - The date of the log entry. • `%-5p` - The log level (e.g., `DEBUG` , `INFO` ) padded to 5 characters. • `%-50.50c` - The logger name, limited to 50 characters. The logger is often associated with the class or package name from which the log entry originates. • `%m` - The actual log message. • `%n` - A newline character, used to ensure each log entry starts on a new line. ** **3** Define additional `loggers` . ** More on loggers A logger is an entity that defines the source of log messages and controls their severity level. Loggers determine what gets logged by setting a logging level (e.g., `DEBUG` , `ERROR` , `INFO` ), which filters the messages that are passed along to the appenders. Loggers specify which parts of the system generate logs and at what granularity. ** **4** Define additional `appenders` with `tagName` and `properties` . ** More on appenders An appender defines where and how log messages are output after being filtered by loggers. Appenders specify the destination (e.g., a file, console, or external system) and the format of the log output. | ** **1** | Sets the logging level. This is either `INFO` , `WARN` , `ERROR` , `FATAL` , OR `DEBUG` . `DEBUG` is the most verbose, capturing the most granular details for logging purposes. | ** **2** | Defines the log message format. ** Format example explained • `%d` - The date of the log entry. • `%-5p` - The log level (e.g., `DEBUG` , `INFO` ) padded to 5 characters. • `%-50.50c` - The logger name, limited to 50 characters. The logger is often associated with the class or package name from which the log entry originates. • `%m` - The actual log message. • `%n` - A newline character, used to ensure each log entry starts on a new line. | ** **3** | Define additional `loggers` . ** More on loggers A logger is an entity that defines the source of log messages and controls their severity level. Loggers determine what gets logged by setting a logging level (e.g., `DEBUG` , `ERROR` , `INFO` ), which filters the messages that are passed along to the appenders. Loggers specify which parts of the system generate logs and at what granularity. | ** **4** | Define additional `appenders` with `tagName` and `properties` . ** More on appenders An appender defines where and how log messages are output after being filtered by loggers. Appenders specify the destination (e.g., a file, console, or external system) and the format of the log output. |
| ** **1** | Sets the logging level. This is either `INFO` , `WARN` , `ERROR` , `FATAL` , OR `DEBUG` . `DEBUG` is the most verbose, capturing the most granular details for logging purposes. |
| ** **2** | Defines the log message format. ** Format example explained • `%d` - The date of the log entry. • `%-5p` - The log level (e.g., `DEBUG` , `INFO` ) padded to 5 characters. • `%-50.50c` - The logger name, limited to 50 characters. The logger is often associated with the class or package name from which the log entry originates. • `%m` - The actual log message. • `%n` - A newline character, used to ensure each log entry starts on a new line. |
| ** **3** | Define additional `loggers` . ** More on loggers A logger is an entity that defines the source of log messages and controls their severity level. Loggers determine what gets logged by setting a logging level (e.g., `DEBUG` , `ERROR` , `INFO` ), which filters the messages that are passed along to the appenders. Loggers specify which parts of the system generate logs and at what granularity. |
| ** **4** | Define additional `appenders` with `tagName` and `properties` . ** More on appenders An appender defines where and how log messages are output after being filtered by loggers. Appenders specify the destination (e.g., a file, console, or external system) and the format of the log output. |
| `persistence` | Sets the size of the Persistent Volume Claim (PVC) for the Magnolia Author instance. Ensure the allocated storage size aligns with your content and indexing requirements. ** This is only applied during the initial deployment. After deployment, resizing must be done via the Rancher UI or by DevOps teams as shown in [Troubleshooting: Magnolia persistent volume is almost full](../../troubleshooting/alerts/CustomerMagnoliaHomePersistentVolumeAlmostFull/#_solutions) . | ** | This is only applied during the initial deployment. After deployment, resizing must be done via the Rancher UI or by DevOps teams as shown in [Troubleshooting: Magnolia persistent volume is almost full](../../troubleshooting/alerts/CustomerMagnoliaHomePersistentVolumeAlmostFull/#_solutions) . |
| ** | This is only applied during the initial deployment. After deployment, resizing must be done via the Rancher UI or by DevOps teams as shown in [Troubleshooting: Magnolia persistent volume is almost full](../../troubleshooting/alerts/CustomerMagnoliaHomePersistentVolumeAlmostFull/#_solutions) . |
| `db` | The `db` section in your `values.yml` file defines critical database properties, including persistence size, backups, and content synchronization. These settings are applied during the initial deployment of your DX Cloud project. Persistence size : The database persistence size ( `persistence.size` ) is set during the initial deployment of your DX Cloud project. Once deployed, attempting to modify this value in subsequent deployments will result in an error. If you need to increase or decrease the persistence size after the initial deployment, please contact [Support](https://magnolia-cms.atlassian.net/servicedesk/customer/portal/13) . Our team will assist you in making the necessary adjustments. ` db: tag: 15-alpine (1) persistence: size: "10Gi" (2) contentsync: enabled: true restore: enabled: False backup: (3) enabled: True env: - name: MGNLBACKUP_USE_PG_WAL value: "true" - name: MGNLBACKUP_SYNC_DIR value: "/archive" - name: MGNLBACKUP_NO_STDOUT value: "true" - name: MGNLBACKUP_LOGLEVEL value: "debug" - name: MGNLBACKUP_BUCKET (4) value: "paastraining-backup-bucket" - name: MGNLBACKUP_PREFIX value: "{{ .Env.DEPLOYMENT }}/author" - name: MGNLBACKUP_CRON value: "0 3 * * *" - name: MGNLBACKUP_KEEPDAYS value: "30" - name: MGNLBACKUP_TAGS_RELEASE value: {{ .Env.DEPLOYMENT }} # # Choose backup location based on cloud provider of the cluster # # Backup to S3 - name: MGNLBACKUP_S3_ENDPOINT value: "s3.eu-central-1.amazonaws.com" - name: MGNLBACKUP_S3_REGION value: "eu-central-1" - name: MGNLBACKUP_S3_ACCESSKEY valueFrom: secretKeyRef: name: s3-backup-key key: accesskey - name: MGNLBACKUP_S3_SECRETKEY valueFrom: secretKeyRef: name: s3-backup-key key: secretkey` ** **1** The PostgreSQL version. This is for informational purposes only. You should not change this property. ** **2** Sets the volume size of the database. []() `10Gi` is typically sufficient for a dev environment, `100Gi` for production. ** **3** Defines that backups of the database are taken and stored to an S3 bucket or Azure storage (depending on your cloud provider) provisioned by Magnolia. ** **4** The value of `MGNLBACKUP_BUCKET` is provided to you by Magnolia. | ** **1** | The PostgreSQL version. This is for informational purposes only. You should not change this property. | ** **2** | Sets the volume size of the database. []() `10Gi` is typically sufficient for a dev environment, `100Gi` for production. | ** **3** | Defines that backups of the database are taken and stored to an S3 bucket or Azure storage (depending on your cloud provider) provisioned by Magnolia. | ** **4** | The value of `MGNLBACKUP_BUCKET` is provided to you by Magnolia. |
| ** **1** | The PostgreSQL version. This is for informational purposes only. You should not change this property. |
| ** **2** | Sets the volume size of the database. []() `10Gi` is typically sufficient for a dev environment, `100Gi` for production. |
| ** **3** | Defines that backups of the database are taken and stored to an S3 bucket or Azure storage (depending on your cloud provider) provisioned by Magnolia. |
| ** **4** | The value of `MGNLBACKUP_BUCKET` is provided to you by Magnolia. |

| Property | Description |
| --- | --- |
| `enabled` | Boolean that enables the public instance. If set to `false` , no public instance is deployed. |
| `restartPolicy` | Should always be set to `Always` . |
| `redeploy` | Boolean for redeploying the public instance if there is a change to the parent Helm chart. • `true` = redploys on helm upgrades even if no changes were made. • `false` = does not redeploy on helm upgrades. |
| `contextPath` | The context path for the instance. ** You must always have a leading slash `/` . **Example:** `/public` | ** | You must always have a leading slash `/` . |
| ** | You must always have a leading slash `/` . |
| `base_url` | The Magnolia base URL. **Example:** `https://{{ .Env.DEPLOYMENT }}.public.paastraining.magnolia-platform.io/` |
| `env` | Magnolia environment configuration. Includes critical components like `magnolia.bootstrap.license.owner` and `magnolia.bootstrap.license.key` : `... - name: magnolia.bootstrap.license.owner (1) value: "[replace with email]" - name: magnolia.bootstrap.license.key (1) value: "[replace with key]" ...` ** **1** The license gets injected only when an environment gets created via the Helm chart, meaning this only happens once, when the environment is created. If you need to [update your license](../../faqs/#_how_do_i_update_my_magnolia_license_key) , it should be handled directly in Magnolia. | ** **1** | The license gets injected only when an environment gets created via the Helm chart, meaning this only happens once, when the environment is created. If you need to [update your license](../../faqs/#_how_do_i_update_my_magnolia_license_key) , it should be handled directly in Magnolia. |
| ** **1** | The license gets injected only when an environment gets created via the Helm chart, meaning this only happens once, when the environment is created. If you need to [update your license](../../faqs/#_how_do_i_update_my_magnolia_license_key) , it should be handled directly in Magnolia. |
| `rescueModeDX` | Boolean to determine if rescue mode is enabled or not. Default: `false` For more details on this topic, see [Rescue App](../../troubleshooting/general/rescue-app/) . |
| `replicas` | Defines how many public instances to deploy. You must scale up or down by changing the `replicas` value. You can do this in the `values.yml` file or in the [Cockpit](../../cockpit/sections/environments/#_manage_your_environments) . ** One replica is sufficient for a `dev` environment, but a minimum of 2 is needed for production. | ** | One replica is sufficient for a `dev` environment, but a minimum of 2 is needed for production. |
| ** | One replica is sufficient for a `dev` environment, but a minimum of 2 is needed for production. |
| `catalinaExtraEnv` | The environment variables that are added to `CATALINA_OPTS` [ [2](#_footnotedef_2) ] . You can add your own environment variables here. See [DX Core: Environment variables](../../../product-docs/RNs-6-4-3/Administration/Architecture/Configuration-management/#_environment_variables) for more details. [2](#_footnoteref_2) . `CATALINA_OPTS` is an environment variable that allows you to specify options and arguments passed to the JVM (Java Virtual Machine) when starting Tomcat. |
| `setenv` | Under `setenv` , you should only configure the values for `minPercentage` and `maxPercentage` . These are the minimum (or maximum) percentage of pod memory allocated to the heap. ** The heap is where Java objects and data structures are stored during runtime. | ** | The heap is where Java objects and data structures are stored during runtime. |
| ** | The heap is where Java objects and data structures are stored during runtime. |
| `resources` | In the `resources:` section, you control how much memory is allocated to pod requests as well as set limits to the pod memory. This is measured in `Gi` (gibibytes) which is approximately 1.1 Gigabyte (GB). ` resources: requests: memory: 4Gi (1) limits: memory: 4Gi (2)` ** **1** Set the memory limit for pod requests. ** **2** Set the memory limit for the pod. | ** **1** | Set the memory limit for pod requests. | ** **2** | Set the memory limit for the pod. |
| ** **1** | Set the memory limit for pod requests. |
| ** **2** | Set the memory limit for the pod. |
| `startupProbe` | Readiness mechanism for applications that take a significant amount of time to start. ` startupProbe: enabled: True failureThreshold: 720 (1) periodSeconds: 10 (2)` ** **1** Increase `failureThreshold` (number of attempts before failing) to accommodate indexing time for large storage or migrating customers in order to avoid indexing failures. ** **2** `periodSeconds` defines the interval (in seconds) between each probe check. In this example, the probe is checked every 10 seconds 720 times, meaning 2 hours (7200 seconds) before the application officially fails. | ** **1** | Increase `failureThreshold` (number of attempts before failing) to accommodate indexing time for large storage or migrating customers in order to avoid indexing failures. | ** **2** | `periodSeconds` defines the interval (in seconds) between each probe check. In this example, the probe is checked every 10 seconds 720 times, meaning 2 hours (7200 seconds) before the application officially fails. |
| ** **1** | Increase `failureThreshold` (number of attempts before failing) to accommodate indexing time for large storage or migrating customers in order to avoid indexing failures. |
| ** **2** | `periodSeconds` defines the interval (in seconds) between each probe check. In this example, the probe is checked every 10 seconds 720 times, meaning 2 hours (7200 seconds) before the application officially fails. |
| `logging` | Use this section to overwrite Tomcat logging lines. You can define the `level` such as `DEBUG` as well as set the pattern. Here, you can also define loggers and appenders. Do not log to files inside the container. Always log to `stdout` or `stderr` if possible or use a different log shipping mechanism. ` logging: level: DEBUG (1) pattern: "%d %-5p %-50.50c: %m%n" (2) loggers: (3) - name: my-logger level: ERROR appenders: (4) - name: my-appender tagName: CustomTag properties: key1: value1 key2: value2 key3: value3` ** **1** Sets the logging level. This is either `INFO` , `WARN` , `ERROR` , `FATAL` , OR `DEBUG` . `DEBUG` is the most verbose, capturing the most granular details for logging purposes. ** **2** Defines the log message format. ** Format example explained • `%d` - The date of the log entry. • `%-5p` - The log level (e.g., `DEBUG` , `INFO` ) padded to 5 characters. • `%-50.50c` - The logger name, limited to 50 characters. The logger is often associated with the class or package name from which the log entry originates. • `%m` - The actual log message. • `%n` - A newline character, used to ensure each log entry starts on a new line. ** **3** Define additional `loggers` . ** More on loggers A logger is an entity that defines the source of log messages and controls their severity level. Loggers determine what gets logged by setting a logging level (e.g., `DEBUG` , `ERROR` , `INFO` ), which filters the messages that are passed along to the appenders. Loggers specify which parts of the system generate logs and at what granularity. ** **4** Define additional `appenders` with `tagName` and `properties` . ** More on appenders An appender defines where and how log messages are output after being filtered by loggers. Appenders specify the destination (e.g., a file, console, or external system) and the format of the log output. | ** **1** | Sets the logging level. This is either `INFO` , `WARN` , `ERROR` , `FATAL` , OR `DEBUG` . `DEBUG` is the most verbose, capturing the most granular details for logging purposes. | ** **2** | Defines the log message format. ** Format example explained • `%d` - The date of the log entry. • `%-5p` - The log level (e.g., `DEBUG` , `INFO` ) padded to 5 characters. • `%-50.50c` - The logger name, limited to 50 characters. The logger is often associated with the class or package name from which the log entry originates. • `%m` - The actual log message. • `%n` - A newline character, used to ensure each log entry starts on a new line. | ** **3** | Define additional `loggers` . ** More on loggers A logger is an entity that defines the source of log messages and controls their severity level. Loggers determine what gets logged by setting a logging level (e.g., `DEBUG` , `ERROR` , `INFO` ), which filters the messages that are passed along to the appenders. Loggers specify which parts of the system generate logs and at what granularity. | ** **4** | Define additional `appenders` with `tagName` and `properties` . ** More on appenders An appender defines where and how log messages are output after being filtered by loggers. Appenders specify the destination (e.g., a file, console, or external system) and the format of the log output. |
| ** **1** | Sets the logging level. This is either `INFO` , `WARN` , `ERROR` , `FATAL` , OR `DEBUG` . `DEBUG` is the most verbose, capturing the most granular details for logging purposes. |
| ** **2** | Defines the log message format. ** Format example explained • `%d` - The date of the log entry. • `%-5p` - The log level (e.g., `DEBUG` , `INFO` ) padded to 5 characters. • `%-50.50c` - The logger name, limited to 50 characters. The logger is often associated with the class or package name from which the log entry originates. • `%m` - The actual log message. • `%n` - A newline character, used to ensure each log entry starts on a new line. |
| ** **3** | Define additional `loggers` . ** More on loggers A logger is an entity that defines the source of log messages and controls their severity level. Loggers determine what gets logged by setting a logging level (e.g., `DEBUG` , `ERROR` , `INFO` ), which filters the messages that are passed along to the appenders. Loggers specify which parts of the system generate logs and at what granularity. |
| ** **4** | Define additional `appenders` with `tagName` and `properties` . ** More on appenders An appender defines where and how log messages are output after being filtered by loggers. Appenders specify the destination (e.g., a file, console, or external system) and the format of the log output. |
| `persistence` | Sets the size of the Persistent Volume Claim (PVC) for the Magnolia Public instance. Ensure the allocated storage size aligns with your content and indexing requirements. ** This is only applied during the initial deployment. After deployment, resizing must be done via the Rancher UI or by DevOps teams as shown in [Troubleshooting: Magnolia persistent volume is almost full](../../troubleshooting/alerts/CustomerMagnoliaHomePersistentVolumeAlmostFull/#_solutions) . | ** | This is only applied during the initial deployment. After deployment, resizing must be done via the Rancher UI or by DevOps teams as shown in [Troubleshooting: Magnolia persistent volume is almost full](../../troubleshooting/alerts/CustomerMagnoliaHomePersistentVolumeAlmostFull/#_solutions) . |
| ** | This is only applied during the initial deployment. After deployment, resizing must be done via the Rancher UI or by DevOps teams as shown in [Troubleshooting: Magnolia persistent volume is almost full](../../troubleshooting/alerts/CustomerMagnoliaHomePersistentVolumeAlmostFull/#_solutions) . |
| `db` | The `db` section in your `values.yml` file defines critical database properties, including persistence size, backups, and content synchronization. These settings are applied during the initial deployment of your DX Cloud project. Persistence size : The database persistence size ( `persistence.size` ) is set during the initial deployment of your DX Cloud project. Once deployed, attempting to modify this value in subsequent deployments will result in an error. If you need to increase or decrease the persistence size after the initial deployment, please contact [Support](https://magnolia-cms.atlassian.net/servicedesk/customer/portal/13) . Our team will assist you in making the necessary adjustments. ` db: tag: 15-alpine (1) persistence: size: "10Gi" (2) contentsync: enabled: true restore: enabled: False backup: (3) enabled: True env: - name: MGNLBACKUP_USE_PG_WAL value: "true" - name: MGNLBACKUP_SYNC_DIR value: "/archive" - name: MGNLBACKUP_NO_STDOUT value: "true" - name: MGNLBACKUP_LOGLEVEL value: "debug" - name: MGNLBACKUP_BUCKET (4) value: "paastraining-backup-bucket" - name: MGNLBACKUP_PREFIX value: "{{ .Env.DEPLOYMENT }}/public" - name: MGNLBACKUP_CRON value: "0 3 * * *" - name: MGNLBACKUP_KEEPDAYS value: "30" - name: MGNLBACKUP_TAGS_RELEASE value: {{ .Env.DEPLOYMENT }} # # Choose backup location based on cloud provider of the cluster # # Backup to S3 - name: MGNLBACKUP_S3_ENDPOINT value: "s3.eu-central-1.amazonaws.com" - name: MGNLBACKUP_S3_REGION value: "eu-central-1" - name: MGNLBACKUP_S3_ACCESSKEY valueFrom: secretKeyRef: name: s3-backup-key key: accesskey - name: MGNLBACKUP_S3_SECRETKEY valueFrom: secretKeyRef: name: s3-backup-key key: secretkey` ** **1** The PostgreSQL version. This is for informational purposes only. You should not change this property. ** **2** Sets the volume size of the database. []() `10Gi` is typically sufficient for a dev environment, `100Gi` for production. ** **3** Defines that backups of the database are taken and stored to an S3 bucket or Azure storage (depending on your cloud provider) provisioned by Magnolia. ** **4** The value of `MGNLBACKUP_BUCKET` is provided to you by Magnolia. | ** **1** | The PostgreSQL version. This is for informational purposes only. You should not change this property. | ** **2** | Sets the volume size of the database. []() `10Gi` is typically sufficient for a dev environment, `100Gi` for production. | ** **3** | Defines that backups of the database are taken and stored to an S3 bucket or Azure storage (depending on your cloud provider) provisioned by Magnolia. | ** **4** | The value of `MGNLBACKUP_BUCKET` is provided to you by Magnolia. |
| ** **1** | The PostgreSQL version. This is for informational purposes only. You should not change this property. |
| ** **2** | Sets the volume size of the database. []() `10Gi` is typically sufficient for a dev environment, `100Gi` for production. |
| ** **3** | Defines that backups of the database are taken and stored to an S3 bucket or Azure storage (depending on your cloud provider) provisioned by Magnolia. |
| ** **4** | The value of `MGNLBACKUP_BUCKET` is provided to you by Magnolia. |

## [](#_jars)Jars

If you need external JARs or libraries that should be packaged or made available to your DX Cloud project during runtime, you should add them to the `jars:` section of the `values.yml` file.

The following example shows how the PostgreSQL JDBC driver is loaded.

```yaml
jars: (1)
  - name: postgres-jdbc
    repository: registry.gitlab.com/mironet/magnolia-jar/postgres-42.2.8
    tag: v0.0.1
    env:
      - name: INIT_DEST (2)
        value: /app/magnolia/WEB-INF/lib
    initScript: /init.sh (3)
```

|     |     |
| --- | --- |
| **1** | Add additional JARS in the `jars:` section. Do not change any default JARS. |
| **2** | As of now the only tasks expected from init containers is to copy files to a target directory specified by the env var `INIT_DEST`. |
| **3** | This chart expects the init containers to contain an `/init.sh` script which is called as the only command. |

## [](#_timezone)Timezone

You can set the timezone for your Magnolia instances within the `values.yml` file.

> **Caution:** You should not change any property other than those highlighted here.

```yaml
timezone: Europe/Zurich (1)
```

|     |     |
| --- | --- |
| **1** | Set the timezone for your Magnolia instances. |

## [](#_tolerations)Tolerations

In Kubernetes, taints and tolerations work together to control which pods can run on which nodes. This mechanism helps ensure that certain nodes are reserved for particular workloads or types of workloads (e.g., critical system services, high-memory workloads, or databases).

Using DX Cloud Basic?

To ensure the Magnolia deployment uses dedicated nodes, you must configure tolerations and node affinity in your `values.yml` file:

```yaml
# Add Toleration
tolerations: (1)
  - key: dedicated
    operator: Equal
    value: prod
    effect: PreferNoSchedule

# Node Affinity
nodeAffinity: (2)
  preferredDuringSchedulingIgnoredDuringExecution:
    - preference:
        matchExpressions:
          - key: dedicated
            operator: In
            values:
              - prod
      weight: 100
```

|     |     |
| --- | --- |
| **1** | Allows a pod to be scheduled on a node with a matching taint. It specifies that the pod "tolerates" the node’s taint, enabling it to run even if the node is marked for a particular use case. |
| **2** | Defines the conditions under which a pod can be scheduled on a node based on labels. This creates a preference (soft affinity) for nodes labeled with `dedicated=prod`. |

> **Important:** If you deploy additional workloads alongside Magnolia (such as frontend applications, custom services, or other components), you must apply the same tolerations and node affinity settings to those deployments. Otherwise, they may fail to schedule or run on unintended nodes.

### [](#_applying_tolerations_to_frontend_deployments)Applying tolerations to frontend deployments

When using DX Cloud Basic with dedicated nodes, any frontend application that serves your Magnolia content must use the same tolerations and node affinity settings as your Magnolia instances.

This is because your frontend is part of the same production workload and needs to:

-   Run on the dedicated production nodes alongside Magnolia

-   Benefit from network locality with the Magnolia instances it communicates with

-   Maintain the same isolation and resource guarantees


> **Note:** This requirement applies only if your workload needs to run on the same dedicated nodes as your Magnolia production environment. In this case, any frontend application serving Magnolia content must use the same tolerations and node affinity settings as your Magnolia instances. All other workloads will run on a best-effort basis and do not need these settings.

Frontend deployment example

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: frontend
  template:
    metadata:
      labels:
        app: frontend
    spec:
      containers:
        - name: frontend
          image: your-frontend-image:latest
          # [container configuration...]

      # These must match your Magnolia values.yml settings
      tolerations:
        - key: dedicated (1)
          operator: Equal
          value: prod (2)
          effect: PreferNoSchedule

      affinity:
        nodeAffinity: (3)
          preferredDuringSchedulingIgnoredDuringExecution:
            - preference:
                matchExpressions:
                  - key: dedicated
                    operator: In
                    values:
                      - prod
              weight: 100
```

|     |     |
| --- | --- |
| **1** | The toleration key (`dedicated`) must exactly match what you configured in your `values.yml` file for Magnolia. |
| **2** | The value (`prod`) must exactly match what you configured in your `values.yml` file for Magnolia. |
| **3** | The `nodeAffinity` settings must exactly match what you configured in your `values.yml` file for Magnolia. |

## [](#_reference_file)Reference file

This section contains a full example file for reference. When your project is created, a file similar to the following is generated.

The preceding specific sections are shown in full here in the sample `values.yml` file.

Reference values.yml file

An example file is shown here. You can also [Download](../../_attachments/yaml/project_values.yml) the file if you would like.

```yaml
ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/proxy-body-size: 512m
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
  #
  # run author and public in different contexts and use the same domain name
  # only one of these hosts/tls sections may be active
  #
#  hosts:
#  - host: {{ .Env.DEPLOYMENT }}.paastraining.magnolia-platform.io
#    paths:
#    - path: /
#      instance: public
#    - path: /author
#      instance: author
#  tls:
#  - hosts:
#    - {{ .Env.DEPLOYMENT }}.paastraining.magnolia-platform.io
#    secretName: {{ .Env.DEPLOYMENT }}-paastraining-magnolia-platform-io
  #
  # run author and public in ROOT context and use different domain names
  # only one of these hosts/tls sections may be active
  #
  hosts:
  - host: {{ .Env.DEPLOYMENT }}.author.paastraining.magnolia-platform.io
    paths:
    - path: /
      instance: author
      port: https
  - host: {{ .Env.DEPLOYMENT }}.public.paastraining.magnolia-platform.io
    paths:
    - path: /
      instance: public
      port: https
#  - host: {{ .Env.DEPLOYMENT }}.frontend-author.paastraining.magnolia-platform.io
#    paths:
#      - path: /
#        instance: frontend-author
#  - host: {{ .Env.DEPLOYMENT }}.frontend-public.paastraining.magnolia-platform.io
#    paths:
#    - path: /
#      instance: frontend-public
  tls:
  - hosts:
    - {{ .Env.DEPLOYMENT }}.author.paastraining.magnolia-platform.io
    - {{ .Env.DEPLOYMENT }}.public.paastraining.magnolia-platform.io
#    - {{ .Env.DEPLOYMENT }}.frontend-author.paastraining.magnolia-platform.io
#    - {{ .Env.DEPLOYMENT }}.frontend-public.paastraining.magnolia-platform.io
    secretName: {{ .Env.DEPLOYMENT }}-paastraining-magnolia-platform-io
image:
  pullSecrets:
    - name: gitlab
  pullPolicy: Always
magnoliaAuthor:
  enabled: true
  restartPolicy: Always
  redeploy: true
  bootstrap:
    password: superuser!
  activation:
    useExistingSecret: False
  #
  # run author and public in different contexts and use the same domain name
  # only one of these contextPath/base_url values may be active
  #
#  contextPath: /author
#  base_url: https://{{ .Env.DEPLOYMENT }}.paastraining.magnolia-platform.io/author
  #
  # run author and public in ROOT context and use different domain names
  # only one of these contextPath/base_url values may be active
  #
  contextPath: /
  base_url: https://{{ .Env.DEPLOYMENT }}.author.paastraining.magnolia-platform.io/
  sameSiteCookies: strict
  webarchive:
    repository: {{ .Env.CI_REGISTRY_IMAGE }}/magnolia-webapp
    tag: {{ .Env.GIT_TAG | quote }}
  env:
    - name: instance
      value: "author"
    - name: deployment
      value: {{ .Env.DEPLOYMENT }}
    - name: magnolia.superuser.enabled
      value: "true"
    - name: magnolia.superuser.password
      value: "superuser!"
    - name: magnolia.bootstrap.license.owner
      value: "[replace with email]"
    - name: magnolia.bootstrap.license.key
      value: "[replace with key]"
  setenv:
    memory:
      maxPercentage: 80
  resources:
    requests:
      memory: 4Gi
    limits:
      memory: 4Gi
  livenessProbe:
    enabled: true
    path: "/.rest/status"

  db:
    tag: 15-alpine
    persistence:
      size: "10Gi"
    contentsync:
      enabled: true
    restore:
      enabled: False
    backup:
      enabled: True
      env:
        - name: MGNLBACKUP_USE_PG_WAL
          value: "true"
        - name: MGNLBACKUP_SYNC_DIR
          value: "/archive"
        - name: MGNLBACKUP_NO_STDOUT
          value: "true"
        - name: MGNLBACKUP_LOGLEVEL
          value: "debug"
        - name: MGNLBACKUP_BUCKET
          value: "paastraining-backup-bucket"
        - name: MGNLBACKUP_PREFIX
          value: "{{ .Env.DEPLOYMENT }}/author"
        - name: MGNLBACKUP_CRON
          value: "0 3 * * *"
        - name: MGNLBACKUP_KEEPDAYS
          value: "30"
        - name: MGNLBACKUP_TAGS_RELEASE
          value: {{ .Env.DEPLOYMENT }}
        #
        # Choose backup location based on cloud provider of the cluster
        #
        # Backup to S3
        - name: MGNLBACKUP_S3_ENDPOINT
          value: "s3.eu-central-1.amazonaws.com"
        - name: MGNLBACKUP_S3_REGION
          value: "eu-central-1"
        - name: MGNLBACKUP_S3_ACCESSKEY
          valueFrom:
            secretKeyRef:
              name: s3-backup-key
              key: accesskey
        - name: MGNLBACKUP_S3_SECRETKEY
          valueFrom:
            secretKeyRef:
              name: s3-backup-key
              key: secretkey
        # Backup to Azure storage
#        - name: MGNLBACKUP_AZ_ACCOUNT_NAME
#          valueFrom:
#            secretKeyRef:
#              name: az-backup-key
#              key: AccountName
#        - name: MGNLBACKUP_AZ_ACCOUNT_KEY
#          valueFrom:
#            secretKeyRef:
#              name: az-backup-key
#              key: AccountKey

magnoliaPublic:
  enabled: true
  replicas: 1
  restartPolicy: Always
  bootstrap:
    password: superuser!
  activation:
    useExistingSecret: False
  contextPath: /
  #
  # run author and public in different contexts and use the same domain name
  # only one of these base_url values may be active
  #
#  base_url: https://{{ .Env.DEPLOYMENT }}.paastraining.magnolia-platform.io/
  #
  # run author and public in ROOT context and use different domain names
  # only one of these base_url values may be active
  #
  base_url: https://{{ .Env.DEPLOYMENT }}.public.paastraining.magnolia-platform.io/
  sameSiteCookies: strict
  webarchive:
    repository: {{ .Env.CI_REGISTRY_IMAGE }}/magnolia-webapp
    tag: {{ .Env.GIT_TAG | quote }}
  env:
    - name: instance
      value: "public"
    - name: deployment
      value: {{ .Env.DEPLOYMENT }}
    - name: magnolia.superuser.enabled
      value: "true"
    - name: magnolia.superuser.password
      value: "superuser!"
    - name: magnolia.bootstrap.license.owner
      value: "[replace with email]"
    - name: magnolia.bootstrap.license.key
      value: "[replace with key]"
  setenv:
    memory:
      maxPercentage: 80
  resources:
    requests:
      memory: 4Gi
    limits:
      memory: 4Gi
  livenessProbe:
    enabled: true
    path: "/.rest/status"
  db:
    tag: 15-alpine
    persistence:
      size: "10Gi"
    contentsync:
      enabled: true
    restore:
      enabled: False
    backup:
      enabled: True
      env:
        - name: MGNLBACKUP_USE_PG_WAL
          value: "true"
        - name: MGNLBACKUP_SYNC_DIR
          value: "/archive"
        - name: MGNLBACKUP_NO_STDOUT
          value: "true"
        - name: MGNLBACKUP_LOGLEVEL
          value: "debug"
        - name: MGNLBACKUP_BUCKET
          value: "paastraining-backup-bucket"
        - name: MGNLBACKUP_PREFIX
          value: "{{ .Env.DEPLOYMENT }}/public"
        - name: MGNLBACKUP_CRON
          value: "0 3 * * *"
        - name: MGNLBACKUP_KEEPDAYS
          value: "30"
        - name: MGNLBACKUP_TAGS_RELEASE
          value: {{ .Env.DEPLOYMENT }}
        #
        # Choose backup location based on cloud provider of the cluster
        #
        # Backup to S3
        - name: MGNLBACKUP_S3_ENDPOINT
          value: "s3.eu-central-1.amazonaws.com"
        - name: MGNLBACKUP_S3_REGION
          value: "eu-central-1"
        - name: MGNLBACKUP_S3_ACCESSKEY
          valueFrom:
            secretKeyRef:
              name: s3-backup-key
              key: accesskey
        - name: MGNLBACKUP_S3_SECRETKEY
          valueFrom:
            secretKeyRef:
              name: s3-backup-key
              key: secretkey
        # Backup to Azure storage
#        - name: MGNLBACKUP_AZ_ACCOUNT_NAME
#          valueFrom:
#            secretKeyRef:
#              name: az-backup-key
#              key: AccountName
#        - name: MGNLBACKUP_AZ_ACCOUNT_KEY
#          valueFrom:
#            secretKeyRef:
#              name: az-backup-key
#              key: AccountKey


# Additional jars which should be loaded into tomcat can be specified here.
jars:
  - name: jmx-exporter
    repository: registry.gitlab.com/mironet/magnolia-jar
    tag: jmx_prometheus_javaagent-0.13.0
    env:
      - name: INIT_DEST
        value: /extraLibs/
    initScript: /init.sh

# -- Node Toleration for Magnolia Workload.
# Add Toleration
tolerations: []
#   - key: dedicated
#     operator: Equal
#     value: prod
#     effect: PreferNoSchedule

# -- Schedule Magnolia to labeled nodes, considering [nodeAffinity expressions](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity) (may interfere with 'nodeSelector').
nodeAffinity: {}
# # Example Hard Node Affinity:
# nodeAffinity:
#   requiredDuringSchedulingIgnoredDuringExecution:
#     nodeSelectorTerms:
#       - matchExpressions:
#           - key: dedicated
#             operator: In
#             values:
#               - MagnoliaNode
# # Example Soft Node Affinity:
# nodeAffinity:
#   preferredDuringSchedulingIgnoredDuringExecution:
#     - preference:
#         matchExpressions:
#           - key: dedicated
#             operator: In
#             values:
#               - MagnoliaNode
#       weight: 100
```
