---
title: "Linkmapper Shared Database module"
url: https://docs.magnolia-cms.com/linkmapper-shared-db/
category: Modules
version: modules
breadcrumb: Linkmapper Shared Database module
---

# Linkmapper Shared Database module

| Edition | Incubator ( *services* ) |
| --- | --- |
| Issues | [TBD](https://magnolia-cms.atlassian.net/browse/TBD) |
| Git | [Git](https://gitlab.magnolia-platform.com/ps/incubator/linkmapper-shared-db) |
| Latest | 1.0 ** Compatible with Magnolia 6.2.32+. | ** | Compatible with Magnolia 6.2.32+. |
| ** | Compatible with Magnolia 6.2.32+. |

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../product-docs/RNs-6-4-3/Developing/Bundles-and-webapps/):

-   Linkmapper core (configuration)

-   Linkmapper app (usage)


```xml
<dependency>
  <groupId>info.magnolia.linkmapper</groupId>
  <artifactId>magnolia-linkmapper-db-core</artifactId>
  <version>1.0</version>
</dependency>
```

```xml
<dependency>
  <groupId>info.magnolia.linkmapper</groupId>
  <artifactId>magnolia-linkmapper-db-app</artifactId>
  <version>1.0</version>
</dependency>
```

## [](#_configuration)Configuration

To function properly, this module requires some configuration. This can be done in the JCR config node or in the `config.yaml` file.

We need to pass database connection info to the module. This is minimum configuration that needs to be passed to the module so it can connect to a database instance.

> **Important:** This module does not create a database. The database must already exist and database users must have CREATE/DROP/ALTER rights on the desired database.

### [](#_format)Format

This format is for the `config.yaml` file.

```yaml
databaseName: [db_name]
datasource:
  username: [db_user]
  password: [db_assword]
  url: [db_url]
  driver: [db_driver]
  migration:
    path: linkmapper-shared-db-core/dbmigration/[db_type]
    run: [true/false]
```

### [](#_examples)Examples

These examples would be in the `config.yaml` file.

-   MySQL

-   PostgresSQL


```yaml
databaseName: linkmapper
datasource:
  username: user
  password: password
  url: jdbc:mysql://127.0.0.1:3306/linkmapper
  driver: com.mysql.cj.jdbc.Driver
  migration:
    path: linkmapper-shared-db-core/dbmigration/mysql
    run: true
```

```yaml
databaseName: linkmapper
datasource:
  username: user
  password: password
  url: jdbc:postgresql://127.0.0.1:5432/linkmapper
  driver: org.postgresql.Driver
  migration:
    path: linkmapper-shared-db-core/dbmigration/pg
    run: true
```

Ebean note

All properties that are prefixed with `"linkmapper."` are passed to ebean server. This way, we can easily tune the ebean ORM framework.

For more on Ebean, see their [docs](https://ebean.io/docs/).

### [](#_important_considerations)Important considerations

If the database structure needs to be updated, it has to be done through ebean dbmigration as a manual database update is not allowed by ebean (as there is a `checksum` verification). This can be done by simply updating domain beans (*new or removed fields*), and running the `main` method from `GenerateDbMigration` class (`pathToResource` might have to be adapted there) which then generates new files in the corresponding path.

For the database connection to work, we need appropriate database driver to be available on the classpath. For example, if we are using the `mysql` database with a tomcat server we need to place `"mysql-connector-j-8.0.31.jar"` in the tomcat `lib` folder.

### [](#_clientidentifier_configuration)`clientIdentifier` configuration

Please remember to update the value found at `linkmapper-shared-db-core/config/` to get data from the correct client.

![clientIdentifier config](_images/clientIdentifier_config.png)

| Property | Description |
| --- | --- |
| `Link name` | Name of the Link shown in the table. |
| `Target` | Options: • Page - Choose a page from the pages app • Internal link - Enter an internal link (e.g. `/travel` ) • External link - Enter an external link (e.g. `http://myexternalsite.com` ) • Blacklist - Do not redirect to any page. Returns HTTP status code `410` instead. ( *_Choose this option in combination with the redirect type `410* `_) |
| `Redirect type` | Options: • `200` : keep URL - Target will be served on the original URI, which may look like a page duplicate. • `301` : permanent - Use in case the original URI will never exist again ( *default* ). • `302` : temporary - Use in case the original URI will exist again in the future. • `410` : blacklist - Announce that this page is permanently gone and not likely to ever appear again. |
| `Original Name` | Original name from first reload. |
| `Original URI` | URL which was causing the `404` error. |

| Version | Notes |
| --- | --- |
| `1.0` | Initial release. |
