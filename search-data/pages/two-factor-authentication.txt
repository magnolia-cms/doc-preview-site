---
title: "Two Factor Authentication module"
url: https://docs.magnolia-cms.com/two-factor-authentication/
category: Modules
version: modules
breadcrumb: Two Factor Authentication module
---

# Two Factor Authentication module

[Incubator](https://gitlab.magnolia-platform.com/ps/incubator/two-factor-authentication) Version 3.0.0 [Magnolia 6.4](../product-docs/RNs-6-4-3/) compatible

The **Two Factor Authentication module** enables two factor authentication (2FA) via [Time-Based One-Time Password (TOTP)](https://datatracker.ietf.org/doc/html/rfc6238). for Magnolia’s default login form.

A private key is generated and sent to the sent to the user’s email as a QR code. The user scans this code in a suitable password generating app such as Google Authenticator, Microsoft Authenticator, or another 2FA tool.

On log in, users are required to enter the latest code generated by the app using their secret key. Only when the correct code is provided can the user log in.

## [](#_prerequisites)Prerequisites

-   You must have the [Mail module](../product-docs/RNs-6-4-3/Modules/List-of-modules/Mail-module/) installed and the mail server configured in order to proceed.


> **Warning:** Administrators need to generate QR codes for users and verify them before enabling the 2FA feature.If you have already enabled two-factor authentication:Disable 2FA by decorating the module config.Generate the QR code for your user and add to a token generating application.Re-enable 2FA.

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../product-docs/RNs-6-4-3/Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia.security</groupId>
  <artifactId>two-factor-authentication</artifactId>
  <version>3.0.0</version>
</dependency>
```

| Property | Description |
| --- | --- |
| `from` | **required** The `from` field specifies where the email is coming from and is sent to users when a code is generated for them. |
| `subject` | **required** The `subject` line of the email that will be sent to users when a code is generated for them. |

## [](#_usage)Usage

This sections covers how to use the module.

### [](#_generate_token)Generate token

1.  In AdminCentral, go to the **Security** app.

2.  Go to **System Users**.

3.  Select the desired user.

    1.  In the edit panel, click **Generate Security Token**.

        ![2fa generate](_images/2fa-generate.png)



#### [](#_user_interaction)User interaction

Once the security token is generated, the selected user receives an email prompting them to scan an attached QR code with a one-time key generating tool.

![2fa email](_images/2fa-email.png)

### [](#_use_the_token)Use the token

For the flow to be completed:

1.  The user scans the QR code with their app.

2.  The user receives a time-sensitive code in their app.

3.  The user enters the code in the corresponding field of the Magnolia login screen.


![2fa login](_images/2fa-login.png)

| Version | Notes |
| --- | --- |
| `3.0.0` | Release for Magnolia 6.4 compatibility. [Changelog](https://magnolia-cms.atlassian.net/issues/?jql=project%20%3D%20TWOFAUTH%20AND%20fixVersion%20%3D%203.0.0) |
