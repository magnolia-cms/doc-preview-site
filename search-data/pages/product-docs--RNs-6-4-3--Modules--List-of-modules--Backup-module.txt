---
title: "Backup module"
url: https://docs.magnolia-cms.com/product-docs/RNs-6-4-3/Modules/List-of-modules/Backup-module/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Modules > Backup module
---

# Backup module

| Edition | DX Core |
| --- | --- |
| License | [MLA](https://www.magnolia-cms.com/mla.html) |
| Issues | [MGNLBACKUP](https://magnolia-cms.atlassian.net/browse/MGNLBACKUP) |
| Maven site | [Backup](https://nexus.magnolia-cms.com/#browse/browse:enterprise:info%2Fmagnolia%2Fmagnolia-module-backup%2F{magnolia-module-backup}) |
| Latest | {magnolia-module-backup} |

## [](#_installing_with_maven)Installing with Maven

Maven is the easiest way to install the module. Add the following to your [bundle](../../../Developing/Bundles-and-webapps/):

```xml
<dependency>
  <groupId>info.magnolia</groupId>
  <artifactId>magnolia-module-backup</artifactId>
  <version>{magnolia-module-backup}</version> (1)
</dependency>
```

|     |     |
| --- | --- |
| **1** | Should you need to specify the module version, do it using `<version>`. |

| `<backup folder>` |  |
| --- | --- |
| `respository` | Subfolders containing data store and configuration files necessary to restore the repositories. |
| `version` | Version database. Contains versions of all versionable content from all repositories. |
| `workspaces` | One folder per workspace. Holds all content of a given workspace. |
| `repository.xml` | Repository configuration file. |

| Short | Long | Description |
| --- | --- | --- |
| `-c <arg>` | `--configuration <arg>` | **required** Location of the repository configuration. ** By default, Derby is the database configured out of the box. Several configuration files are included in your installation’s `apache-tomcat/webapps/magnoliaAuthor/WEB-INF/config/repo-conf` folder. Make sure you specify the file that best fits your [database](../../../Administration/Architecture/Repositories/repository-configuration/#_database) , for example, `jackrabbit-bundle-derby-search.xml` for Derby. | ** | By default, Derby is the database configured out of the box. Several configuration files are included in your installation’s `apache-tomcat/webapps/magnoliaAuthor/WEB-INF/config/repo-conf` folder. Make sure you specify the file that best fits your [database](../../../Administration/Architecture/Repositories/repository-configuration/#_database) , for example, `jackrabbit-bundle-derby-search.xml` for Derby. |
| ** | By default, Derby is the database configured out of the box. Several configuration files are included in your installation’s `apache-tomcat/webapps/magnoliaAuthor/WEB-INF/config/repo-conf` folder. Make sure you specify the file that best fits your [database](../../../Administration/Architecture/Repositories/repository-configuration/#_database) , for example, `jackrabbit-bundle-derby-search.xml` for Derby. |
| `-r <arg>` | `--repository <arg>` | **required** Location of the repository to back up. |
| `-t <arg>` | `--target <arg>` | **required** Target location for the backup. |
| `-mr <arg>` | `--maxRetries <arg>` | **optional** Maximum number of retries when encountering an exception. |
| `-rt <arg>` | `--retryTimeout <arg>` | **optional** Interval in seconds for retrying the backup when an exception occurs. |
| `-u <context> <username:password>` | `--user <context> <username:password>` | **optional** Context, username and password. Used for launching a backup from a running Magnolia instance with a given username, password and host URL. ** This option only works if the user has been assigned the `rest-backup` role. See [Backup REST service](#_backup_rest_service) . | ** | This option only works if the user has been assigned the `rest-backup` role. See [Backup REST service](#_backup_rest_service) . |
| ** | This option only works if the user has been assigned the `rest-backup` role. See [Backup REST service](#_backup_rest_service) . |
| `-z` | `--zip` | **optional** Creates a compressed ZIP archive. |
| `-zp <arg>` | `--zipPath <arg>` | **required** when `-z` is used Location for a zip backup archive. The argument must be a file with a path. The path must be absolute in the context of the Backup module (for example, `-z -zp /tmp/magnolia-backup.zip` ). |

| Short | Long | Description |
| --- | --- | --- |
| `-c` | `--configuration <arg>` | **required** Location of the repository configuration. `magnolia.repositories.jackrabbit.config` property. |
| `-r` | `--repository <arg>` | **required** Location of the repository to restore. `magnolia.repositories.home` property followed by the repository name (default: `magnolia` ). |
| `-s` | `--source <arg>` | **required** Source location of the backup. |
| `-z` | `--zip` | **optional** Restores from a compressed ZIP archive. |

| Property | Description |
| --- | --- |
| `commands` | **optional** Commands folder. |
| `backup` | **required** Backup [catalog](../../../Developing/Commands/#_catalogs) . |
| `backup` | **required** [Command](../../../Developing/Commands/) name. |
| `class` | **required** info.magnolia.module.backup.commands.BackupCommand starts the execution of both [manual](#_creating_manual_backups) and [automatic](#_scheduling_automatic_backups) backups. |
| `repositoryPath` | **required** , *default is magnolia.repositories.home* Location of the repository to back up. |
| `configurationPath` | **required** , *default is magnolia.repositories.jackrabbit.config* Location of the repository configuration. |
| `backupLocation` | **required** Target location for the backup. |
| `compression` | **optional** , *default is false* When `true` , the backup is compressed in a ZIP archive. |
| `retryTimeout` | **optional** , *default is 30* Interval in seconds for retrying the backup when an exception occurs. |
| `maxRetries` | **optional** , *default is 3* Maximum number of retries when encountering an exception. |

| Property | Description |
| --- | --- |
| `enabledCommands` | **required** Enabled commands node. |
| `backup` | **required** Command node. The name is arbitrary. |
| `access` | **required** Access node. |
| `roles` | **required** Roles node. |
| `rest-backup` | **required** Role name. Grants the `rest-backup` role permission to execute the command. The property name is arbitrary, but the value must be a valid role name. |
| `catalogName` | **required** [Catalog](../../../Developing/Commands/#_catalogs) where the command resides. |
| `commandName` | **required** [Command definition](../../../Developing/Commands/) name. |

## [](#_issues)Issues

### [](#_ant_malformed_uxxxx_encoding_in_a_propertyfile_task)Ant: Malformed \\uxxxx encoding in a propertyfile task

You may encounter the following error:

```console
1) [Guice/ErrorInjectingConstructor]: IllegalArgumentException: Malformed \\uxxxx encoding.
  at DefaultMessageBundlesLoaderProvider.<init>(DefaultMessageBundlesLoaderProvider.java:50)
  while locating DefaultMessageBundlesLoaderProvider
  at GuiceComponentConfigurationModule.bindProvider(GuiceComponentConfigurationModule.java:187)
      \\_ installed by: Modules$OverrideModule -> Modules$OverrideModule -> GuiceComponentProviderBuilder$1 -> GuiceComponentConfigurationModule
  while locating DefaultMessageBundlesLoader
```

Debug to find the properties file which caused this error, enable it through the `log4j2.xml`.

```console
<Logger name="info.magnolia.i18nsystem" level="DEBUG"/>
```

**Solution**

1.  Use the correct classpath for SmartTomcat.

2.  Follow [java.lang.IllegalArgumentException: Malformed \\uxxxx encoding while mvn install](https://stackoverflow.com/questions/68003423/java-lang-illegalargumentexception-malformed-uxxxx-encoding-while-mvn-install).
