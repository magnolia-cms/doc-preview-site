---
title: "Deployment"
url: https://docs.magnolia-cms.com/product-docs/7.0/Modules/List-of-modules/Swift-publication-module/Swift-deployment/
category: Magnolia 6.4
version: latest
breadcrumb: DX Core > Modules > Swift publication > Deployment
---

# Deployment

This page describes starting REST-based Swift publication with Magnolia for [production environments](#_starting_rest_based_swift_publication_and_magnolia) and [local development](#_local_development_for_testing).

## [](#_starting_rest_based_swift_publication_and_magnolia)Starting REST-based Swift publication and Magnolia

For production environments, you can follow the steps in this section to start REST-based Swift publication and Magnolia.

1.  Ensure you have added the [REST dependency](../Swift-publication-module/#_installing_with_maven), `magnolia-swift-publication-rest`, to your custom DX Core webapp.

2.  The Pages app is configured to use Swift by default. In the Assets app or any other content app, you must set up the configuration for Swift yourself. See [Enabling versioning in Swift publication](../Swift-versioning/) for more details.

3.  Signature authentication is enabled by default. Ensure that the public key is available on all public instances. See [Signature authentication](../Swift-configuration/#authentication-signature-enabled) for more details.

4.  Start your Magnolia instance.


## [](#_migrating_content_from_jcr_to_swift)Migrating content from JCR to Swift

If you want to use existing JCR versions from previous publications so that you can restore them if needed, you should migrate any existing content before working with Swift publication.

> **Note:** Currently there’s an issue migrating versions from JCR to Swift. For more details, see SWIFTPUB-477.After installing Swift, if you want to migrate JCR to Swift versions, use the following workaround:Run the Disable Swift script to disable Swift temporarily.Run the migration as described in this section to migrate JCR versions to Swift versions.Run the Enable Swift script to re-enable it.

### [](#_groovy_script_migration)Groovy script migration

You can use the Groovy script below to migrate your content.

```groovy
import info.magnolia.swift.versioning.api.data.migration.JcrToSwift
import info.magnolia.objectfactory.Components

jcrToSwift = Components.newInstance(JcrToSwift.class)

website = MgnlContext.getInstance().getJCRSession("website")
page = website.getNode("/page")

jcrToSwift.migrateNode(page)
// jcrToSwift.migrateNode(page, "mgnl:custom") (1)
// jcrToSwift.migrateRecursively(page)
// jcrToSwift.migrateRecursively(page, "mgnl:custom") (1)
```

|     |     |
| --- | --- |
| **1** | If you use custom node types for pages and their content, you need to provide node types to describe the page content. |

### [](#_endpoint_migration)Endpoint migration

Alternatively, you can enable a REST endpoint by providing a .yaml definition as follows.

/<YOUR\_MODULE>/restEndpoints/swift-migration.yaml

```yaml
class: info.magnolia.swift.versioning.api.data.migration.endpoint.MigrationEndpointDefinition
```

You can trigger the endpoint with the example URLs below.

```none
http://yourdomain.com/.rest/swift-migration/jcr2swift/website
http://yourdomain.com/.rest/swift-migration/jcr2swift/website/mgnl:custom,mgnl:another
```

## [](#_enabledisable_swift_at_runtime)Enable/Disable Swift at runtime

To temporarily enable or disable Swift publication commands in Magnolia, there are scripts provided for development environments. They allow you to switch between DX Core publishing and Swift publication by running the respective script.

If you have the `it-fixture-module` module installed, you can find the `enableSwift` and `disableSwift` scripts in the Groovy app. Alternatively, find them in these locations and add them to the Groovy app yourself.

-   Disable script: `magnolia-swift-publication-it/it-fixture-module/src/main/resources/mgnl-bootstrap/it-fixture-module/scripts.disableSwift.xml`

-   Enable script: `magnolia-swift-publication-it/it-fixture-module/src/main/resources/mgnl-bootstrap/it-fixture-module/scripts.enableSwift.xml`


> **Tip:** These scripts are designed specifically for the Pages app. If your project has custom versioning or publishing settings, you must adjust them accordingly.

## [](#_local_development_for_testing)Local development for testing

For local development, you can start a container by following the steps in this section.

> **Note:** The receiver’s value in your local author instance could also be your computer’s local hostname or local network name, such as My-Computer.local on a Mac.

1.  Install [Docker Desktop](https://www.docker.com/products/docker-desktop) if you don’t have it already on your system.

2.  Clone the [`swift-publication` repository](https://gitlab.magnolia-platform.com/pd/extensions/swift-publication/-/tree/master).

3.  Add a file `develop.env` with a valid Magnolia license in the `magnolia-swift-publication-it` folder.

    ```properties
    MAGNOLIA_LICENSE_OWNER=<LICENSE_OWNER>
    MAGNOLIA_LICENSE_KEY=<YOUR_LICENSE_KEY>
    ```

4.  Use the [docker-compose.yml](https://gitlab.magnolia-platform.com/pd/extensions/swift-publication/-/blob/master/magnolia-swift-publication-it/docker-compose.yml) file from the `magnolia-swift-publication-it` module.

    ```bash
    cd magnolia-swift-publication-it
    ```

5.  Set the environment variable for REST publication before running the build.

    ```bash
    export PUBLICATION=publication-rest
    ```

6.  Start containers for local development

    ```bash
    make build
    make up
    ```
